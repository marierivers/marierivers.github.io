{
  "hash": "b86d34031d185dc6d81c9a2fe878d246",
  "result": {
    "markdown": "---\ntitle: \"Blackout Analysis with Python and R\"\ndescription: \"A geospatial analysis of power outages based in nighttime imagery using Python and R\"\nauthor:\n  - name: Marie Rivers\n    url: https://marierivers.github.io/\n# date: 2022-04-03\ncategories: [Python, R, geospatial analysis]\ncitation: \n  url: https://marierivers.github.io/code_samples/blackout-analysis-with-python-and-r/ \nimage: leaflet_blackout_mask.png\ndraft: false\neditor: visual\ntoc-title: Contents\ntoc-location: left\ntoc-depth: 3\ncode-tools: \n  source: true\n  toggle: true\n  caption: view code\ncode-block-bg: true\n# code-block-border-left: \"#31BAE9\"\n---\n\n\nThis analysis evaluates the spatial distribution of power outages in the area surrounding Houston, Texas caused by winter storms in February 2021 and explores which socioeconomic variables are most correlated with power outages. Code and outputs for the geospatial and statistical analyses can be view from the navigation bar at the top of this page.\n\n::: callout-note\nThis analysis started as an assignment for a [Spatial Analysis](https://jamesfrew.github.io/EDS_223_spatial_analysis/assignments/2/HW2.html) class I took as part of my [Masters of Environmental Data Science](https://ucsb-meds.github.io/) degree at UC Santa Barbara. Here, the original assignment is expanded upon to include additional socioeconomic variables, a statistical analysis, and interactive leaflet maps.\n:::\n\n# Background\n\nIn 2021, large portions of the United States experience three major winter storms on February 10-11, February 13-17, and February 15-20. The electrical infrastructure in the state of Texas was particularly affected by these events. In the Houston area, an estimated 1.4 million customers were without power on February 15. Using satellite imagery and census data, this analysis quantifies the magnitude and socioeconomic variability of power outages surrounding Houston. Goals of the analysis include:\n\n-   estimate the number of homes without power\n-   evaluate race, age, and income differences between areas with and without power\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code  code-fold=\"true\" code-summary=\"R libraries\"}\n# load libraries used in the R analysis\nlibrary(reticulate)\nlibrary(tidyverse)\nlibrary(kableExtra)\nlibrary(here)\nlibrary(stars)\nlibrary(sf)\nlibrary(leaflet)\nlibrary(patchwork)\nlibrary(jtools)\n```\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code  code-fold=\"true\" code-summary=\"Python packages\"}\n# load packages used in Python analysis\nimport numpy as np\nimport pandas as pd\nimport geopandas as gpd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\nfrom osgeo import gdal, osr\nimport rasterio\nfrom rasterio.merge import merge\nfrom rasterio.features import shapes\nfrom shapely.geometry import Polygon\nfrom shapely.geometry import shape\nfrom statsmodels.formula.api import ols\n```\n:::\n\n\n# Geospatial Analysis\n\n## Read in data\n\nRead in all data layers and clip to the region on interest.\n\n### Satellite imagery\n\nNighttime light data was obtained from the Visible Infrared Imaging Radiometer Suite (VIIRS), located on the Suomi NPP satellite, which uses a low-light sensor to measure light emissions and reflections. Specifically, the daily at-sensor top of atmosphere (TOA) nighttime radiance (VNP46A1) product was used. This data is available at a 500 meter geographic linear latitude/longitude grid resolution. The processed data accounts for nighttime cloud masks, solar/viewing/lunar geometry values, aerosols, and snow cover. This analysis used the day/night band DNB_At_Sensor_Radiance_500m dataset within the VNP46A1 product.\n\nImagery from February 7th and February 16th was used to visualize pre- and post-storm conditions due to a lack of cloud cover. Imagery from two tiles was needed to cover the area of interest, which resulted in a total of four files used in the analysis.\n\n-   VNP46A1.A2021038.h08v05.001.2021039064328.h5\n-   VNP46A1.A2021038.h08v06.001.2021039064329.h5\n-   VNP46A1.A2021047.h08v05.001.2021048091106.h5\n-   VNP46A1.A2021047.h08v06.001.2021048091105.h5\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>File name convention</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> file name part </th>\n   <th style=\"text-align:left;\"> explanation </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> VNP46A1 </td>\n   <td style=\"text-align:left;\"> name of data short product </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> A2021038 </td>\n   <td style=\"text-align:left;\"> year (ie. 2021) and day of year (ie. 038) that the imagery was acquired </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> h08 </td>\n   <td style=\"text-align:left;\"> horizontal tile number 8 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> v05 </td>\n   <td style=\"text-align:left;\"> vertical tile number 5 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 2021039064328 </td>\n   <td style=\"text-align:left;\"> year (2021), day of year (039), and time (06:43:28 UTC) that the file contents were generated </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> h5 </td>\n   <td style=\"text-align:left;\"> file extension: HDF-EOS5 (hierarchical data format - earth observing system) </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nThe functions below takes an HDFEOS file as input and, from that file, reads the DNB_at_Sensor_Radiance_500m dataset. The R code using the [`stars`](https://r-spatial.github.io/stars/) package with Python code uses [`GDAL`](https://gdal.org/api/python_bindings.html) and [`rasterio`](https://rasterio.readthedocs.io/en/stable/). The functions then reads the sinusoidal tile x/y positions, adjusts the dimensions, and sets the coordinate reference system.\n\n#### Fuctions to read imagery data\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# function to read and process imagery files as rasters using the stars package\nread_dnb_file <- function(file_name) {\n  \n  # HDF dataset that contains the night lights band\n  dataset_name <- \"//HDFEOS/GRIDS/VNP_Grid_DNB/Data_Fields/DNB_At_Sensor_Radiance_500m\"\n  \n  # extract the horizontal and vertical tile coordinates from the metadata\n  # this information is a string of text\n  h_string <- gdal_metadata(file_name)[199]\n  v_string <- gdal_metadata(file_name)[219]\n  \n  # from the horizontal and vertical tile text, obtain the coordinate info as an integer\n  tile_h <- as.integer(str_split(h_string, \"=\", simplify = TRUE)[[2]])\n  tile_v <- as.integer(str_split(v_string, \"=\", simplify = TRUE)[[2]])\n  \n  # use tile coordinates to calculate a geographic bounding box\n  west <- (10 * tile_h) - 180\n  north <- 90 - (10 * tile_v)\n  east <- west + 10\n  south <- north - 10\n  \n  delta <- 10 / 2400\n  \n  # read the dataset\n  dnb <- read_stars(file_name, sub = dataset_name)\n  \n  # set the coordinate reference system\n  st_crs(dnb) <- st_crs(4326)\n  st_dimensions(dnb)$x$delta <- delta\n  st_dimensions(dnb)$x$offset <- west\n  st_dimensions(dnb)$y$delta <- -delta\n  st_dimensions(dnb)$y$offset <- north\n  \n  return(dnb)\n}\n\n# load in files using the read_dnb function\ndnb_feb7_h08v05 <- read_dnb_file(file_name = \"data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5\")\ndnb_feb7_h08v06  <- read_dnb_file(file_name = \"data/VNP46A1/VNP46A1.A2021038.h08v06.001.2021039064329.h5\")\ndnb_feb16_h08v05 <- read_dnb_file(file_name = \"data/VNP46A1/VNP46A1.A2021047.h08v05.001.2021048091106.h5\")\ndnb_feb16_h08v06 <- read_dnb_file(file_name = \"data/VNP46A1/VNP46A1.A2021047.h08v06.001.2021048091105.h5\")\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\n# code from: https://blackmarble.gsfc.nasa.gov/tools/OpenHDF5.py\ndef read_dnb_file_py (file_name):\n    rasterFiles = file_name\n    \n    #Get File Name Prefix\n    rasterFilePre = rasterFiles[8:16] + \"_\" + rasterFiles[17:23]\n    rasterPath = \"data/VNP46A1/\" + rasterFiles\n    fileExtension = \"_BBOX.tif\"\n    \n    # Open HDF file\n    hdflayer = gdal.Open(rasterPath, gdal.GA_ReadOnly)\n    \n    # Open raster layer\n    subhdflayer = hdflayer.GetSubDatasets()[4][0] # DNB_At_Sensor_Radiance_500m\n    rlayer = gdal.Open(subhdflayer, gdal.GA_ReadOnly)\n    \n    # Subset the Long Name\n    outputName = subhdflayer[92:]\n    outputNameNoSpace = outputName.strip().replace(\" \",\"_\").replace(\"/\",\"_\")\n    outputNameFinal = outputNameNoSpace + \"_\" + rasterFilePre + fileExtension\n    \n    # outputFolder = \"data/image\"\n    # outputRaster = outputFolder + outputNameFinal\n    outputFolder = \"data/\"\n    outputPre = \"image\"\n    outputRaster = outputFolder + outputPre + outputNameFinal\n    \n    # collect bounding box coordinates\n    HorizontalTileNumber = int(rlayer.GetMetadata_Dict()[\"HorizontalTileNumber\"])\n    VerticalTileNumber = int(rlayer.GetMetadata_Dict()[\"VerticalTileNumber\"])\n    \n    WestBoundCoord = (10*HorizontalTileNumber) - 180\n    NorthBoundCoord = 90-(10*VerticalTileNumber)\n    EastBoundCoord = WestBoundCoord + 10\n    SouthBoundCoord = NorthBoundCoord - 10\n    \n    # set crs\n    EPSG = \"-a_srs EPSG:4326\" #WGS84\n    \n    translateOptionText = EPSG+\" -a_ullr \" + str(WestBoundCoord) + \" \" + str(NorthBoundCoord) + \" \" + str(EastBoundCoord) + \" \" + str(SouthBoundCoord)\n    translateoptions = gdal.TranslateOptions(gdal.ParseCommandLine(translateOptionText))\n    gdal.Translate(outputRaster, rlayer, options=translateoptions)\n    \n    return(rasterio.open(outputRaster))\n\n# load in files using the read_dnb function\n# this saves geotif files of the data\ndnb_feb7_h08v05_py = read_dnb_file_py(file_name = \"VNP46A1.A2021038.h08v05.001.2021039064328.h5\")\ndnb_feb7_h08v06_py  = read_dnb_file_py(file_name = \"VNP46A1.A2021038.h08v06.001.2021039064329.h5\")\ndnb_feb16_h08v05_py = read_dnb_file_py(file_name = \"VNP46A1.A2021047.h08v05.001.2021048091106.h5\")\ndnb_feb16_h08v06_py = read_dnb_file_py(file_name = \"VNP46A1.A2021047.h08v06.001.2021048091105.h5\")\n```\n:::\n\n:::\n\n#### Merge imagery files\n\nCombine the tiles from each day, like stitching together quilt squares. The R code uses [`st_mosaic()`](https://www.rdocumentation.org/packages/stars/versions/0.6-4/topics/st_mosaic) and the Python code uses [`rasterio.merge`](https://rasterio.readthedocs.io/en/stable/api/rasterio.merge.html).\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code}\n# combined imagery before the storms\nfeb7_merged <-  st_mosaic(dnb_feb7_h08v05, dnb_feb7_h08v06)\n\n# combined imagery after the storms\nfeb16_merged <- st_mosaic(dnb_feb16_h08v05, dnb_feb16_h08v06)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\n# combined imagery before the storms\nfeb7_merged_py, transform = merge([dnb_feb7_h08v05_py, dnb_feb7_h08v06_py])\n\n# combined imagery after the storms\nfeb16_merged_py, transform = merge([dnb_feb16_h08v05_py, dnb_feb16_h08v06_py])   \n```\n:::\n\n:::\n\n\n\n\n\n#### Extract fill value from meta data and convert to NA in data arrays\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code}\n# extract fill value from metadata\nfill_value_string <- gdal_metadata(\"data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5\")[38]\nfill_value <- as.integer(str_split(fill_value_string, \"=\", simplify = TRUE)[[2]])\n\n# convert fill value of 65535 to NA\nfeb7_merged[feb7_merged == fill_value] = NA\nfeb16_merged[feb16_merged == fill_value] = NA\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\nds = gdal.Open('data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5', gdal.GA_ReadOnly)\nmeta = ds.GetMetadata()\nfill_value_py = int(meta['HDFEOS_GRIDS_VNP_Grid_DNB_Data_Fields_DNB_At_Sensor_Radiance_500m__FillValue'])\n\n# convert fill value to nan\nfeb7_merged_py = np.where(feb7_merged_py == fill_value_py, np.nan, feb7_merged_py)\nfeb7_merged_metadata = dnb_feb7_h08v05_py.meta.copy()\nfeb7_merged_metadata.update(width=feb7_merged_py.shape[2], height=feb7_merged_py.shape[1], transform=transform, dtype='float32')\nfeb7_merged_dataset = rasterio.io.MemoryFile().open(**feb7_merged_metadata)\nfeb7_merged_dataset.write(feb7_merged_py)\n\nfeb16_merged_py = np.where(feb16_merged_py == fill_value_py, np.nan, feb16_merged_py)\nfeb16_merged_metadata = dnb_feb16_h08v05_py.meta.copy()\nfeb16_merged_metadata.update(width=feb16_merged_py.shape[2], height=feb16_merged_py.shape[1], transform=transform, dtype='float64')\nfeb16_merged_dataset = rasterio.io.MemoryFile().open(**feb16_merged_metadata)\nfeb16_merged_dataset.write(feb16_merged_py)\n```\n:::\n\n:::\n\nAccording to the metadata, the fill value is 65535.\n\n#### Crop to ROI\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code}\n# set region on interest\nroi_coordinates <- st_polygon(list(rbind(c(-96.5,29), c(-96.5,30.5), c(-94.5,30.5), c(-94.5,29), c(-96.5,29))))\n\n# set coordinate reference system\nroi_sfc <- st_sfc(roi_coordinates, crs = 4326)\n# crs 4326 matches the crs of the satellite imagery\n\nfeb7_roi <- st_crop(feb7_merged, roi_sfc)\nfeb16_roi <- st_crop(feb16_merged, roi_sfc)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\nroi_coordinates_py = [(-96.5, 29), (-96.5, 30.5), (-94.5, 30.5), (-94.5, 29), (-96.5, 29)]\nmin_x, min_y = min(coord[0] for coord in roi_coordinates_py), min(coord[1] for coord in roi_coordinates_py)\nmax_x, max_y = max(coord[0] for coord in roi_coordinates_py), max(coord[1] for coord in roi_coordinates_py)\n\n# Get the window of the ROI\nwindow = feb7_merged_dataset.window(min_x, min_y, max_x, max_y)\n\n# Read the data within the ROI\nfeb7_roi_py = feb7_merged_dataset.read(window=window)\nfeb16_roi_py = feb16_merged_dataset.read(window=window)\n\n# Update the transform and profile\ntransform = feb7_merged_dataset.window_transform(window)\nprofile = feb7_merged_dataset.profile\nprofile.update({\n    'transform': transform,\n    'width': window.width,\n    'height': window.height,\n    'crs': feb7_merged_dataset.crs\n})\n   \n```\n:::\n\n:::\n\n### Road and Building data\n\nBuilding and road data was obtained from [OpenStreetMap](https://www.openstreetmap.org/#map=5/38.007/-95.844). Subsets of the data were provided as GeoPackages (.gpkg) for the Houston metropolitan area. SQL queries were used to subset highways and major roads from the the road file and residential buildings from the building file.\n\nSince vehicles can be a significant source of observable nighttime light, a 200 meter highway buffer was removed from the blackout mask area. This step prevents areas that experienced reduced traffic from being identified as areas with power outages.\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code}\n# load in roads package and select specifically highways\nquery_roads <- \"SELECT * FROM gis_osm_roads_free_1 WHERE fclass in ('motorway', 'motorway_link', 'primary', 'primary_link')\"\nhighways <- st_read(\"data/gis_osm_roads_free_1.gpkg\", query = query_roads)\n\n# transform to the correct projection\nhighways_3083 <- st_transform(highways, crs = 3083)\n\n# create a 200 meter buffer\nhighways_buffer_3083 <- st_buffer(highways_3083, dist = 200) \nhighways_buffer_3083 <- st_union(highways_buffer_3083)\nhighways_buffer_4326 <- st_transform(highways_buffer_3083, crs = 4326)\nhighways_buffer_4326 <- st_make_valid(highways_buffer_4326)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\n# load in roads package and select specifically highways\nquery_roads_py = \"SELECT * \\\nFROM gis_osm_roads_free_1 \\\nWHERE fclass in ('motorway', 'motorway_link', 'primary', 'primary_link')\"\n\nhighways_py = gpd.read_file(\"data/gis_osm_roads_free_1.gpkg\", query = query_roads_py)\nhighways_py = highways_py[(highways_py['fclass'] == 'motorway') | (highways_py['fclass'] == 'motorway_link') | (highways_py['fclass'] == 'primary') | (highways_py['fclass'] == 'primary_link')]\nhighways_3083_py = highways_py.to_crs(3083)\n\nhighway_buffer_3083_py = highways_3083_py.copy()\nhighway_buffer_3083_py['geometry'] = highway_buffer_3083_py['geometry'].buffer(200)\nhighway_buffer_3083_py = gpd.GeoDataFrame(geometry=[highway_buffer_3083_py.geometry.unary_union], crs=3083)\n```\n:::\n\n:::\n\nClose inspection of the building data shows many NA values in the `type` field. When looking at the data on the map, most NA values appear to be residential buildings, but some non-residential buildings such as schools are included.\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code}\n# read in buildings data and select only residential\nquery_buildings <- \"SELECT * FROM gis_osm_buildings_a_free_1 WHERE (type IS NULL AND name IS NULL) OR type in ('residential', 'apartments', 'house', 'static_caravan', 'detached')\"\n\n# read buildings gpkg into object, and transform to correct projection\nbuildings <- st_read(\"data/gis_osm_buildings_a_free_1.gpkg\", query = query_buildings)\nbuildings_3083 <- st_transform(buildings, crs = 3083) # xx\nbuildings_4326 <- st_transform(buildings, crs = 4326)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nbuildings_4326_py = gpd.read_file('data/gis_osm_buildings_a_free_1.gpkg')\nbuildings_4326_py = buildings_4326_py[((buildings_4326_py['type'].isna()) & (buildings_4326_py['name'].isna())) | buildings_4326_py['type'].isin(['residential', 'apartments', 'house', 'static_caravan', 'detached'])]\n\nbuildings_3083_py = buildings_4326_py.to_crs(3083)\n```\n:::\n\n:::\n\n\n\n\n\n### Census data\n\nData pertaining to race, age, and income demographics for Texas census tract was obtained from the U.S. Census Bureau's [American Community Survey](https://www.census.gov/programs-surveys/acs). The data used in this analysis is from 2019 and was cropped to the region of interest. Specific variables evaluated include:\n\n-   Race\n    -   white\n    -   black\n    -   native american\n    -   hispanic / latino\n-   Age\n    -   65 and older\n    -   children under 18\n-   Income\n    -   households below poverty level\n    -   median income\n\nWhile the race and age data provides the population of each variable for each census tract, these values were normalized by the total population of the census tract. The poverty data was normalized by number of households in each census tract.\n\n::: callout-note\nThe ACS data consists of the layers listed below, with each layer containing subsets of data as documented in the [ACS Metadata](https://www2.census.gov/geo/docs/maps-data/data/tiger/prejoined/ACSMetadata2011.txt).\n\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"kable_wrapper lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>American Commnity Surey Layer Names</caption>\n<tbody>\n  <tr>\n   <td> \n\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Layer name </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> X01_AGE_AND_SEX </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X02_RACE </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X03_HISPANIC_OR_LATINO_ORIGIN </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X04_ANCESTRY </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X05_FOREIGN_BORN_CITIZENSHIP </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X06_PLACE_OF_BIRTH </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X07_MIGRATION </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X08_COMMUTING </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X09_CHILDREN_HOUSEHOLD_RELATIONSHIP </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X10_GRANDPARENTS_GRANDCHILDREN </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X11_HOUSEHOLD_FAMILY_SUBFAMILIES </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X12_MARITAL_STATUS_AND_HISTORY </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X13_FERTILITY </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X14_SCHOOL_ENROLLMENT </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X15_EDUCATIONAL_ATTAINMENT </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X16_LANGUAGE_SPOKEN_AT_HOME </td>\n  </tr>\n</tbody>\n</table>\n\n </td>\n   <td> \n\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Layer name </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> X17_POVERTY </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X18_DISABILITY </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X19_INCOME </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X20_EARNINGS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X21_VETERAN_STATUS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X22_FOOD_STAMPS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X23_EMPLOYMENT_STATUS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X25_HOUSING_CHARACTERISTICS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X27_HEALTH_INSURANCE </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X28_COMPUTER_AND_INTERNET_USE </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X29_VOTING_AGE_POPULATION </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X99_IMPUTATION </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X24_INDUSTRY_OCCUPATION </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> X26_GROUP_QUARTERS </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> TRACT_METADATA_2019 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> ACS_2019_5YR_TRACT_48_TEXAS </td>\n  </tr>\n</tbody>\n</table>\n\n </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n:::\n\n#### Census tract geometry\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code}\n# read in census tract geometry\nacs_geoms <- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\",\n                     layer = \"ACS_2019_5YR_TRACT_48_TEXAS\") %>%\n  select(-(STATEFP:Shape_Area))\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\n# census tract geometry\nacs_geoms_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                          layer = \"ACS_2019_5YR_TRACT_48_TEXAS\")\n\nacs_geoms_py_3083 = acs_geoms_py.to_crs(3083)\n```\n:::\n\n:::\n\n#### Age and sex layer\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# read in variables of interest\nacs_age_sex <- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\",\n                      layer = \"X01_AGE_AND_SEX\")\nacs_age_sex_df <- acs_age_sex %>%\n  select(GEOID) %>%\n  mutate(total_pop_from_age_sex = acs_age_sex$B01001e1,\n         median_age = acs_age_sex$B01002e1,\n         pop_male_65_66 = acs_age_sex$B01001e20,\n         pop_male_67_to_69 = acs_age_sex$B01001e21,\n         pop_male_70_to_74 = acs_age_sex$B01001e22,\n         pop_male_75_to_79 = acs_age_sex$B01001e23,\n         pop_male_80_to_84 = acs_age_sex$B01001e24,\n         pop_male_85_and_over = acs_age_sex$B01001e25,\n         pop_female_65_66 = acs_age_sex$B01001e44,\n         pop_female_67_to_69 = acs_age_sex$B01001e45,\n         pop_female_70_to_74 = acs_age_sex$B01001e46,\n         pop_female_75_to_79 = acs_age_sex$B01001e47,\n         pop_female_80_to_84 = acs_age_sex$B01001e48,\n         pop_female_85_and_over = acs_age_sex$B01001e49,\n         pop_65_and_over = pop_male_65_66 + pop_male_67_to_69 + pop_male_70_to_74 + pop_male_75_to_79 + pop_male_80_to_84 + pop_male_85_and_over + pop_female_65_66 + pop_female_67_to_69 + pop_female_70_to_74 + pop_female_75_to_79 + pop_female_80_to_84 + pop_female_85_and_over,\n         pct_65_and_over = (pop_65_and_over / total_pop_from_age_sex) * 100) %>%\n  select(GEOID, total_pop_from_age_sex, pop_65_and_over, pct_65_and_over)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\n# data for layers of interest\nacs_age_sex_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                            layer = \"X01_AGE_AND_SEX\")\n\nacs_age_sex_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                            layer = \"X01_AGE_AND_SEX\")\nacs_age_sex_py = acs_age_sex_py.rename(columns={'B01001e1' : 'total_pop_from_age_sex', \n                                                'B01002e1' : 'median_age',\n                                                'B01001e20' : 'pop_male_65_66',\n                                                'B01001e21' : 'pop_male_67_to_69',\n                                                'B01001e22' : 'pop_male_70_to_74',\n                                                'B01001e23' : 'pop_male_75_to_79',\n                                                'B01001e24' : 'pop_male_80_to_84',\n                                                'B01001e25' : 'pop_male_85_and_over',\n                                                'B01001e44' : 'pop_female_65_66',\n                                                'B01001e45' : 'pop_female_67_to_69',\n                                                'B01001e46' : 'pop_female_70_to_74',\n                                                'B01001e47' : 'pop_female_75_to_79',\n                                                'B01001e48' : 'pop_female_80_to_84',\n                                                'B01001e49' : 'pop_female_85_and_over'})\nacs_age_sex_py['pop_65_and_over'] = acs_age_sex_py['pop_male_65_66'] + acs_age_sex_py['pop_male_67_to_69'] + acs_age_sex_py['pop_male_70_to_74'] + acs_age_sex_py['pop_male_75_to_79'] + acs_age_sex_py['pop_male_80_to_84'] + acs_age_sex_py['pop_male_85_and_over'] + acs_age_sex_py['pop_female_65_66'] + acs_age_sex_py['pop_female_67_to_69'] + acs_age_sex_py['pop_female_70_to_74'] + acs_age_sex_py['pop_female_75_to_79'] + acs_age_sex_py['pop_female_80_to_84'] + acs_age_sex_py['pop_female_85_and_over']\nacs_age_sex_py['pct_65_and_over'] = (acs_age_sex_py['pop_65_and_over'] / acs_age_sex_py['total_pop_from_age_sex']) * 100\nacs_age_sex_py = acs_age_sex_py[['GEOID', 'total_pop_from_age_sex', 'pop_65_and_over', 'pct_65_and_over']]\n```\n:::\n\n:::\n\n#### Race layer\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\nacs_race <- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\",\n                      layer = \"X02_RACE\")\nacs_race_df <- acs_race %>%\n  select(GEOID) %>%\n  mutate(total_pop_from_race = acs_race$B02001e1,\n         pop_white = acs_race$B02001e2,\n         pct_white = (pop_white / total_pop_from_race) * 100,\n         pop_black = acs_race$B02001e3,\n         pct_black = (pop_black / total_pop_from_race) * 100,\n         pop_am_native = acs_race$B02001e4,\n         pct_am_native = (pop_am_native / total_pop_from_race) * 100,\n         pop_asian = acs_race$B02001e5,\n         pct_asian = (pop_asian / total_pop_from_race) * 100)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\nacs_race_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                         layer = \"X02_RACE\")\nacs_race_py = acs_race_py.rename(columns={'B02001e1' : 'total_pop_from_race',\n                                          'B02001e2' : 'pop_white'})\nacs_race_py['pct_white'] = (acs_race_py['pop_white'] / acs_race_py['total_pop_from_race']) * 100\nacs_race_py['pop_black'] = acs_race_py['B02001e3']\nacs_race_py['pct_black'] = (acs_race_py['pop_black'] / acs_race_py['total_pop_from_race']) * 100\nacs_race_py['pop_am_native'] = acs_race_py['B02001e4']\nacs_race_py['pct_am_native'] = (acs_race_py['pop_am_native'] / acs_race_py['total_pop_from_race']) * 100\nacs_race_py['pop_asian'] = acs_race_py['B02001e5']\nacs_race_py['pct_asian'] = (acs_race_py['pop_asian'] / acs_race_py['total_pop_from_race']) * 100\nacs_race_py = acs_race_py[['GEOID', 'total_pop_from_race', 'pop_white', 'pct_white', 'pop_black', 'pct_black', 'pop_am_native', 'pct_am_native', 'pop_asian', 'pct_asian']]\n```\n:::\n\n:::\n\n#### Hispanic latino layer\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\nacs_hispanic_latino <- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\",\n                      layer = \"X03_HISPANIC_OR_LATINO_ORIGIN\")\nacs_hispanic_latino_df <- acs_hispanic_latino %>%\n  select(GEOID) %>%\n  mutate(total_pop_from_hispanic = acs_hispanic_latino$B03002e1,\n         pop_hispanic_latino = acs_hispanic_latino$B03002e12,\n         pct_hispanic_latino = (pop_hispanic_latino / total_pop_from_hispanic) * 100)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\nacs_hispanic_latino_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                                    layer = \"X03_HISPANIC_OR_LATINO_ORIGIN\")\nacs_hispanic_latino_py['total_pop_from_hispanic'] = acs_hispanic_latino_py['B03002e1']\nacs_hispanic_latino_py['pop_hispanic_latino'] = acs_hispanic_latino_py['B03002e12']\nacs_hispanic_latino_py['pct_hispanic_latino'] = (acs_hispanic_latino_py['pop_hispanic_latino'] / acs_hispanic_latino_py['total_pop_from_hispanic']) * 100\nacs_hispanic_latino_py = acs_hispanic_latino_py[['GEOID', 'total_pop_from_hispanic', 'pop_hispanic_latino', 'pct_hispanic_latino']]\n```\n:::\n\n:::\n\n#### Children and household relationship\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\nacs_children_household <- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\",\n                      layer = \"X09_CHILDREN_HOUSEHOLD_RELATIONSHIP\")\nacs_children_household_df <- acs_children_household %>%\n  select(GEOID) %>%\n  mutate(pop_children_under_18 = acs_children_household$B09002e1,\n         pct_children_under_18 = (pop_children_under_18 / acs_hispanic_latino$B03002e1) * 100)\n# the children_household_relationship layer did not contain a total populaiton field\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\nacs_children_household_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                                       layer = \"X09_CHILDREN_HOUSEHOLD_RELATIONSHIP\")\nacs_children_household_py['pop_children_under_18'] = acs_children_household_py['B09002e1']\nacs_children_household_py['pct_children_under_18'] = (acs_children_household_py['pop_children_under_18'] / acs_hispanic_latino_py['total_pop_from_hispanic']) * 100\nacs_children_household_py = acs_children_household_py[['GEOID', 'pop_children_under_18', 'pct_children_under_18']]\n# the children_household_relationship layer did not contain a total populaiton field\n```\n:::\n\n:::\n\n#### Poverty layer\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\nacs_poverty <- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\",\n                       layer = \"X17_POVERTY\")\nacs_poverty_df <- acs_poverty %>%\n  select(GEOID) %>%\n  mutate(total_households = acs_poverty$B17017e1,\n         num_households_below_poverty = acs_poverty$B17017e2,\n         pct_households_below_poverty = (num_households_below_poverty / total_households) * 100)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code}\nacs_poverty_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                            layer = \"X17_POVERTY\")\nacs_poverty_py['total_households'] = acs_poverty_py['B17017e1']\nacs_poverty_py['num_households_below_poverty'] = acs_poverty_py['B17017e2']\nacs_poverty_py['pct_households_below_poverty'] = (acs_poverty_py['num_households_below_poverty'] / acs_poverty_py['total_households']) * 100\nacs_poverty_py = acs_poverty_py[['GEOID', 'total_households', 'num_households_below_poverty', 'pct_households_below_poverty']]\n```\n:::\n\n:::\n\n#### Income layer\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\nacs_income <- st_read(\"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb\",\n                      layer = \"X19_INCOME\")\n\nacs_income_df <- acs_income %>%\n  select(GEOID) %>%\n  mutate(median_income = acs_income$B19013e1)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nacs_income_py = gpd.read_file('data/ACS_2019_5YR_TRACT_48_TEXAS.gdb',\n                           layer = \"X19_INCOME\")\nacs_income_py['median_income'] = acs_income_py['B19013e1']\nacs_income_py = acs_income_py[['GEOID', 'median_income']]\n```\n:::\n\n:::\n\n#### Join census track data\n\nNext, the selected race, age, and income layers are joined. The resulting data set contains the geometry of each census tract and corresponding socioeconomic data.\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\ncensus_tract_data <- acs_geoms %>%\n  left_join(acs_age_sex_df, by = c(\"GEOID_Data\" = \"GEOID\")) %>%\n  left_join(acs_race_df, by = c(\"GEOID_Data\" = \"GEOID\")) %>%\n  left_join(acs_hispanic_latino_df, by = c(\"GEOID_Data\" = \"GEOID\")) %>%\n  left_join(acs_children_household_df, by = c(\"GEOID_Data\" = \"GEOID\")) %>%\n  left_join(acs_poverty_df, by = c(\"GEOID_Data\" = \"GEOID\")) %>%\n  left_join(acs_income_df, by = c(\"GEOID_Data\" = \"GEOID\")) %>%\n  rename(total_population = total_pop_from_age_sex) %>%\n  select(-c(total_pop_from_race, total_pop_from_hispanic))\n\ncensus_tract_data_3083 <- st_transform(census_tract_data, 3083)\ncensus_tract_data_4326 <- st_transform(census_tract_data_3083, crs = 4326)\n\ncensus_tract_data_roi_4326 <- st_crop(census_tract_data_4326, roi_sfc)\ncensus_tract_data_roi_3083 <- st_transform(census_tract_data_roi_4326, crs = 3083)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\n# join data layers to census tract geometry\ncensus_tract_data_py = acs_geoms_py_3083 = acs_geoms_py.to_crs(3083).copy()\ncensus_tract_data_py = census_tract_data_py.merge(acs_age_sex_py, how='left', left_on='GEOID_Data', right_on='GEOID')\ncensus_tract_data_py = census_tract_data_py.merge(acs_race_py, how='left', left_on='GEOID_Data', right_on='GEOID')\ncensus_tract_data_py = census_tract_data_py.drop(columns=['GEOID_x', 'GEOID_y'])\ncensus_tract_data_py = census_tract_data_py.merge(acs_hispanic_latino_py, how='left', left_on='GEOID_Data', right_on='GEOID')\ncensus_tract_data_py = census_tract_data_py.merge(acs_children_household_py, how='left', left_on='GEOID_Data', right_on='GEOID')\ncensus_tract_data_py = census_tract_data_py.drop(columns=['GEOID_x', 'GEOID_y'])\ncensus_tract_data_py = census_tract_data_py.merge(acs_poverty_py, how='left', left_on='GEOID_Data', right_on='GEOID')\ncensus_tract_data_py = census_tract_data_py.merge(acs_income_py, how='left', left_on='GEOID_Data', right_on='GEOID')\ncensus_tract_data_py = census_tract_data_py.drop(columns=['GEOID_x', 'GEOID_y'])\n```\n:::\n\n:::\n\n## Create blackout mask\n\nAn array was created to represent the difference in night light intensity by subtracting the post-storm imagery from the pre-storm imagery. Next, a blackout threshold is created to identify areas where night light intensity decreased by more than 200 nW cm-2 sr-1. For this analysis, differences in night light intensity are assumed to be caused by the power outages. Areas where the change in light intensity met the threshold were converted to vector format and the highway buffer area was removed.\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\ndifference <- feb7_roi - feb16_roi\nthreshold <- 200\n\nblackout_threshold <- difference\nblackout_threshold[blackout_threshold <= threshold] = NA # not a blackout area\nblackout_threshold[blackout_threshold > threshold] = TRUE # a blackout area\n\n# vectorize the blackout mask\nblackout_threshold_vector <- st_as_sf(blackout_threshold)\nblackout_threshold_vector <- st_make_valid(blackout_threshold_vector)\n\n# remove the highway buffer from our vectorized blackout mask using st_difference()\nblackout_mask <- st_difference(blackout_threshold_vector, highways_buffer_4326)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\ndifference_py = feb7_roi_py - feb16_roi_py\nthreshold_py = 200\nblackout_threshold_py = np.where(difference_py <= threshold_py, 0, 1)\nblackout_threshold_dataset = rasterio.io.MemoryFile().open(**profile)\nblackout_threshold_dataset.write(blackout_threshold_py)\nblackout_threshold_data_py = blackout_threshold_dataset.read(1).astype('int16')\n\n# get shapes as GeoJSON-like objects\nshapes_gen = shapes(blackout_threshold_data_py, transform=blackout_threshold_dataset.transform, mask = blackout_threshold_data_py != 0)\n# convert shapes to Shapely geometries\ngeometries = [shape(shape_json) for shape_json, _ in shapes_gen]\n\n# create a GeoDataFrame from Shapely geometries\nblackout_threshold_vector_py = gpd.GeoDataFrame(geometry=geometries, crs=blackout_threshold_dataset.crs)\nblackout_threshold_vector_3083_py = blackout_threshold_vector_py.to_crs(3083)\nblackout_mask_3083_py = gpd.overlay(blackout_threshold_vector_3083_py, highway_buffer_3083_py, how='difference')\n```\n:::\n\n:::\n\n\n\n\n\n## Visualize\n\nxx\n\n## Identify houses without power\n\nHouses that lost electricity were identified based on a spatial intersection of the building data and the blackout mask. In this analysis, houses that did not overlap the blackout mask were identified as not losing power (or had power restored by February 16th).\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# use spatial subsetting to find all the residential buildings in blackout areas\nblackout_mask_3083 <- st_transform(blackout_mask, crs = 3083)\nblackout_buildings_3083 <- buildings_3083[blackout_mask_3083, op = st_intersects]\n\nnumber_of_buildings_without_power <- nrow(blackout_buildings_3083)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nblackout_buildings_3083_py = gpd.sjoin(buildings_3083_py, blackout_mask_3083_py, how='inner', op='intersects')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nsys:1: FutureWarning: The `op` parameter is deprecated and will be removed in a future release. Please use the `predicate` parameter instead.\n```\n:::\n\n```{.python .cell-code .code-overflow-wrap}\nblackout_buildings_3083_py = blackout_buildings_3083_py.drop_duplicates(subset=['osm_id'])\nblackout_buildings_3083_py = blackout_buildings_3083_py.drop(columns=['index_right'])\n```\n:::\n\n:::\n\nBased on this analysis, an estimated 144,317 houses in the Houston metropolitan area were without power on February 16, 2021.\n\n## Aggregate residential building outages to census tract level\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# use a spatial join to attach the census tract data to the building data\nblackout_buildings_census_3083 <- st_join(blackout_buildings_3083, census_tract_data_3083) %>%\n  mutate(blackout_status = \"lost power\")\n\n# residential houses that did not lose power\nno_blackout_buildings_3083 <- setdiff(buildings_3083, blackout_buildings_3083)\nno_blackout_buildings_census_3083 <- st_join(no_blackout_buildings_3083, census_tract_data_3083) %>%\n  mutate(blackout_status = \"did not lose power\")\n\nall_building_data_3083 <- rbind(blackout_buildings_census_3083, no_blackout_buildings_census_3083)\n\ncounts_of_lost_power_by_census_tract <- all_building_data_3083 %>%\n  st_drop_geometry() %>%\n  group_by(GEOID_Data, blackout_status) %>%\n  summarise(count = n()) %>%\n  pivot_wider(names_from = blackout_status, values_from = count, values_fill = 0) %>%\n  rename(num_houses_did_not_lose_power = \"did not lose power\",\n         num_houses_lost_power = \"lost power\") %>%\n  mutate(pct_houses_that_lost_power = (num_houses_lost_power / (num_houses_did_not_lose_power + num_houses_lost_power)) * 100)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'GEOID_Data'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code .code-overflow-wrap}\ncensus_tract_blackout_data <- left_join(census_tract_data_roi_4326, counts_of_lost_power_by_census_tract, by = \"GEOID_Data\") %>% \n  st_drop_geometry()\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nblackout_buildings_census_3083_py = gpd.sjoin(blackout_buildings_3083_py, census_tract_data_py)\nblackout_buildings_census_3083_py['blackout_status'] = 'lost power'\n\nno_blackout_buildings_3083_py = buildings_3083_py[~buildings_3083_py['osm_id'].isin(blackout_buildings_3083_py['osm_id'])]\n\nno_blackout_buildings_census_3083_py = gpd.sjoin(no_blackout_buildings_3083_py, census_tract_data_py)\nno_blackout_buildings_census_3083_py['blackout_status'] = 'did not lost power'\n\nall_building_data_3083_py = pd.concat([blackout_buildings_census_3083_py, no_blackout_buildings_census_3083_py], axis=0)\n\ncounts_of_lost_power_by_census_tract_py = all_building_data_3083_py.copy()\ncounts_of_lost_power_by_census_tract_py = counts_of_lost_power_by_census_tract_py[['GEOID_Data', 'blackout_status']]\ncounts_of_lost_power_by_census_tract_py = pd.pivot_table(counts_of_lost_power_by_census_tract_py, index='GEOID_Data', columns='blackout_status', aggfunc=len, fill_value=0)\ncounts_of_lost_power_by_census_tract_py.columns = ['num_houses_did_not_lose_power', 'num_houses_lost_power']\ncounts_of_lost_power_by_census_tract_py.reset_index(inplace=True)\n\ncensus_tract_blackout_data_py = pd.merge(census_tract_data_py, counts_of_lost_power_by_census_tract_py, how='inner', on='GEOID_Data')\ncensus_tract_blackout_data_py['pct_houses_that_lost_power'] = (census_tract_blackout_data_py['num_houses_lost_power'] / (census_tract_blackout_data_py['num_houses_did_not_lose_power'] + census_tract_blackout_data_py['num_houses_lost_power'])) * 100\n```\n:::\n\n:::\n\n# Statistical Analysis\n\nLinear regression was used to model the relationship between percent of houses that lost power and selected data from the U.S. Census Bureau's American Community Survey (ACS). All data are aggregated to the census tract level.\n\n\n\n\n\n\n\n## Race\n\n### Percent white\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# linear regression model\nmodel_pct_white <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_white)\n\n#plot\nplot_model_pct_white <- ggplot(data = census_tract_blackout_data, aes(x = pct_white, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% white\", y = \"% of houses that lost power\")\nplot_model_pct_white\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population white in census tract](index_files/figure-html/unnamed-chunk-44-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_white <- summary(model_pct_white)\n\n# extract model coefficients\nslope_coef_white <- round(summary_model_pct_white$coefficients[\"pct_white\", \"Estimate\"], digits = 3)\n\nstd_err_white <- round(summary_model_pct_white$coefficients[\"pct_white\", \"Std. Error\"], digits = 3)\n\np_value_white <- format(summary_model_pct_white$coefficients[\"pct_white\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_white <- round(confint(model_pct_white, level = 0.95)[2, 1], digits = 3)\nci_95_upper_white <- round(confint(model_pct_white, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_white <- round(summary_model_pct_white$r.squared, digits = 3)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_white_py = ols('pct_houses_that_lost_power ~ pct_white', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_white', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% white')\nplt.ylabel('% of houses that lost power')\nplt.suptitle('Percent of houses that lost power vs. percent population white in census tract', y=0, ha='center')\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population white in census tract](index_files/figure-html/unnamed-chunk-46-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_white_py = round(model_pct_white_py.params[1], 3)\n\nstd_err_white_py = round(model_pct_white_py.bse[1], 3)\n\np_value_white_py = model_pct_white_py.pvalues[1]\np_value_white_py = f\"{p_value_white_py:.6f}\"\n\nci_95_lower_white_py = round(model_pct_white_py.conf_int(alpha=0.05)[0][1], 3)\n\nci_95_upper_white_py = round(model_pct_white_py.conf_int(alpha=0.05)[1][1], 3)\n\nr_sqrd_white_py = round(model_pct_white_py.rsquared, 3)\n```\n:::\n\n\n:::\n\n### Percent black\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# linear regression model\nmodel_pct_black <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_black)\n\n# plot\nplot_model_pct_black <- ggplot(data = census_tract_blackout_data, aes(x = pct_black, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% black\", y = \"% of houses that lost power\")\nplot_model_pct_black\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population black in census tract](index_files/figure-html/unnamed-chunk-48-3.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_black <- summary(model_pct_black)\n\n# extract model coefficients\nslope_coef_black <- round(summary_model_pct_black$coefficients[\"pct_black\", \"Estimate\"], digits = 3)\n\nstd_err_black <- round(summary_model_pct_black$coefficients[\"pct_black\", \"Std. Error\"], digits = 3)\n\np_value_black <- format(summary_model_pct_black$coefficients[\"pct_black\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_black <- round(confint(model_pct_black, level = 0.95)[2, 1], digits = 3)\nci_95_upper_black <- round(confint(model_pct_black, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_black <- round(summary_model_pct_black$r.squared, digits = 3)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_black_py = ols('pct_houses_that_lost_power ~ pct_black', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_black', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% black')\nplt.ylabel('% of houses that lost power')\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population black in census tract](index_files/figure-html/unnamed-chunk-50-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_black_py = round(model_pct_black_py.params[1], 3)\nstd_err_black_py = round(model_pct_black_py.bse[1], 3)\np_value_black_py = model_pct_black_py.pvalues[1]\nci_95_lower_black_py = round(model_pct_black_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_black_py = round(model_pct_black_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_black_py = round(model_pct_black_py.rsquared, 3)\n```\n:::\n\n:::\n\n### Percent native american\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# linear regression model\nmodel_pct_am_native <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_am_native)\n\n# plot\nplot_model_pct_am_native <- ggplot(data = census_tract_blackout_data, aes(x = pct_am_native, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% native american\", y = \"% of houses that lost power\")\nplot_model_pct_am_native\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population native american in census tract](index_files/figure-html/unnamed-chunk-52-3.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_am_native <- summary(model_pct_am_native)\n\n# extract model coefficients\nslope_coef_am_native <- round(summary_model_pct_am_native$coefficients[\"pct_am_native\", \"Estimate\"], digits = 3)\n\nstd_err_am_native <- round(summary_model_pct_am_native$coefficients[\"pct_am_native\", \"Std. Error\"], digits = 3)\n\np_value_am_native <- format(summary_model_pct_am_native$coefficients[\"pct_am_native\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_am_native <- round(confint(model_pct_am_native, level = 0.95)[2, 1], digits = 3)\nci_95_upper_am_native <- round(confint(model_pct_am_native, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_am_native <- round(summary_model_pct_am_native$r.squared, digits = 3)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_am_native_py = ols('pct_houses_that_lost_power ~ pct_am_native', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_am_native', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% am_native')\nplt.ylabel('% of houses that lost power')\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population native american in census tract](index_files/figure-html/unnamed-chunk-54-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_am_native_py = round(model_pct_am_native_py.params[1], 3)\nstd_err_am_native_py = round(model_pct_am_native_py.bse[1], 3)\np_value_am_native_py = model_pct_am_native_py.pvalues[1]\nci_95_lower_am_native_py = round(model_pct_am_native_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_am_native_py = round(model_pct_am_native_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_am_native_py = round(model_pct_am_native_py.rsquared, 3)\n```\n:::\n\n:::\n\n### Percent asian\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# linear regression model\nmodel_pct_asian <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_asian)\n\n# plot\nplot_model_pct_asian <- ggplot(data = census_tract_blackout_data, aes(x = pct_asian, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% asian\", y = \"% of houses that lost power\")\nplot_model_pct_asian\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population asian in census tract](index_files/figure-html/unnamed-chunk-56-3.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_asian <- summary(model_pct_asian)\n\n# extract model coefficients\nslope_coef_asian <- round(summary_model_pct_asian$coefficients[\"pct_asian\", \"Estimate\"], digits = 3)\n\nstd_err_asian <- round(summary_model_pct_asian$coefficients[\"pct_asian\", \"Std. Error\"], digits = 3)\n\np_value_asian <- format(summary_model_pct_asian$coefficients[\"pct_asian\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_asian <- round(confint(model_pct_asian, level = 0.95)[2, 1], digits = 3)\nci_95_upper_asian <- round(confint(model_pct_asian, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_asian <- round(summary_model_pct_asian$r.squared, digits = 3)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_asian_py = ols('pct_houses_that_lost_power ~ pct_asian', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_asian', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% asian')\nplt.ylabel('% of houses that lost power')\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population asian in census tract](index_files/figure-html/unnamed-chunk-58-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_asian_py = round(model_pct_asian_py.params[1], 3)\nstd_err_asian_py = round(model_pct_asian_py.bse[1], 3)\np_value_asian_py = model_pct_asian_py.pvalues[1]\nci_95_lower_asian_py = round(model_pct_asian_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_asian_py = round(model_pct_asian_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_asian_py = round(model_pct_asian_py.rsquared, 3)\n```\n:::\n\n:::\n\n### Percent hispanic / latino\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap}\n# linear regression model\nmodel_pct_hispanic_latino <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_hispanic_latino)\n\n# plot\nplot_model_pct_hispanic_latino <- ggplot(data = census_tract_blackout_data, aes(x = pct_hispanic_latino, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% hispanic / latino\", y = \"% of houses that lost power\")\nplot_model_pct_hispanic_latino\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population hispanic / latino in census tract](index_files/figure-html/unnamed-chunk-60-3.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_hispanic_latino <- summary(model_pct_hispanic_latino)\n\n# extract model coefficients\nslope_coef_hispanic_latino <- round(summary_model_pct_hispanic_latino$coefficients[\"pct_hispanic_latino\", \"Estimate\"], digits = 3)\n\nstd_err_hispanic_latino <- round(summary_model_pct_hispanic_latino$coefficients[\"pct_hispanic_latino\", \"Std. Error\"], digits = 3)\n\np_value_hispanic_latino <- format(summary_model_pct_hispanic_latino$coefficients[\"pct_hispanic_latino\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_hispanic_latino <- round(confint(model_pct_hispanic_latino, level = 0.95)[2, 1], digits = 3)\nci_95_upper_hispanic_latino <- round(confint(model_pct_hispanic_latino, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_hispanic_latino <- round(summary_model_pct_hispanic_latino$r.squared, digits = 3)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_hispanic_latino_py = ols('pct_houses_that_lost_power ~ pct_hispanic_latino', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_hispanic_latino', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% hispanic_latino')\nplt.ylabel('% of houses that lost power')\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population hispanic / latino in census tract](index_files/figure-html/unnamed-chunk-62-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_hispanic_latino_py = round(model_pct_hispanic_latino_py.params[1], 3)\nstd_err_hispanic_latino_py = round(model_pct_hispanic_latino_py.bse[1], 3)\np_value_hispanic_latino_py = model_pct_hispanic_latino_py.pvalues[1]\nci_95_lower_hispanic_latino_py = round(model_pct_hispanic_latino_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_hispanic_latino_py = round(model_pct_hispanic_latino_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_hispanic_latino_py = round(model_pct_hispanic_latino_py.rsquared, 3)\n```\n:::\n\n:::\n\n### Race summary plots\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmodel_plots_race <- (plot_model_pct_white | plot_model_pct_black | plot_model_pct_am_native) / \n  (plot_model_pct_asian | plot_model_pct_hispanic_latino | plot_spacer()) +\n  plot_annotation(title = \"Lineral Regression Models of Power Outages vs. Race\")\n\nmodel_plots_race\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing non-finite values (`stat_smooth()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing non-finite values (`stat_smooth()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing non-finite values (`stat_smooth()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing non-finite values (`stat_smooth()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing non-finite values (`stat_smooth()`).\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Removed 41 rows containing missing values (`geom_point()`).\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-64-3.png){width=672}\n:::\n:::\n\n\n## Age\n\n### Percent 65 and older\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-margin}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"false\"}\n# linear regression model\nmodel_pct_65_and_over <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_65_and_over)\n\n# plot\nplot_model_pct_65_and_over <- ggplot(data = census_tract_blackout_data, aes(x = pct_65_and_over, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% 65 and older\", y = \"% of houses that lost power\")\nplot_model_pct_65_and_over\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population age 65 and older in census tract](index_files/figure-html/unnamed-chunk-65-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_65_and_over <- summary(model_pct_65_and_over)\n\n# extract model coefficients\nslope_coef_pct_65_and_over <- round(summary_model_pct_65_and_over$coefficients[\"pct_65_and_over\", \"Estimate\"], digits = 3)\n\nstd_err_pct_65_and_over <- round(summary_model_pct_65_and_over$coefficients[\"pct_65_and_over\", \"Std. Error\"], digits = 3)\n\np_value_pct_65_and_over <- format(summary_model_pct_65_and_over$coefficients[\"pct_65_and_over\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_pct_65_and_over <- round(confint(model_pct_65_and_over, level = 0.95)[2, 1], digits = 3)\nci_95_upper_pct_65_and_over <- round(confint(model_pct_65_and_over, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_65_and_over <- round(summary_model_pct_65_and_over$r.squared, digits = 3)\n```\n:::\n\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_65_and_over_py = ols('pct_houses_that_lost_power ~ pct_65_and_over', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_65_and_over', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% 65 and over')\nplt.ylabel('% of houses that lost power')   \n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population age 65 and older in census tract](index_files/figure-html/unnamed-chunk-67-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_pct_65_and_over_py = round(model_pct_65_and_over_py.params[1], 3)\nstd_err_pct_65_and_over_py = round(model_pct_65_and_over_py.bse[1], 3)\np_value_pct_65_and_over_py = model_pct_65_and_over_py.pvalues[1]\nci_95_lower_pct_65_and_over_py = round(model_pct_65_and_over_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_pct_65_and_over_py = round(model_pct_65_and_over_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_pct_65_and_over_py = round(model_pct_65_and_over_py.rsquared, 3)\n```\n:::\n\n\n:::\n\n### Percent children under 18\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-margin}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"false\"}\n# linear regression model\nmodel_pct_children_under_18 <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_children_under_18)\n\n# plot\nplot_model_pct_children_under_18 <- ggplot(data = census_tract_blackout_data, aes(x = pct_children_under_18, y = pct_houses_that_lost_power)) +\n  geom_point() +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% children under 18\", y = \"% of houses that lost power\")\nplot_model_pct_children_under_18\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population children under 18 in census tract](index_files/figure-html/unnamed-chunk-69-3.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_children_under_18 <- summary(model_pct_children_under_18)\n\n# extract model coefficients\nslope_coef_children_under_18 <- round(summary_model_pct_children_under_18$coefficients[\"pct_children_under_18\", \"Estimate\"], digits = 3)\n\nstd_err_children_under_18 <- round(summary_model_pct_children_under_18$coefficients[\"pct_children_under_18\", \"Std. Error\"], digits = 3)\n\np_value_children_under_18 <- format(summary_model_pct_children_under_18$coefficients[\"pct_children_under_18\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_children_under_18 <- round(confint(model_pct_children_under_18, level = 0.95)[2, 1], digits = 3)\nci_95_upper_children_under_18 <- round(confint(model_pct_children_under_18, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_children_under_18 <- round(summary_model_pct_children_under_18$r.squared, digits = 3)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_children_under_18_py = ols('pct_houses_that_lost_power ~ pct_children_under_18', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_children_under_18', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% children under 18')\nplt.ylabel('% of houses that lost power')   \n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population children under 18 in census tract](index_files/figure-html/unnamed-chunk-71-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_children_under_18_py = round(model_pct_children_under_18_py.params[1], 3)\nstd_err_children_under_18_py = round(model_pct_children_under_18_py.bse[1], 3)\np_value_children_under_18_py = model_pct_children_under_18_py.pvalues[1]\nci_95_lower_children_under_18_py = round(model_pct_children_under_18_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_children_under_18_py = round(model_pct_children_under_18_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_children_under_18_py = round(model_pct_children_under_18_py.rsquared, 3)\n```\n:::\n\n\n:::\n\n### Age summary plots\n\n\n::: {.cell .column-screen-right}\n\n```{.r .cell-code .code-overflow-wrap}\nmodel_plots_age <- (plot_model_pct_65_and_over | plot_model_pct_children_under_18) +\n  plot_annotation(title = \"Lineral Regression Models of Power Outages vs. Age\")\n\nmodel_plots_age\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-73-3.png){width=960}\n:::\n:::\n\n\n## Income\n\n### Percent households below poverty\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-margin}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"false\"}\n# linear regression model\nmodel_pct_households_below_poverty <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ pct_households_below_poverty)\n\n# plot\nplot_model_pct_households_below_poverty <- ggplot(data = census_tract_blackout_data, aes(x = pct_households_below_poverty, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"% households below poverty\", y = \"% of houses that lost power\")\nplot_model_pct_households_below_poverty\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population of household below the poverty level in census tract](index_files/figure-html/unnamed-chunk-74-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_pct_households_below_poverty <- summary(model_pct_households_below_poverty)\n\n# extract model coefficients\nslope_coef_households_below_poverty <- round(summary_model_pct_households_below_poverty$coefficients[\"pct_households_below_poverty\", \"Estimate\"], digits = 3)\n\nstd_err_households_below_poverty <- round(summary_model_pct_households_below_poverty$coefficients[\"pct_households_below_poverty\", \"Std. Error\"], digits = 3)\n\np_value_households_below_poverty <- format(summary_model_pct_households_below_poverty$coefficients[\"pct_households_below_poverty\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_households_below_poverty <- round(confint(model_pct_households_below_poverty, level = 0.95)[2, 1], digits = 3)\nci_95_upper_households_below_poverty <- round(confint(model_pct_households_below_poverty, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_households_below_poverty <- round(summary_model_pct_households_below_poverty$r.squared, digits = 3)\n```\n:::\n\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_households_below_poverty_py = ols('pct_houses_that_lost_power ~ pct_households_below_poverty', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'pct_households_below_poverty', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('% households below poverty')\nplt.ylabel('% of houses that lost power')  \n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. percent population of household below the poverty level in census tract](index_files/figure-html/unnamed-chunk-76-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_households_below_poverty_py = round(model_pct_households_below_poverty_py.params[1], 3)\nstd_err_households_below_poverty_py = round(model_pct_households_below_poverty_py.bse[1], 3)\np_value_households_below_poverty_py = model_pct_households_below_poverty_py.pvalues[1]\nci_95_lower_households_below_poverty_py = round(model_pct_households_below_poverty_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_households_below_poverty_py = round(model_pct_households_below_poverty_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_households_below_poverty_py = round(model_pct_households_below_poverty_py.rsquared, 3)\n```\n:::\n\n\n:::\n\n### Median income\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell .column-margin}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"false\"}\n# linear regression model\nmodel_median_income <- lm(data = census_tract_blackout_data, pct_houses_that_lost_power ~ median_income)\n\n# plot\nplot_model_median_income <- ggplot(data = census_tract_blackout_data, aes(x = median_income, y = pct_houses_that_lost_power)) +\n  geom_point(size = 0.5) +\n  geom_smooth(method = lm, formula = y~x, se = FALSE) +\n  theme_classic() +\n  labs(x = \"median income\", y = \"% of houses that lost power\")\nplot_model_median_income\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. median income in census tract](index_files/figure-html/unnamed-chunk-78-3.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# model summary\nsummary_model_median_income <- summary(model_median_income)\n\n# extract model coefficients\nslope_coef_median_income <- round(summary_model_median_income$coefficients[\"median_income\", \"Estimate\"], digits = 3)\n\nstd_err_median_income <- round(summary_model_median_income$coefficients[\"median_income\", \"Std. Error\"], digits = 3)\n\np_value_median_income <- format(summary_model_median_income$coefficients[\"median_income\", \"Pr(>|t|)\"], scientific = FALSE, digits = 2)\n\n# confidence intervals\nci_95_lower_median_income <- round(confint(model_median_income, level = 0.95)[2, 1], digits = 3)\nci_95_upper_median_income <- round(confint(model_median_income, level = 0.95)[2, 2], digits = 3)\n\n# r-squared value\nr_sqrd_median_income <- round(summary_model_median_income$r.squared, digits = 3)\n```\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap}\nmodel_pct_median_income_py = ols('pct_houses_that_lost_power ~ median_income', \n                         data = census_tract_blackout_data_py).fit()\n\nsns.regplot(x = 'median_income', y = 'pct_houses_that_lost_power',\n            data = census_tract_blackout_data_py, ci = None,\n           scatter_kws = {'s':1, 'color':'black'})\nplt.xlabel('median income')\nplt.ylabel('% of houses that lost power')\n```\n\n::: {.cell-output-display}\n![Percent of houses that lost power vs. median income in census tract](index_files/figure-html/unnamed-chunk-80-1.png){width=672}\n:::\n:::\n\n::: {.cell .column-page-right}\n\n```{.python .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code for model summary result values\"}\n# extract model coefficients\nslope_coef_median_income_py = round(model_pct_median_income_py.params[1], 3)\nstd_err_median_income_py = round(model_pct_median_income_py.bse[1], 3)\np_value_median_income_py = model_pct_median_income_py.pvalues[1]\nci_95_lower_median_income_py = round(model_pct_median_income_py.conf_int(alpha=0.05)[0][1], 3)\nci_95_upper_median_income_py = round(model_pct_median_income_py.conf_int(alpha=0.05)[1][1], 3)\nr_sqrd_median_income_py = round(model_pct_median_income_py.rsquared, 3)\n```\n:::\n\n\n:::\n\n### Income summary plots\n\n\n::: {.cell .column-screen-right}\n\n```{.r .cell-code .code-overflow-wrap}\nmodel_plots_income <- (plot_model_pct_households_below_poverty | plot_model_median_income) +\n  plot_annotation(title = \"Lineral Regression Models of Power Outages vs. Income\")\n\nmodel_plots_income\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-82-3.png){width=960}\n:::\n:::\n\n\n# Results\n\nBased on the results of the linear regression models, there is a statistically significant relationship at the 5 % level between percent of houses that lost power and the following variables:\n\n-   percent of population white\n-   percent of population black\n-   percent of population hispanic / latino\n-   percent of population age 65 and older\n-   percent of population children under age 18\n-   percent of households below the poverty level\n\nOf the significant variables, black; hispanic / latino; children under 18; and poverty were positively correlated with residential power outages. Significant variables that were negatively correlated with residential power outages included white and age 65 and older.\n\nFor each model with statistically significant results (ie. p-value \\< 0.05) we reject the null hypothesis that the socioeconomic variable had no influence on percentage of houses without electricity in each census tract at the 5% level. In other words, the slope coefficient is significantly different from zero. Each slope coefficient represents the change in percent of houses that lost power for a one unit increase in the socioeconomic variable. To use the percent white model as an example, for each one unit increase in percent of census population that is white, the percent of census level residential power outages decreases by 0.168. For the percent white model, the 95% confidence interval for the slope coefficient ranges from -0.251 to -0.085. This means that there is a 95% change that this interval includes the true census level rate of change for percent residential power outages for each one unit change in percent of population that is white.\n\n\n\n\n\nThe r-squared terms represent the variance in percent of houses without power that can be explained by the socioeconomic variable. The r-squared values ranged from 0% for the asian model to 2.9% for the age 65 and older model.\n\nThe results of the linear models are summarized in the table below.\n\n\n::: {.cell .column-page-right}\n\n```{.r .cell-code .code-overflow-wrap  code-fold=\"true\" code-summary=\"Code to create summary table\"}\nmodel_summary_df <- data.frame(model_name = c(\"white\", \"black\", \"native american\", \"asian\", \"hispanic / latino\", \"65 and older\", \"children under 18\", \"poverty\", \"median income\"),\n                               slope_coef = c(slope_coef_white, slope_coef_black, slope_coef_am_native, slope_coef_asian, slope_coef_hispanic_latino, slope_coef_pct_65_and_over, slope_coef_children_under_18, slope_coef_households_below_poverty, slope_coef_median_income),\n                               std_err = c(std_err_white, std_err_black, std_err_am_native, std_err_asian, std_err_hispanic_latino, std_err_pct_65_and_over, std_err_children_under_18, std_err_households_below_poverty, std_err_median_income),\n                               p_value = c(p_value_white, p_value_black, p_value_am_native, p_value_asian, p_value_hispanic_latino, p_value_pct_65_and_over, p_value_children_under_18, p_value_households_below_poverty, p_value_median_income),\n                               ci_95_lower = c(paste(ci_95_lower_white, \"to\", ci_95_upper_white),\n                                               paste(ci_95_lower_black, \"to\", ci_95_upper_black),\n                                               paste(ci_95_lower_am_native, \"to\", ci_95_upper_am_native),\n                                               paste(ci_95_lower_asian, \"to\", ci_95_upper_asian),\n                                               paste(ci_95_lower_hispanic_latino, \"to\", ci_95_upper_hispanic_latino),\n                                               paste(ci_95_lower_pct_65_and_over, \"to\", ci_95_upper_pct_65_and_over),\n                                               paste(ci_95_lower_children_under_18, \"to\", ci_95_upper_children_under_18),\n                                               paste(ci_95_lower_households_below_poverty, \"to\", ci_95_upper_households_below_poverty),\n                                               paste(ci_95_lower_median_income, \"to\", ci_95_upper_median_income)),\n                               r_squared = c(r_sqrd_white, r_sqrd_black, r_sqrd_am_native, r_sqrd_asian, r_sqrd_hispanic_latino, r_sqrd_65_and_over, r_sqrd_children_under_18, r_sqrd_households_below_poverty, r_sqrd_median_income)) %>% \n  mutate(significance = case_when(\n    p_value < 0.05 ~ \"yes\",\n    p_value >= 0.05 ~ \"no\"))\n\nmodel_summary_table <- model_summary_df %>% \n  kable(col.names = c(\"model name\", \"slope coefficent\", \"standard error\", \"p-value\", \"95% confidence interval\", \"r-squared\", \"significant at 5% level\"),\n        caption = \"Summary of Model Results\") %>% \n  kable_paper()\nmodel_summary_table\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>Summary of Model Results</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> model name </th>\n   <th style=\"text-align:right;\"> slope coefficent </th>\n   <th style=\"text-align:right;\"> standard error </th>\n   <th style=\"text-align:left;\"> p-value </th>\n   <th style=\"text-align:left;\"> 95% confidence interval </th>\n   <th style=\"text-align:right;\"> r-squared </th>\n   <th style=\"text-align:left;\"> significant at 5% level </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> white </td>\n   <td style=\"text-align:right;\"> -0.168 </td>\n   <td style=\"text-align:right;\"> 0.042 </td>\n   <td style=\"text-align:left;\"> 0.000076 </td>\n   <td style=\"text-align:left;\"> -0.251 to -0.085 </td>\n   <td style=\"text-align:right;\"> 0.015 </td>\n   <td style=\"text-align:left;\"> yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> black </td>\n   <td style=\"text-align:right;\"> 0.167 </td>\n   <td style=\"text-align:right;\"> 0.048 </td>\n   <td style=\"text-align:left;\"> 0.00054 </td>\n   <td style=\"text-align:left;\"> 0.072 to 0.261 </td>\n   <td style=\"text-align:right;\"> 0.011 </td>\n   <td style=\"text-align:left;\"> yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> native american </td>\n   <td style=\"text-align:right;\"> 1.010 </td>\n   <td style=\"text-align:right;\"> 1.162 </td>\n   <td style=\"text-align:left;\"> 0.38 </td>\n   <td style=\"text-align:left;\"> -1.27 to 3.29 </td>\n   <td style=\"text-align:right;\"> 0.001 </td>\n   <td style=\"text-align:left;\"> no </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> asian </td>\n   <td style=\"text-align:right;\"> 0.057 </td>\n   <td style=\"text-align:right;\"> 0.104 </td>\n   <td style=\"text-align:left;\"> 0.58 </td>\n   <td style=\"text-align:left;\"> -0.147 to 0.261 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:left;\"> no </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> hispanic / latino </td>\n   <td style=\"text-align:right;\"> 0.104 </td>\n   <td style=\"text-align:right;\"> 0.037 </td>\n   <td style=\"text-align:left;\"> 0.0047 </td>\n   <td style=\"text-align:left;\"> 0.032 to 0.176 </td>\n   <td style=\"text-align:right;\"> 0.007 </td>\n   <td style=\"text-align:left;\"> yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> 65 and older </td>\n   <td style=\"text-align:right;\"> -0.902 </td>\n   <td style=\"text-align:right;\"> 0.159 </td>\n   <td style=\"text-align:left;\"> 0.000000019 </td>\n   <td style=\"text-align:left;\"> -1.214 to -0.589 </td>\n   <td style=\"text-align:right;\"> 0.029 </td>\n   <td style=\"text-align:left;\"> yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> children under 18 </td>\n   <td style=\"text-align:right;\"> 0.299 </td>\n   <td style=\"text-align:right;\"> 0.140 </td>\n   <td style=\"text-align:left;\"> 0.033 </td>\n   <td style=\"text-align:left;\"> 0.025 to 0.573 </td>\n   <td style=\"text-align:right;\"> 0.004 </td>\n   <td style=\"text-align:left;\"> yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> poverty </td>\n   <td style=\"text-align:right;\"> 0.215 </td>\n   <td style=\"text-align:right;\"> 0.084 </td>\n   <td style=\"text-align:left;\"> 0.011 </td>\n   <td style=\"text-align:left;\"> 0.05 to 0.38 </td>\n   <td style=\"text-align:right;\"> 0.006 </td>\n   <td style=\"text-align:left;\"> yes </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> median income </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:left;\"> 0.42 </td>\n   <td style=\"text-align:left;\"> 0 to 0 </td>\n   <td style=\"text-align:right;\"> 0.001 </td>\n   <td style=\"text-align:left;\"> no </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nThe figures below provide a visual comparison of each model result. The bold portion of the line represents the 90% confidence interval and the full line represents the 95% confidnece interval for each slope coefficent estimate.\n\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap}\nrace_model_summary <- plot_summs(model_pct_white, model_pct_black, model_pct_am_native, model_pct_asian, model_pct_hispanic_latino,\n           inner_ci_level = 0.9,\n           model.names = c(\"white\", \"black\", \"native american\", \"asian\", \"hispanic/latino\"))\nrace_model_summary\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-85-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nage_model_summary <-plot_summs(model_pct_65_and_over, model_pct_children_under_18,\n           inner_ci_level = 0.95,\n           model.names = c(\"over 65\", \"under 18\"))\nage_model_summary\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-86-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code .code-overflow-wrap}\nincome_model_summary <-plot_summs(model_pct_households_below_poverty, model_median_income,\n           inner_ci_level = 0.95,\n           model.names = c(\"poverty\", \"median income\"))\nincome_model_summary\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-87-1.png){width=672}\n:::\n:::\n\n\n# Conclusion\n\nThis analysis does not include any verification of power outage locations nor does it incorporate typical variations in nighttime lights. The intent of the statistical analysis is not to use sociodemographic variables as predictors of power outages, but rather provide insight into groups that were disproportionately affected. Further work could incorporate electric utility data to identify vulnerable power grid infrastructure and then recommend equitable asset management and capital improvement plans.\n\n# Additional maps\n\n# References\n\n[VIIRS Day/Night Band Sensor User Guide](https://viirsland.gsfc.nasa.gov/PDF/VIIRS_BlackMarble_UserGuide.pdf)\n\nPebesma E (2022). stars: Spatiotemporal Arrays, Raster and Vector Data Cubes. https://r-spatial.github.io/stars/, https://github.com/r-spatial/stars/.\n\n[Extreme Winter Weather Causes U.S. Blackouts](https://earthobservatory.nasa.gov/images/147941/extreme-winter-weather-causes-us-blackouts)\n\n::: panel-tabset\n## `<svg aria-label=\"R Project\" role=\"img\" viewBox=\"0 0 581 512\" style=\"height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>R Project</title><path d=\"M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z\"/></svg>`{=html} R\n\n\n::: {.cell}\n\n:::\n\n\n## `<svg aria-label=\"Python\" role=\"img\" viewBox=\"0 0 448 512\" style=\"height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;\"><title>Python</title><path d=\"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z\"/></svg>`{=html} Python\n\n\n::: {.cell}\n\n:::\n\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}