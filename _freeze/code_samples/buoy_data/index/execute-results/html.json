{
  "hash": "c2768321e591cc1439cc3503eb71f82c",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Buoy Data\"\ndescription: \"xxx\"\nauthor:\n  - name: Marie Rivers\n    url: https://marierivers.github.io/\n# date: 2022-04-03\ncategories: [Python, R, xx]\ncitation: \n  url: https://marierivers.github.io/code_samples/buoy_data/ \n# image: xx.png\ndraft: false\neditor: visual\ntoc-title: Contents\ntoc-location: left\ntoc-depth: 3\ncode-tools: \n  source: true\n  toggle: true\n  caption: view code\ncode-block-bg: true\n# code-block-border-left: \"#31BAE9\"\n---\n\n::: {.cell}\n\n:::\n\n\n\n\nThis analysis...\n\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\n# import Python packages\nimport pandas as pd\nimport numpy as np\nimport datetime\nimport time\nimport calendar\nimport netCDF4\nimport matplotlib.pyplot as plt\nimport matplotlib as mpl\nfrom matplotlib import gridspec\nfrom matplotlib import cm\n```\n:::\n\n\n\n\n# Read data and metadata\n\n\n\n\n::: {.cell}\n\n```{.python .cell-code}\nstn = '071'\n# CDIP Archived Dataset URL\ndata_url = 'http://thredds.cdip.ucsd.edu/thredds/dodsC/cdip/archive/' + stn + 'p1/' + stn + 'p1_historic.nc'\ndata = netCDF4.Dataset(data_url)\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\ndata\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<class 'netCDF4._netCDF4.Dataset'>\nroot group (NETCDF3_CLASSIC data model, file format DAP2):\n    naming_authority: edu.ucsd.cdip\n    keywords_vocabulary: Global Change Master Directory (GCMD) Earth Science Keywords\n    date_created: 2024-11-08T23:29:52Z\n    date_issued: 2024-11-08T23:29:52Z\n    date_modified: 2024-11-08T23:29:52Z\n    creator_name: Coastal Data Information Program, SIO/UCSD\n    creator_url: http://cdip.ucsd.edu\n    creator_email: www@cdip.ucsd.edu\n    creator_institution: Scripps Institution of Oceanography, UCSD\n    creator_country: USA\n    creator_sector: academic\n    publisher_name: Coastal Data Information Program, SIO/UCSD\n    publisher_url: http://cdip.ucsd.edu\n    publisher_email: www@cdip.ucsd.edu\n    publisher_country: USA\n    publisher_institution: Scripps Institution of Oceanography, UCSD\n    institution: Scripps Institution of Oceanography, University of California San Diego\n    project: Coastal Data Information Program (CDIP)\n    processing_level: QA/QC information available at http://cdip.ucsd.edu/documentation\n    standard_name_vocabulary: CF Standard Name Table v79\n    Conventions: ACDD-1.3, CF-1.8, IOOS-1.2\n    license: These data may be redistributed and used without restriction.\n    cdm_data_type: Station\n    featureType: timeSeries\n    ncei_template_version: NCEI_NetCDF_TimeSeries_Orthogonal_Template_v2.0\n    references: http://cdip.ucsd.edu/documentation\n    uuid: FE88B271-A3A2-4DB2-93EB-B9E8BBAB6DCE\n    title: Directional wave and sea surface temperature measurements collected in situ by Datawell Waverider buoys located near HARVEST, CA from 1991/10/22 to 2024/11/08.\n    summary: Directional wave and sea surface temperature measurements collected in situ by Datawell Waverider buoys located near HARVEST, CA from 1991/10/22 to 2024/11/08. This dataset includes publicly-released data only, excluding all records flagged bad by quality control procedures. A total of 466717 wave samples were analyzed for this area, where the water depth is approximately 183 to 558 meters.\n    keywords: EARTH SCIENCE, OCEANS, OCEAN WAVES, GRAVITY WAVES, WIND WAVES, SIGNIFICANT WAVE HEIGHT, WAVE FREQUENCY, WAVE PERIOD, WAVE SPECTRA, OCEAN TEMPERATURE, SEA SURFACE TEMPERATURE, WATER TEMPERATURE, OCEAN, PACIFIC OCEAN, EASTERN PACIFIC OCEAN\n    id: CDIP_071p1_19911022-20241108_historic\n    history: 2024-11-08T23:29:52Z: dataset created; user, program, arguments: uproc, wnc_append_to_hist v1.0, 071. If date_modified is after date_created, contact CDIP for details of changes.\n    comment: Multiple deployments may be included in this dataset. Please refer to the per-deployment datasets - as referenced by sourceFilename and the xxxSourceIndex variables - for more complete metadata. All values are decoded directly from the instruments in accordance with the manufacturers documentation EXCEPT for those with the attribute :additional_processing which describes further data handling performed by CDIP.\n    acknowledgment: CDIP is primarily supported by the U.S. Army Corps of Engineers (USACE). Station partner: CDBW ; Field operator: CDIP\n    metadata_link: http://cdip.ucsd.edu/metadata/071p1\n    infoUrl: http://cdip.ucsd.edu/metadata/071p1\n    contributor_name: CDIP, CDBW/USACE\n    contributor_role: station operation, station funding\n    geospatial_lat_min: 34.440964\n    geospatial_lat_max: 34.486687\n    geospatial_lat_units: degrees_north\n    geospatial_lat_resolution: 1e-04\n    geospatial_lon_min: -120.7961\n    geospatial_lon_max: -120.685455\n    geospatial_lon_units: degrees_east\n    geospatial_lon_resolution: 1e-04\n    geospatial_vertical_min: 0.0\n    geospatial_vertical_max: 0.0\n    geospatial_vertical_units: meters\n    geospatial_vertical_origin: sea surface\n    geospatial_vertical_positive: up\n    geospatial_vertical_resolution: 1.0\n    time_coverage_start: 1991-10-22T07:00:00Z\n    time_coverage_end: 2024-11-08T16:59:59Z\n    time_coverage_duration: P1724W3DT09H\n    time_coverage_resolution: PT30M\n    source: insitu observations\n    platform: metaPlatform\n    instrument: metaInstrumentation\n    DODS.strlen: 0\n    DODS.dimName: metaStationNameLength\n    dimensions(sizes): dwrTime(468936), gpsTime(433684), maxStrlen64(64), metaBoundsCount(2), metaDeployCount(23), sourceCount(23), sstTime(466624), waveFrequency(64), waveTime(466717)\n    variables(dimensions): |S1 sourceFilename(sourceCount, maxStrlen64), int32 waveTime(waveTime), int32 waveTimeBounds(waveTime, metaBoundsCount), int8 waveFlagPrimary(waveTime), int8 waveFlagSecondary(waveTime), float32 waveHs(waveTime), float32 waveTp(waveTime), float32 waveTa(waveTime), float32 waveDp(waveTime), float32 wavePeakPSD(waveTime), float32 waveTz(waveTime), int32 waveSourceIndex(waveTime), float32 waveFrequency(waveFrequency), float32 waveFrequencyBounds(waveFrequency, metaBoundsCount), int8 waveFrequencyFlagPrimary(waveFrequency), int8 waveFrequencyFlagSecondary(waveFrequency), float32 waveBandwidth(waveFrequency), int32 sstTime(sstTime), int32 sstTimeBounds(sstTime, metaBoundsCount), int8 sstFlagPrimary(sstTime), int8 sstFlagSecondary(sstTime), float32 sstSeaSurfaceTemperature(sstTime), int32 sstSourceIndex(sstTime), float32 sstReferenceTemp(sstTime), int32 gpsTime(gpsTime), int32 gpsTimeBounds(gpsTime, metaBoundsCount), int8 gpsStatusFlags(gpsTime), float32 gpsLatitude(gpsTime), float32 gpsLongitude(gpsTime), int32 gpsSourceIndex(gpsTime), int32 dwrTime(dwrTime), int32 dwrTimeBounds(dwrTime, metaBoundsCount), int32 dwrSourceIndex(dwrTime), int32 dwrBatteryLevel(dwrTime), float32 dwrZAccelerometerOffset(dwrTime), float32 dwrXAccelerometerOffset(dwrTime), float32 dwrYAccelerometerOffset(dwrTime), float32 dwrOrientation(dwrTime), float32 dwrInclination(dwrTime), int32 dwrBatteryWeeksOfLife(dwrTime), float32 metaDeployLatitude(metaDeployCount), float32 metaDeployLongitude(metaDeployCount), float32 metaWaterDepth(metaDeployCount), float32 metaDeclination(metaDeployCount), |S1 metaStationName(maxStrlen64), float32 metaStationLatitude(), float32 metaStationLongitude(), |S1 metaPlatform(maxStrlen64), |S1 metaInstrumentation(maxStrlen64), |S1 metaGridMapping(maxStrlen64), float32 waveEnergyDensity(waveTime, waveFrequency), float32 waveMeanDirection(waveTime, waveFrequency), float32 waveA1Value(waveTime, waveFrequency), float32 waveB1Value(waveTime, waveFrequency), float32 waveA2Value(waveTime, waveFrequency), float32 waveB2Value(waveTime, waveFrequency), float32 waveCheckFactor(waveTime, waveFrequency), float32 waveSpread(waveTime, waveFrequency), float32 waveM2Value(waveTime, waveFrequency), float32 waveN2Value(waveTime, waveFrequency)\n    groups: \n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\ndata.summary\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'Directional wave and sea surface temperature measurements collected in situ by Datawell Waverider buoys located near HARVEST, CA from 1991/10/22 to 2024/11/08. This dataset includes publicly-released data only, excluding all records flagged bad by quality control procedures. A total of 466717 wave samples were analyzed for this area, where the water depth is approximately 183 to 558 meters.'\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\n# return all variables included in the dataset\nprint(data.variables.keys())\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\ndict_keys(['sourceFilename', 'waveTime', 'waveTimeBounds', 'waveFlagPrimary', 'waveFlagSecondary', 'waveHs', 'waveTp', 'waveTa', 'waveDp', 'wavePeakPSD', 'waveTz', 'waveSourceIndex', 'waveFrequency', 'waveFrequencyBounds', 'waveFrequencyFlagPrimary', 'waveFrequencyFlagSecondary', 'waveBandwidth', 'sstTime', 'sstTimeBounds', 'sstFlagPrimary', 'sstFlagSecondary', 'sstSeaSurfaceTemperature', 'sstSourceIndex', 'sstReferenceTemp', 'gpsTime', 'gpsTimeBounds', 'gpsStatusFlags', 'gpsLatitude', 'gpsLongitude', 'gpsSourceIndex', 'dwrTime', 'dwrTimeBounds', 'dwrSourceIndex', 'dwrBatteryLevel', 'dwrZAccelerometerOffset', 'dwrXAccelerometerOffset', 'dwrYAccelerometerOffset', 'dwrOrientation', 'dwrInclination', 'dwrBatteryWeeksOfLife', 'metaDeployLatitude', 'metaDeployLongitude', 'metaWaterDepth', 'metaDeclination', 'metaStationName', 'metaStationLatitude', 'metaStationLongitude', 'metaPlatform', 'metaInstrumentation', 'metaGridMapping', 'waveEnergyDensity', 'waveMeanDirection', 'waveA1Value', 'waveB1Value', 'waveA2Value', 'waveB2Value', 'waveCheckFactor', 'waveSpread', 'waveM2Value', 'waveN2Value'])\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\n# learn more about a variable including long name, units, valid min/max values\nprint(data['sstSeaSurfaceTemperature'])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<class 'netCDF4._netCDF4.Variable'>\nfloat32 sstSeaSurfaceTemperature(sstTime)\n    long_name: sea surface temperature\n    units: Celsius\n    _FillValue: -999.99\n    standard_name: sea_surface_temperature\n    coordinates: metaStationLatitude metaStationLongitude\n    grid_mapping: metaGridMapping\n    valid_min: -5.0\n    valid_max: 46.15\n    ancillary_variables: sstFlagPrimary sstFlagSecondary\n    ncei_name: SEA SURFACE TEMPERATURE\n    cell_methods: sstTime: point\nunlimited dimensions: \ncurrent shape = (466624,)\nfilling off\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\n# Get SST timestamp variable \nsst_time_var = data.variables['sstTime']\n\n# Get SST variable \nsst = data.variables['sstSeaSurfaceTemperature'][:]\n\n# Get wave height timestamp variable\nwave_time_var = data.variables['waveTime']\n\n# Get wave height variable \nwave = data.variables['waveHs'][:]\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\n# Use num2date on sst_time_var\nsst_time = netCDF4.num2date(sst_time_var[:], sst_time_var.units, only_use_cftime_datetimes=False)\n```\n:::\n\n::: {.cell}\n\n```{.python .cell-code}\n# Make an empty pandas dataframe\nsst_df = pd.DataFrame()\n\n# Fill it with SST and the date time it was collected\nsst_df['date_time'] = sst_time\nsst_df['sst'] = sst\nsst_df\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                 date_time        sst\n0      1991-10-22 08:21:00  16.000000\n1      1991-10-22 08:51:00  16.000000\n2      1991-10-22 09:21:00  15.900000\n3      1991-10-22 09:51:00  15.900000\n4      1991-10-22 10:21:00  15.850000\n...                    ...        ...\n466619 2024-11-08 14:58:20  13.950001\n466620 2024-11-08 15:28:20  14.000000\n466621 2024-11-08 15:58:20  14.000000\n466622 2024-11-08 16:28:20  14.049999\n466623 2024-11-08 16:58:20  14.100000\n\n[466624 rows x 2 columns]\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}