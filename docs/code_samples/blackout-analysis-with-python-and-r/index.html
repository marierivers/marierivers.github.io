<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marie Rivers">
<meta name="description" content="A geospatial analysis of power outages based in nighttime imagery using Python and R">

<title>Marie T. Rivers - Blackout Analysis with Python and R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../<i class=&quot;fa-solid fa-star&quot;></i>" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Marie T. Rivers</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../code_samples.html" rel="" target="">
 <span class="menu-text">Code Samples</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html" rel="" target="">
 <span class="menu-text">Posts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../resume/rivers_marie_resume.pdf" rel="" target="">
 <span class="menu-text">Resume</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/marierivers" rel="" target=""><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">Blackout Analysis with Python and R</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> view code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          A geospatial analysis of power outages based in nighttime imagery using Python and R
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Python</div>
                <div class="quarto-category">R</div>
                <div class="quarto-category">geospatial analysis</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p><a href="https://marierivers.github.io/">Marie Rivers</a> </p>
            </div>
    </div>
      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#geospatial-analysis" id="toc-geospatial-analysis" class="nav-link" data-scroll-target="#geospatial-analysis">Geospatial Analysis</a>
  <ul class="collapse">
  <li><a href="#read-in-data" id="toc-read-in-data" class="nav-link" data-scroll-target="#read-in-data">Read in data</a>
  <ul class="collapse">
  <li><a href="#satellite-imagery" id="toc-satellite-imagery" class="nav-link" data-scroll-target="#satellite-imagery">Satellite imagery</a></li>
  <li><a href="#road-and-building-data" id="toc-road-and-building-data" class="nav-link" data-scroll-target="#road-and-building-data">Road and Building data</a></li>
  <li><a href="#census-data" id="toc-census-data" class="nav-link" data-scroll-target="#census-data">Census data</a></li>
  </ul></li>
  <li><a href="#create-blackout-mask" id="toc-create-blackout-mask" class="nav-link" data-scroll-target="#create-blackout-mask">Create blackout mask</a></li>
  <li><a href="#visualize" id="toc-visualize" class="nav-link" data-scroll-target="#visualize">Visualize</a></li>
  <li><a href="#identify-houses-without-power" id="toc-identify-houses-without-power" class="nav-link" data-scroll-target="#identify-houses-without-power">Identify houses without power</a></li>
  <li><a href="#aggregate-residential-building-outages-to-census-tract-level" id="toc-aggregate-residential-building-outages-to-census-tract-level" class="nav-link" data-scroll-target="#aggregate-residential-building-outages-to-census-tract-level">Aggregate residential building outages to census tract level</a></li>
  </ul></li>
  <li><a href="#statistical-analysis" id="toc-statistical-analysis" class="nav-link" data-scroll-target="#statistical-analysis">Statistical Analysis</a>
  <ul class="collapse">
  <li><a href="#race" id="toc-race" class="nav-link" data-scroll-target="#race">Race</a>
  <ul class="collapse">
  <li><a href="#percent-white" id="toc-percent-white" class="nav-link" data-scroll-target="#percent-white">Percent white</a></li>
  <li><a href="#percent-black" id="toc-percent-black" class="nav-link" data-scroll-target="#percent-black">Percent black</a></li>
  <li><a href="#percent-native-american" id="toc-percent-native-american" class="nav-link" data-scroll-target="#percent-native-american">Percent native american</a></li>
  <li><a href="#percent-asian" id="toc-percent-asian" class="nav-link" data-scroll-target="#percent-asian">Percent asian</a></li>
  <li><a href="#percent-hispanic-latino" id="toc-percent-hispanic-latino" class="nav-link" data-scroll-target="#percent-hispanic-latino">Percent hispanic / latino</a></li>
  <li><a href="#race-summary-plots" id="toc-race-summary-plots" class="nav-link" data-scroll-target="#race-summary-plots">Race summary plots</a></li>
  </ul></li>
  <li><a href="#age" id="toc-age" class="nav-link" data-scroll-target="#age">Age</a>
  <ul class="collapse">
  <li><a href="#percent-65-and-older" id="toc-percent-65-and-older" class="nav-link" data-scroll-target="#percent-65-and-older">Percent 65 and older</a></li>
  <li><a href="#percent-children-under-18" id="toc-percent-children-under-18" class="nav-link" data-scroll-target="#percent-children-under-18">Percent children under 18</a></li>
  <li><a href="#age-summary-plots" id="toc-age-summary-plots" class="nav-link" data-scroll-target="#age-summary-plots">Age summary plots</a></li>
  </ul></li>
  <li><a href="#income" id="toc-income" class="nav-link" data-scroll-target="#income">Income</a>
  <ul class="collapse">
  <li><a href="#percent-households-below-poverty" id="toc-percent-households-below-poverty" class="nav-link" data-scroll-target="#percent-households-below-poverty">Percent households below poverty</a></li>
  <li><a href="#median-income" id="toc-median-income" class="nav-link" data-scroll-target="#median-income">Median income</a></li>
  <li><a href="#income-summary-plots" id="toc-income-summary-plots" class="nav-link" data-scroll-target="#income-summary-plots">Income summary plots</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  <li><a href="#additional-maps" id="toc-additional-maps" class="nav-link" data-scroll-target="#additional-maps">Additional maps</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">




<p>This analysis evaluates the spatial distribution of power outages in the area surrounding Houston, Texas caused by winter storms in February 2021 and explores which socioeconomic variables are most correlated with power outages. Code and outputs for the geospatial and statistical analyses can be view from the navigation bar at the top of this page.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This analysis started as an assignment for a <a href="https://jamesfrew.github.io/EDS_223_spatial_analysis/assignments/2/HW2.html">Spatial Analysis</a> class I took as part of my <a href="https://ucsb-meds.github.io/">Masters of Environmental Data Science</a> degree at UC Santa Barbara. Here, the original assignment is expanded upon to include additional socioeconomic variables, a statistical analysis, and interactive leaflet maps.</p>
</div>
</div>
<section id="background" class="level1 page-columns page-full">
<h1>Background</h1>
<p>In 2021, large portions of the United States experience three major winter storms on February 10-11, February 13-17, and February 15-20. The electrical infrastructure in the state of Texas was particularly affected by these events. In the Houston area, an estimated 1.4 million customers were without power on February 15. Using satellite imagery and census data, this analysis quantifies the magnitude and socioeconomic variability of power outages surrounding Houston. Goals of the analysis include:</p>
<ul>
<li>estimate the number of homes without power</li>
<li>evaluate race, age, and income differences between areas with and without power</li>
</ul>
<div class="cell column-page-right">
<details>
<summary>R libraries</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries used in the R analysis</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stars)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell column-page-right">
<details>
<summary>Python packages</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages used in Python analysis</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> osgeo <span class="im">import</span> gdal, osr</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.merge <span class="im">import</span> merge</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.features <span class="im">import</span> shapes</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> Polygon</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> shape</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.formula.api <span class="im">import</span> ols</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="geospatial-analysis" class="level1 page-columns page-full">
<h1>Geospatial Analysis</h1>
<section id="read-in-data" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="read-in-data">Read in data</h2>
<p>Read in all data layers and clip to the region on interest.</p>
<section id="satellite-imagery" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="satellite-imagery">Satellite imagery</h3>
<p>Nighttime light data was obtained from the Visible Infrared Imaging Radiometer Suite (VIIRS), located on the Suomi NPP satellite, which uses a low-light sensor to measure light emissions and reflections. Specifically, the daily at-sensor top of atmosphere (TOA) nighttime radiance (VNP46A1) product was used. This data is available at a 500 meter geographic linear latitude/longitude grid resolution. The processed data accounts for nighttime cloud masks, solar/viewing/lunar geometry values, aerosols, and snow cover. This analysis used the day/night band DNB_At_Sensor_Radiance_500m dataset within the VNP46A1 product.</p>
<p>Imagery from February 7th and February 16th was used to visualize pre- and post-storm conditions due to a lack of cloud cover. Imagery from two tiles was needed to cover the area of interest, which resulted in a total of four files used in the analysis.</p>
<ul>
<li>VNP46A1.A2021038.h08v05.001.2021039064328.h5</li>
<li>VNP46A1.A2021038.h08v06.001.2021039064329.h5</li>
<li>VNP46A1.A2021047.h08v05.001.2021048091106.h5</li>
<li>VNP46A1.A2021047.h08v06.001.2021048091105.h5</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<caption>File name convention</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">file name part</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">VNP46A1</td>
<td style="text-align: left;">name of data short product</td>
</tr>
<tr class="even">
<td style="text-align: left;">A2021038</td>
<td style="text-align: left;">year (ie. 2021) and day of year (ie. 038) that the imagery was acquired</td>
</tr>
<tr class="odd">
<td style="text-align: left;">h08</td>
<td style="text-align: left;">horizontal tile number 8</td>
</tr>
<tr class="even">
<td style="text-align: left;">v05</td>
<td style="text-align: left;">vertical tile number 5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">2021039064328</td>
<td style="text-align: left;">year (2021), day of year (039), and time (06:43:28 UTC) that the file contents were generated</td>
</tr>
<tr class="even">
<td style="text-align: left;">h5</td>
<td style="text-align: left;">file extension: HDF-EOS5 (hierarchical data format - earth observing system)</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The functions below takes an HDFEOS file as input and, from that file, reads the DNB_at_Sensor_Radiance_500m dataset. The R code using the <a href="https://r-spatial.github.io/stars/"><code>stars</code></a> package with Python code uses <a href="https://gdal.org/api/python_bindings.html"><code>GDAL</code></a> and <a href="https://rasterio.readthedocs.io/en/stable/"><code>rasterio</code></a>. The functions then reads the sinusoidal tile x/y positions, adjusts the dimensions, and sets the coordinate reference system.</p>
<section id="fuctions-to-read-imagery-data" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="fuctions-to-read-imagery-data">Fuctions to read imagery data</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-1-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function to read and process imagery files as rasters using the stars package</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>read_dnb_file <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># HDF dataset that contains the night lights band</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  dataset_name <span class="ot">&lt;-</span> <span class="st">"//HDFEOS/GRIDS/VNP_Grid_DNB/Data_Fields/DNB_At_Sensor_Radiance_500m"</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract the horizontal and vertical tile coordinates from the metadata</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this information is a string of text</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  h_string <span class="ot">&lt;-</span> <span class="fu">gdal_metadata</span>(file_name)[<span class="dv">199</span>]</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  v_string <span class="ot">&lt;-</span> <span class="fu">gdal_metadata</span>(file_name)[<span class="dv">219</span>]</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># from the horizontal and vertical tile text, obtain the coordinate info as an integer</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  tile_h <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_split</span>(h_string, <span class="st">"="</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)[[<span class="dv">2</span>]])</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  tile_v <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_split</span>(v_string, <span class="st">"="</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)[[<span class="dv">2</span>]])</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use tile coordinates to calculate a geographic bounding box</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  west <span class="ot">&lt;-</span> (<span class="dv">10</span> <span class="sc">*</span> tile_h) <span class="sc">-</span> <span class="dv">180</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  north <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> (<span class="dv">10</span> <span class="sc">*</span> tile_v)</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  east <span class="ot">&lt;-</span> west <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  south <span class="ot">&lt;-</span> north <span class="sc">-</span> <span class="dv">10</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  delta <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="sc">/</span> <span class="dv">2400</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># read the dataset</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  dnb <span class="ot">&lt;-</span> <span class="fu">read_stars</span>(file_name, <span class="at">sub =</span> dataset_name)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the coordinate reference system</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_crs</span>(dnb) <span class="ot">&lt;-</span> <span class="fu">st_crs</span>(<span class="dv">4326</span>)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>x<span class="sc">$</span>delta <span class="ot">&lt;-</span> delta</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>x<span class="sc">$</span>offset <span class="ot">&lt;-</span> west</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>y<span class="sc">$</span>delta <span class="ot">&lt;-</span> <span class="sc">-</span>delta</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>y<span class="sc">$</span>offset <span class="ot">&lt;-</span> north</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dnb)</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a><span class="co"># load in files using the read_dnb function</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v05 <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5"</span>)</span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v06  <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021038.h08v06.001.2021039064329.h5"</span>)</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v05 <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021047.h08v05.001.2021048091106.h5"</span>)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v06 <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021047.h08v06.001.2021048091105.h5"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># code from: https://blackmarble.gsfc.nasa.gov/tools/OpenHDF5.py</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_dnb_file_py (file_name):</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    rasterFiles <span class="op">=</span> file_name</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Get File Name Prefix</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    rasterFilePre <span class="op">=</span> rasterFiles[<span class="dv">8</span>:<span class="dv">16</span>] <span class="op">+</span> <span class="st">"_"</span> <span class="op">+</span> rasterFiles[<span class="dv">17</span>:<span class="dv">23</span>]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    rasterPath <span class="op">=</span> <span class="st">"data/VNP46A1/"</span> <span class="op">+</span> rasterFiles</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    fileExtension <span class="op">=</span> <span class="st">"_BBOX.tif"</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Open HDF file</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    hdflayer <span class="op">=</span> gdal.Open(rasterPath, gdal.GA_ReadOnly)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Open raster layer</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    subhdflayer <span class="op">=</span> hdflayer.GetSubDatasets()[<span class="dv">4</span>][<span class="dv">0</span>] <span class="co"># DNB_At_Sensor_Radiance_500m</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    rlayer <span class="op">=</span> gdal.Open(subhdflayer, gdal.GA_ReadOnly)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Subset the Long Name</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    outputName <span class="op">=</span> subhdflayer[<span class="dv">92</span>:]</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>    outputNameNoSpace <span class="op">=</span> outputName.strip().replace(<span class="st">" "</span>,<span class="st">"_"</span>).replace(<span class="st">"/"</span>,<span class="st">"_"</span>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    outputNameFinal <span class="op">=</span> outputNameNoSpace <span class="op">+</span> <span class="st">"_"</span> <span class="op">+</span> rasterFilePre <span class="op">+</span> fileExtension</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># outputFolder = "data/image"</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># outputRaster = outputFolder + outputNameFinal</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    outputFolder <span class="op">=</span> <span class="st">"data/"</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    outputPre <span class="op">=</span> <span class="st">"image"</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    outputRaster <span class="op">=</span> outputFolder <span class="op">+</span> outputPre <span class="op">+</span> outputNameFinal</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># collect bounding box coordinates</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>    HorizontalTileNumber <span class="op">=</span> <span class="bu">int</span>(rlayer.GetMetadata_Dict()[<span class="st">"HorizontalTileNumber"</span>])</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>    VerticalTileNumber <span class="op">=</span> <span class="bu">int</span>(rlayer.GetMetadata_Dict()[<span class="st">"VerticalTileNumber"</span>])</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>    WestBoundCoord <span class="op">=</span> (<span class="dv">10</span><span class="op">*</span>HorizontalTileNumber) <span class="op">-</span> <span class="dv">180</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    NorthBoundCoord <span class="op">=</span> <span class="dv">90</span><span class="op">-</span>(<span class="dv">10</span><span class="op">*</span>VerticalTileNumber)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    EastBoundCoord <span class="op">=</span> WestBoundCoord <span class="op">+</span> <span class="dv">10</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    SouthBoundCoord <span class="op">=</span> NorthBoundCoord <span class="op">-</span> <span class="dv">10</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set crs</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    EPSG <span class="op">=</span> <span class="st">"-a_srs EPSG:4326"</span> <span class="co">#WGS84</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    translateOptionText <span class="op">=</span> EPSG<span class="op">+</span><span class="st">" -a_ullr "</span> <span class="op">+</span> <span class="bu">str</span>(WestBoundCoord) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(NorthBoundCoord) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(EastBoundCoord) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(SouthBoundCoord)</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    translateoptions <span class="op">=</span> gdal.TranslateOptions(gdal.ParseCommandLine(translateOptionText))</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    gdal.Translate(outputRaster, rlayer, options<span class="op">=</span>translateoptions)</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(rasterio.<span class="bu">open</span>(outputRaster))</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="co"># load in files using the read_dnb function</span></span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a><span class="co"># this saves geotif files of the data</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v05_py <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021038.h08v05.001.2021039064328.h5"</span>)</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v06_py  <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021038.h08v06.001.2021039064329.h5"</span>)</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v05_py <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021047.h08v05.001.2021048091106.h5"</span>)</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v06_py <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021047.h08v06.001.2021048091105.h5"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="merge-imagery-files" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="merge-imagery-files">Merge imagery files</h4>
<p>Combine the tiles from each day, like stitching together quilt squares. The R code uses <a href="https://www.rdocumentation.org/packages/stars/versions/0.6-4/topics/st_mosaic"><code>st_mosaic()</code></a> and the Python code uses <a href="https://rasterio.readthedocs.io/en/stable/api/rasterio.merge.html"><code>rasterio.merge</code></a>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-2-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery before the storms</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>feb7_merged <span class="ot">&lt;-</span>  <span class="fu">st_mosaic</span>(dnb_feb7_h08v05, dnb_feb7_h08v06)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery after the storms</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>feb16_merged <span class="ot">&lt;-</span> <span class="fu">st_mosaic</span>(dnb_feb16_h08v05, dnb_feb16_h08v06)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery before the storms</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>feb7_merged_py, transform <span class="op">=</span> merge([dnb_feb7_h08v05_py, dnb_feb7_h08v06_py])</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery after the storms</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>feb16_merged_py, transform <span class="op">=</span> merge([dnb_feb16_h08v05_py, dnb_feb16_h08v06_py])   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="extract-fill-value-from-meta-data-and-convert-to-na-in-data-arrays" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="extract-fill-value-from-meta-data-and-convert-to-na-in-data-arrays">Extract fill value from meta data and convert to NA in data arrays</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-3-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract fill value from metadata</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>fill_value_string <span class="ot">&lt;-</span> <span class="fu">gdal_metadata</span>(<span class="st">"data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5"</span>)[<span class="dv">38</span>]</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>fill_value <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_split</span>(fill_value_string, <span class="st">"="</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)[[<span class="dv">2</span>]])</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># convert fill value of 65535 to NA</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>feb7_merged[feb7_merged <span class="sc">==</span> fill_value] <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>feb16_merged[feb16_merged <span class="sc">==</span> fill_value] <span class="ot">=</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ds <span class="op">=</span> gdal.Open(<span class="st">'data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5'</span>, gdal.GA_ReadOnly)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>meta <span class="op">=</span> ds.GetMetadata()</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>fill_value_py <span class="op">=</span> <span class="bu">int</span>(meta[<span class="st">'HDFEOS_GRIDS_VNP_Grid_DNB_Data_Fields_DNB_At_Sensor_Radiance_500m__FillValue'</span>])</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># convert fill value to nan</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>feb7_merged_py <span class="op">=</span> np.where(feb7_merged_py <span class="op">==</span> fill_value_py, np.nan, feb7_merged_py)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>feb7_merged_metadata <span class="op">=</span> dnb_feb7_h08v05_py.meta.copy()</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>feb7_merged_metadata.update(width<span class="op">=</span>feb7_merged_py.shape[<span class="dv">2</span>], height<span class="op">=</span>feb7_merged_py.shape[<span class="dv">1</span>], transform<span class="op">=</span>transform, dtype<span class="op">=</span><span class="st">'float32'</span>)</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>feb7_merged_dataset <span class="op">=</span> rasterio.io.MemoryFile().<span class="bu">open</span>(<span class="op">**</span>feb7_merged_metadata)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>feb7_merged_dataset.write(feb7_merged_py)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>feb16_merged_py <span class="op">=</span> np.where(feb16_merged_py <span class="op">==</span> fill_value_py, np.nan, feb16_merged_py)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>feb16_merged_metadata <span class="op">=</span> dnb_feb16_h08v05_py.meta.copy()</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>feb16_merged_metadata.update(width<span class="op">=</span>feb16_merged_py.shape[<span class="dv">2</span>], height<span class="op">=</span>feb16_merged_py.shape[<span class="dv">1</span>], transform<span class="op">=</span>transform, dtype<span class="op">=</span><span class="st">'float64'</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>feb16_merged_dataset <span class="op">=</span> rasterio.io.MemoryFile().<span class="bu">open</span>(<span class="op">**</span>feb16_merged_metadata)</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>feb16_merged_dataset.write(feb16_merged_py)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>According to the metadata, the fill value is 65535.</p>
</section>
<section id="crop-to-roi" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="crop-to-roi">Crop to ROI</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-4-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set region on interest</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>roi_coordinates <span class="ot">&lt;-</span> <span class="fu">st_polygon</span>(<span class="fu">list</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="fl">96.5</span>,<span class="dv">29</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">96.5</span>,<span class="fl">30.5</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">94.5</span>,<span class="fl">30.5</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">94.5</span>,<span class="dv">29</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">96.5</span>,<span class="dv">29</span>))))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># set coordinate reference system</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>roi_sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>(roi_coordinates, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># crs 4326 matches the crs of the satellite imagery</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>feb7_roi <span class="ot">&lt;-</span> <span class="fu">st_crop</span>(feb7_merged, roi_sfc)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>feb16_roi <span class="ot">&lt;-</span> <span class="fu">st_crop</span>(feb16_merged, roi_sfc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>roi_coordinates_py <span class="op">=</span> [(<span class="op">-</span><span class="fl">96.5</span>, <span class="dv">29</span>), (<span class="op">-</span><span class="fl">96.5</span>, <span class="fl">30.5</span>), (<span class="op">-</span><span class="fl">94.5</span>, <span class="fl">30.5</span>), (<span class="op">-</span><span class="fl">94.5</span>, <span class="dv">29</span>), (<span class="op">-</span><span class="fl">96.5</span>, <span class="dv">29</span>)]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>min_x, min_y <span class="op">=</span> <span class="bu">min</span>(coord[<span class="dv">0</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py), <span class="bu">min</span>(coord[<span class="dv">1</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>max_x, max_y <span class="op">=</span> <span class="bu">max</span>(coord[<span class="dv">0</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py), <span class="bu">max</span>(coord[<span class="dv">1</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the window of the ROI</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>window <span class="op">=</span> feb7_merged_dataset.window(min_x, min_y, max_x, max_y)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data within the ROI</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>feb7_roi_py <span class="op">=</span> feb7_merged_dataset.read(window<span class="op">=</span>window)</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>feb16_roi_py <span class="op">=</span> feb16_merged_dataset.read(window<span class="op">=</span>window)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the transform and profile</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>transform <span class="op">=</span> feb7_merged_dataset.window_transform(window)</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>profile <span class="op">=</span> feb7_merged_dataset.profile</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>profile.update({</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'transform'</span>: transform,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'width'</span>: window.width,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'height'</span>: window.height,</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'crs'</span>: feb7_merged_dataset.crs</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="road-and-building-data" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="road-and-building-data">Road and Building data</h3>
<p>Building and road data was obtained from <a href="https://www.openstreetmap.org/#map=5/38.007/-95.844">OpenStreetMap</a>. Subsets of the data were provided as GeoPackages (.gpkg) for the Houston metropolitan area. SQL queries were used to subset highways and major roads from the the road file and residential buildings from the building file.</p>
<p>Since vehicles can be a significant source of observable nighttime light, a 200 meter highway buffer was removed from the blackout mask area. This step prevents areas that experienced reduced traffic from being identified as areas with power outages.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-5-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load in roads package and select specifically highways</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>query_roads <span class="ot">&lt;-</span> <span class="st">"SELECT * FROM gis_osm_roads_free_1 WHERE fclass in ('motorway', 'motorway_link', 'primary', 'primary_link')"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>highways <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/gis_osm_roads_free_1.gpkg"</span>, <span class="at">query =</span> query_roads)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># transform to the correct projection</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>highways_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(highways, <span class="at">crs =</span> <span class="dv">3083</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co"># create a 200 meter buffer</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>highways_buffer_3083 <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(highways_3083, <span class="at">dist =</span> <span class="dv">200</span>) </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>highways_buffer_3083 <span class="ot">&lt;-</span> <span class="fu">st_union</span>(highways_buffer_3083)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>highways_buffer_4326 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(highways_buffer_3083, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>highways_buffer_4326 <span class="ot">&lt;-</span> <span class="fu">st_make_valid</span>(highways_buffer_4326)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load in roads package and select specifically highways</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>query_roads_py <span class="op">=</span> <span class="st">"SELECT * </span><span class="ch">\</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="st">FROM gis_osm_roads_free_1 </span><span class="ch">\</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="st">WHERE fclass in ('motorway', 'motorway_link', 'primary', 'primary_link')"</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>highways_py <span class="op">=</span> gpd.read_file(<span class="st">"data/gis_osm_roads_free_1.gpkg"</span>, query <span class="op">=</span> query_roads_py)</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>highways_py <span class="op">=</span> highways_py[(highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'motorway'</span>) <span class="op">|</span> (highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'motorway_link'</span>) <span class="op">|</span> (highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'primary'</span>) <span class="op">|</span> (highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'primary_link'</span>)]</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>highways_3083_py <span class="op">=</span> highways_py.to_crs(<span class="dv">3083</span>)</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>highway_buffer_3083_py <span class="op">=</span> highways_3083_py.copy()</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>highway_buffer_3083_py[<span class="st">'geometry'</span>] <span class="op">=</span> highway_buffer_3083_py[<span class="st">'geometry'</span>].<span class="bu">buffer</span>(<span class="dv">200</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>highway_buffer_3083_py <span class="op">=</span> gpd.GeoDataFrame(geometry<span class="op">=</span>[highway_buffer_3083_py.geometry.unary_union], crs<span class="op">=</span><span class="dv">3083</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>Close inspection of the building data shows many NA values in the <code>type</code> field. When looking at the data on the map, most NA values appear to be residential buildings, but some non-residential buildings such as schools are included.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-6-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in buildings data and select only residential</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>query_buildings <span class="ot">&lt;-</span> <span class="st">"SELECT * FROM gis_osm_buildings_a_free_1 WHERE (type IS NULL AND name IS NULL) OR type in ('residential', 'apartments', 'house', 'static_caravan', 'detached')"</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># read buildings gpkg into object, and transform to correct projection</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>buildings <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/gis_osm_buildings_a_free_1.gpkg"</span>, <span class="at">query =</span> query_buildings)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>buildings_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(buildings, <span class="at">crs =</span> <span class="dv">3083</span>) <span class="co"># xx</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>buildings_4326 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(buildings, <span class="at">crs =</span> <span class="dv">4326</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>buildings_4326_py <span class="op">=</span> gpd.read_file(<span class="st">'data/gis_osm_buildings_a_free_1.gpkg'</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>buildings_4326_py <span class="op">=</span> buildings_4326_py[((buildings_4326_py[<span class="st">'type'</span>].isna()) <span class="op">&amp;</span> (buildings_4326_py[<span class="st">'name'</span>].isna())) <span class="op">|</span> buildings_4326_py[<span class="st">'type'</span>].isin([<span class="st">'residential'</span>, <span class="st">'apartments'</span>, <span class="st">'house'</span>, <span class="st">'static_caravan'</span>, <span class="st">'detached'</span>])]</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>buildings_3083_py <span class="op">=</span> buildings_4326_py.to_crs(<span class="dv">3083</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="census-data" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="census-data">Census data</h3>
<p>Data pertaining to race, age, and income demographics for Texas census tract was obtained from the U.S. Census Bureaus <a href="https://www.census.gov/programs-surveys/acs">American Community Survey</a>. The data used in this analysis is from 2019 and was cropped to the region of interest. Specific variables evaluated include:</p>
<ul>
<li>Race
<ul>
<li>white</li>
<li>black</li>
<li>native american</li>
<li>hispanic / latino</li>
</ul></li>
<li>Age
<ul>
<li>65 and older</li>
<li>children under 18</li>
</ul></li>
<li>Income
<ul>
<li>households below poverty level</li>
<li>median income</li>
</ul></li>
</ul>
<p>While the race and age data provides the population of each variable for each census tract, these values were normalized by the total population of the census tract. The poverty data was normalized by number of households in each census tract.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>The ACS data consists of the layers listed below, with each layer containing subsets of data as documented in the <a href="https://www2.census.gov/geo/docs/maps-data/data/tiger/prejoined/ACSMetadata2011.txt">ACS Metadata</a>.</p>
<div class="cell">
<div class="cell-output-display">
<table class="kable_wrapper lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<caption>American Commnity Surey Layer Names</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 50%">
</colgroup>
<tbody>
<tr class="odd">
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Layer name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">X01_AGE_AND_SEX</td>
</tr>
<tr class="even">
<td style="text-align: left;">X02_RACE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X03_HISPANIC_OR_LATINO_ORIGIN</td>
</tr>
<tr class="even">
<td style="text-align: left;">X04_ANCESTRY</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X05_FOREIGN_BORN_CITIZENSHIP</td>
</tr>
<tr class="even">
<td style="text-align: left;">X06_PLACE_OF_BIRTH</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X07_MIGRATION</td>
</tr>
<tr class="even">
<td style="text-align: left;">X08_COMMUTING</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X09_CHILDREN_HOUSEHOLD_RELATIONSHIP</td>
</tr>
<tr class="even">
<td style="text-align: left;">X10_GRANDPARENTS_GRANDCHILDREN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X11_HOUSEHOLD_FAMILY_SUBFAMILIES</td>
</tr>
<tr class="even">
<td style="text-align: left;">X12_MARITAL_STATUS_AND_HISTORY</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X13_FERTILITY</td>
</tr>
<tr class="even">
<td style="text-align: left;">X14_SCHOOL_ENROLLMENT</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X15_EDUCATIONAL_ATTAINMENT</td>
</tr>
<tr class="even">
<td style="text-align: left;">X16_LANGUAGE_SPOKEN_AT_HOME</td>
</tr>
</tbody>
</table></td>
<td><table data-quarto-postprocess="true" class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Layer name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">X17_POVERTY</td>
</tr>
<tr class="even">
<td style="text-align: left;">X18_DISABILITY</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X19_INCOME</td>
</tr>
<tr class="even">
<td style="text-align: left;">X20_EARNINGS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X21_VETERAN_STATUS</td>
</tr>
<tr class="even">
<td style="text-align: left;">X22_FOOD_STAMPS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X23_EMPLOYMENT_STATUS</td>
</tr>
<tr class="even">
<td style="text-align: left;">X25_HOUSING_CHARACTERISTICS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X27_HEALTH_INSURANCE</td>
</tr>
<tr class="even">
<td style="text-align: left;">X28_COMPUTER_AND_INTERNET_USE</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X29_VOTING_AGE_POPULATION</td>
</tr>
<tr class="even">
<td style="text-align: left;">X99_IMPUTATION</td>
</tr>
<tr class="odd">
<td style="text-align: left;">X24_INDUSTRY_OCCUPATION</td>
</tr>
<tr class="even">
<td style="text-align: left;">X26_GROUP_QUARTERS</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TRACT_METADATA_2019</td>
</tr>
<tr class="even">
<td style="text-align: left;">ACS_2019_5YR_TRACT_48_TEXAS</td>
</tr>
</tbody>
</table></td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div>
<section id="census-tract-geometry" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="census-tract-geometry">Census tract geometry</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-7-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in census tract geometry</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>acs_geoms <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">layer =</span> <span class="st">"ACS_2019_5YR_TRACT_48_TEXAS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(STATEFP<span class="sc">:</span>Shape_Area))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># census tract geometry</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>acs_geoms_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                          layer <span class="op">=</span> <span class="st">"ACS_2019_5YR_TRACT_48_TEXAS"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>acs_geoms_py_3083 <span class="op">=</span> acs_geoms_py.to_crs(<span class="dv">3083</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="age-and-sex-layer" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="age-and-sex-layer">Age and sex layer</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-8-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># read in variables of interest</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>acs_age_sex <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X01_AGE_AND_SEX"</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>acs_age_sex_df <span class="ot">&lt;-</span> acs_age_sex <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop_from_age_sex =</span> acs_age_sex<span class="sc">$</span>B01001e1,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">median_age =</span> acs_age_sex<span class="sc">$</span>B01002e1,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_65_66 =</span> acs_age_sex<span class="sc">$</span>B01001e20,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_67_to_69 =</span> acs_age_sex<span class="sc">$</span>B01001e21,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_70_to_74 =</span> acs_age_sex<span class="sc">$</span>B01001e22,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_75_to_79 =</span> acs_age_sex<span class="sc">$</span>B01001e23,</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_80_to_84 =</span> acs_age_sex<span class="sc">$</span>B01001e24,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_85_and_over =</span> acs_age_sex<span class="sc">$</span>B01001e25,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_65_66 =</span> acs_age_sex<span class="sc">$</span>B01001e44,</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_67_to_69 =</span> acs_age_sex<span class="sc">$</span>B01001e45,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_70_to_74 =</span> acs_age_sex<span class="sc">$</span>B01001e46,</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_75_to_79 =</span> acs_age_sex<span class="sc">$</span>B01001e47,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_80_to_84 =</span> acs_age_sex<span class="sc">$</span>B01001e48,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_85_and_over =</span> acs_age_sex<span class="sc">$</span>B01001e49,</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_65_and_over =</span> pop_male_65_66 <span class="sc">+</span> pop_male_67_to_69 <span class="sc">+</span> pop_male_70_to_74 <span class="sc">+</span> pop_male_75_to_79 <span class="sc">+</span> pop_male_80_to_84 <span class="sc">+</span> pop_male_85_and_over <span class="sc">+</span> pop_female_65_66 <span class="sc">+</span> pop_female_67_to_69 <span class="sc">+</span> pop_female_70_to_74 <span class="sc">+</span> pop_female_75_to_79 <span class="sc">+</span> pop_female_80_to_84 <span class="sc">+</span> pop_female_85_and_over,</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_65_and_over =</span> (pop_65_and_over <span class="sc">/</span> total_pop_from_age_sex) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, total_pop_from_age_sex, pop_65_and_over, pct_65_and_over)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data for layers of interest</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>                            layer <span class="op">=</span> <span class="st">"X01_AGE_AND_SEX"</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>                            layer <span class="op">=</span> <span class="st">"X01_AGE_AND_SEX"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> acs_age_sex_py.rename(columns<span class="op">=</span>{<span class="st">'B01001e1'</span> : <span class="st">'total_pop_from_age_sex'</span>, </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01002e1'</span> : <span class="st">'median_age'</span>,</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e20'</span> : <span class="st">'pop_male_65_66'</span>,</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e21'</span> : <span class="st">'pop_male_67_to_69'</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e22'</span> : <span class="st">'pop_male_70_to_74'</span>,</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e23'</span> : <span class="st">'pop_male_75_to_79'</span>,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e24'</span> : <span class="st">'pop_male_80_to_84'</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e25'</span> : <span class="st">'pop_male_85_and_over'</span>,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e44'</span> : <span class="st">'pop_female_65_66'</span>,</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e45'</span> : <span class="st">'pop_female_67_to_69'</span>,</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e46'</span> : <span class="st">'pop_female_70_to_74'</span>,</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e47'</span> : <span class="st">'pop_female_75_to_79'</span>,</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e48'</span> : <span class="st">'pop_female_80_to_84'</span>,</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e49'</span> : <span class="st">'pop_female_85_and_over'</span>})</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py[<span class="st">'pop_65_and_over'</span>] <span class="op">=</span> acs_age_sex_py[<span class="st">'pop_male_65_66'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_67_to_69'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_70_to_74'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_75_to_79'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_80_to_84'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_85_and_over'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_65_66'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_67_to_69'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_70_to_74'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_75_to_79'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_80_to_84'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_85_and_over'</span>]</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py[<span class="st">'pct_65_and_over'</span>] <span class="op">=</span> (acs_age_sex_py[<span class="st">'pop_65_and_over'</span>] <span class="op">/</span> acs_age_sex_py[<span class="st">'total_pop_from_age_sex'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> acs_age_sex_py[[<span class="st">'GEOID'</span>, <span class="st">'total_pop_from_age_sex'</span>, <span class="st">'pop_65_and_over'</span>, <span class="st">'pct_65_and_over'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="race-layer" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="race-layer">Race layer</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-9-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>acs_race <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X02_RACE"</span>)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>acs_race_df <span class="ot">&lt;-</span> acs_race <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop_from_race =</span> acs_race<span class="sc">$</span>B02001e1,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_white =</span> acs_race<span class="sc">$</span>B02001e2,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_white =</span> (pop_white <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_black =</span> acs_race<span class="sc">$</span>B02001e3,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_black =</span> (pop_black <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_am_native =</span> acs_race<span class="sc">$</span>B02001e4,</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_am_native =</span> (pop_am_native <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_asian =</span> acs_race<span class="sc">$</span>B02001e5,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_asian =</span> (pop_asian <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>acs_race_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                         layer <span class="op">=</span> <span class="st">"X02_RACE"</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>acs_race_py <span class="op">=</span> acs_race_py.rename(columns<span class="op">=</span>{<span class="st">'B02001e1'</span> : <span class="st">'total_pop_from_race'</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">'B02001e2'</span> : <span class="st">'pop_white'</span>})</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_white'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_white'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pop_black'</span>] <span class="op">=</span> acs_race_py[<span class="st">'B02001e3'</span>]</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_black'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_black'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pop_am_native'</span>] <span class="op">=</span> acs_race_py[<span class="st">'B02001e4'</span>]</span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_am_native'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_am_native'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pop_asian'</span>] <span class="op">=</span> acs_race_py[<span class="st">'B02001e5'</span>]</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_asian'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_asian'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>acs_race_py <span class="op">=</span> acs_race_py[[<span class="st">'GEOID'</span>, <span class="st">'total_pop_from_race'</span>, <span class="st">'pop_white'</span>, <span class="st">'pct_white'</span>, <span class="st">'pop_black'</span>, <span class="st">'pct_black'</span>, <span class="st">'pop_am_native'</span>, <span class="st">'pct_am_native'</span>, <span class="st">'pop_asian'</span>, <span class="st">'pct_asian'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="hispanic-latino-layer" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="hispanic-latino-layer">Hispanic latino layer</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-10-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X03_HISPANIC_OR_LATINO_ORIGIN"</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_df <span class="ot">&lt;-</span> acs_hispanic_latino <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop_from_hispanic =</span> acs_hispanic_latino<span class="sc">$</span>B03002e1,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_hispanic_latino =</span> acs_hispanic_latino<span class="sc">$</span>B03002e12,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_hispanic_latino =</span> (pop_hispanic_latino <span class="sc">/</span> total_pop_from_hispanic) <span class="sc">*</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                                    layer <span class="op">=</span> <span class="st">"X03_HISPANIC_OR_LATINO_ORIGIN"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py[<span class="st">'total_pop_from_hispanic'</span>] <span class="op">=</span> acs_hispanic_latino_py[<span class="st">'B03002e1'</span>]</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py[<span class="st">'pop_hispanic_latino'</span>] <span class="op">=</span> acs_hispanic_latino_py[<span class="st">'B03002e12'</span>]</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py[<span class="st">'pct_hispanic_latino'</span>] <span class="op">=</span> (acs_hispanic_latino_py[<span class="st">'pop_hispanic_latino'</span>] <span class="op">/</span> acs_hispanic_latino_py[<span class="st">'total_pop_from_hispanic'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py <span class="op">=</span> acs_hispanic_latino_py[[<span class="st">'GEOID'</span>, <span class="st">'total_pop_from_hispanic'</span>, <span class="st">'pop_hispanic_latino'</span>, <span class="st">'pct_hispanic_latino'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="children-and-household-relationship" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="children-and-household-relationship">Children and household relationship</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-11-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>acs_children_household <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X09_CHILDREN_HOUSEHOLD_RELATIONSHIP"</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>acs_children_household_df <span class="ot">&lt;-</span> acs_children_household <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_children_under_18 =</span> acs_children_household<span class="sc">$</span>B09002e1,</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_children_under_18 =</span> (pop_children_under_18 <span class="sc">/</span> acs_hispanic_latino<span class="sc">$</span>B03002e1) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># the children_household_relationship layer did not contain a total populaiton field</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-11-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>acs_children_household_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                                       layer <span class="op">=</span> <span class="st">"X09_CHILDREN_HOUSEHOLD_RELATIONSHIP"</span>)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>acs_children_household_py[<span class="st">'pop_children_under_18'</span>] <span class="op">=</span> acs_children_household_py[<span class="st">'B09002e1'</span>]</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>acs_children_household_py[<span class="st">'pct_children_under_18'</span>] <span class="op">=</span> (acs_children_household_py[<span class="st">'pop_children_under_18'</span>] <span class="op">/</span> acs_hispanic_latino_py[<span class="st">'total_pop_from_hispanic'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>acs_children_household_py <span class="op">=</span> acs_children_household_py[[<span class="st">'GEOID'</span>, <span class="st">'pop_children_under_18'</span>, <span class="st">'pct_children_under_18'</span>]]</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="co"># the children_household_relationship layer did not contain a total populaiton field</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="poverty-layer" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="poverty-layer">Poverty layer</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-12-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>acs_poverty <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">layer =</span> <span class="st">"X17_POVERTY"</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>acs_poverty_df <span class="ot">&lt;-</span> acs_poverty <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_households =</span> acs_poverty<span class="sc">$</span>B17017e1,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">num_households_below_poverty =</span> acs_poverty<span class="sc">$</span>B17017e2,</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_households_below_poverty =</span> (num_households_below_poverty <span class="sc">/</span> total_households) <span class="sc">*</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-12-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>acs_poverty_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                            layer <span class="op">=</span> <span class="st">"X17_POVERTY"</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>acs_poverty_py[<span class="st">'total_households'</span>] <span class="op">=</span> acs_poverty_py[<span class="st">'B17017e1'</span>]</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>acs_poverty_py[<span class="st">'num_households_below_poverty'</span>] <span class="op">=</span> acs_poverty_py[<span class="st">'B17017e2'</span>]</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>acs_poverty_py[<span class="st">'pct_households_below_poverty'</span>] <span class="op">=</span> (acs_poverty_py[<span class="st">'num_households_below_poverty'</span>] <span class="op">/</span> acs_poverty_py[<span class="st">'total_households'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>acs_poverty_py <span class="op">=</span> acs_poverty_py[[<span class="st">'GEOID'</span>, <span class="st">'total_households'</span>, <span class="st">'num_households_below_poverty'</span>, <span class="st">'pct_households_below_poverty'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="income-layer" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="income-layer">Income layer</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-13-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>acs_income <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X19_INCOME"</span>)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>acs_income_df <span class="ot">&lt;-</span> acs_income <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_income =</span> acs_income<span class="sc">$</span>B19013e1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-13-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>acs_income_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                           layer <span class="op">=</span> <span class="st">"X19_INCOME"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>acs_income_py[<span class="st">'median_income'</span>] <span class="op">=</span> acs_income_py[<span class="st">'B19013e1'</span>]</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>acs_income_py <span class="op">=</span> acs_income_py[[<span class="st">'GEOID'</span>, <span class="st">'median_income'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="join-census-track-data" class="level4 page-columns page-full">
<h4 class="anchored" data-anchor-id="join-census-track-data">Join census track data</h4>
<p>Next, the selected race, age, and income layers are joined. The resulting data set contains the geometry of each census tract and corresponding socioeconomic data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-14-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>census_tract_data <span class="ot">&lt;-</span> acs_geoms <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_age_sex_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_race_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_hispanic_latino_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_children_household_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_poverty_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_income_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">total_population =</span> total_pop_from_age_sex) <span class="sc">%&gt;%</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(total_pop_from_race, total_pop_from_hispanic))</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>census_tract_data_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(census_tract_data, <span class="dv">3083</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>census_tract_data_4326 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(census_tract_data_3083, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>census_tract_data_roi_4326 <span class="ot">&lt;-</span> <span class="fu">st_crop</span>(census_tract_data_4326, roi_sfc)</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>census_tract_data_roi_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(census_tract_data_roi_4326, <span class="at">crs =</span> <span class="dv">3083</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-14-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># join data layers to census tract geometry</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> acs_geoms_py_3083 <span class="op">=</span> acs_geoms_py.to_crs(<span class="dv">3083</span>).copy()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_age_sex_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_race_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.drop(columns<span class="op">=</span>[<span class="st">'GEOID_x'</span>, <span class="st">'GEOID_y'</span>])</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_hispanic_latino_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_children_household_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.drop(columns<span class="op">=</span>[<span class="st">'GEOID_x'</span>, <span class="st">'GEOID_y'</span>])</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_poverty_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_income_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.drop(columns<span class="op">=</span>[<span class="st">'GEOID_x'</span>, <span class="st">'GEOID_y'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="create-blackout-mask" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="create-blackout-mask">Create blackout mask</h2>
<p>An array was created to represent the difference in night light intensity by subtracting the post-storm imagery from the pre-storm imagery. Next, a blackout threshold is created to identify areas where night light intensity decreased by more than 200 nW cm-2 sr-1. For this analysis, differences in night light intensity are assumed to be caused by the power outages. Areas where the change in light intensity met the threshold were converted to vector format and the highway buffer area was removed.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-15-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-1" role="tab" aria-controls="tabset-15-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-2" role="tab" aria-controls="tabset-15-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-15-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-15-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>difference <span class="ot">&lt;-</span> feb7_roi <span class="sc">-</span> feb16_roi</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>blackout_threshold <span class="ot">&lt;-</span> difference</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>blackout_threshold[blackout_threshold <span class="sc">&lt;=</span> threshold] <span class="ot">=</span> <span class="cn">NA</span> <span class="co"># not a blackout area</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>blackout_threshold[blackout_threshold <span class="sc">&gt;</span> threshold] <span class="ot">=</span> <span class="cn">TRUE</span> <span class="co"># a blackout area</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="co"># vectorize the blackout mask</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(blackout_threshold)</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector <span class="ot">&lt;-</span> <span class="fu">st_make_valid</span>(blackout_threshold_vector)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the highway buffer from our vectorized blackout mask using st_difference()</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>blackout_mask <span class="ot">&lt;-</span> <span class="fu">st_difference</span>(blackout_threshold_vector, highways_buffer_4326)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-15-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-15-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>difference_py <span class="op">=</span> feb7_roi_py <span class="op">-</span> feb16_roi_py</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>threshold_py <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>blackout_threshold_py <span class="op">=</span> np.where(difference_py <span class="op">&lt;=</span> threshold_py, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>blackout_threshold_dataset <span class="op">=</span> rasterio.io.MemoryFile().<span class="bu">open</span>(<span class="op">**</span>profile)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>blackout_threshold_dataset.write(blackout_threshold_py)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>blackout_threshold_data_py <span class="op">=</span> blackout_threshold_dataset.read(<span class="dv">1</span>).astype(<span class="st">'int16'</span>)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a><span class="co"># get shapes as GeoJSON-like objects</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>shapes_gen <span class="op">=</span> shapes(blackout_threshold_data_py, transform<span class="op">=</span>blackout_threshold_dataset.transform, mask <span class="op">=</span> blackout_threshold_data_py <span class="op">!=</span> <span class="dv">0</span>)</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co"># convert shapes to Shapely geometries</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>geometries <span class="op">=</span> [shape(shape_json) <span class="cf">for</span> shape_json, _ <span class="kw">in</span> shapes_gen]</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="co"># create a GeoDataFrame from Shapely geometries</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector_py <span class="op">=</span> gpd.GeoDataFrame(geometry<span class="op">=</span>geometries, crs<span class="op">=</span>blackout_threshold_dataset.crs)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector_3083_py <span class="op">=</span> blackout_threshold_vector_py.to_crs(<span class="dv">3083</span>)</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>blackout_mask_3083_py <span class="op">=</span> gpd.overlay(blackout_threshold_vector_3083_py, highway_buffer_3083_py, how<span class="op">=</span><span class="st">'difference'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="visualize" class="level2">
<h2 class="anchored" data-anchor-id="visualize">Visualize</h2>
<p>xx</p>
</section>
<section id="identify-houses-without-power" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="identify-houses-without-power">Identify houses without power</h2>
<p>Houses that lost electricity were identified based on a spatial intersection of the building data and the blackout mask. In this analysis, houses that did not overlap the blackout mask were identified as not losing power (or had power restored by February 16th).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-16-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-1" role="tab" aria-controls="tabset-16-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-2" role="tab" aria-controls="tabset-16-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-16-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-16-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use spatial subsetting to find all the residential buildings in blackout areas</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>blackout_mask_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(blackout_mask, <span class="at">crs =</span> <span class="dv">3083</span>)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083 <span class="ot">&lt;-</span> buildings_3083[blackout_mask_3083, op <span class="ot">=</span> st_intersects]</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>number_of_buildings_without_power <span class="ot">&lt;-</span> <span class="fu">nrow</span>(blackout_buildings_3083)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-16-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-16-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083_py <span class="op">=</span> gpd.sjoin(buildings_3083_py, blackout_mask_3083_py, how<span class="op">=</span><span class="st">'inner'</span>, op<span class="op">=</span><span class="st">'intersects'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>sys:1: FutureWarning: The `op` parameter is deprecated and will be removed in a future release. Please use the `predicate` parameter instead.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083_py <span class="op">=</span> blackout_buildings_3083_py.drop_duplicates(subset<span class="op">=</span>[<span class="st">'osm_id'</span>])</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083_py <span class="op">=</span> blackout_buildings_3083_py.drop(columns<span class="op">=</span>[<span class="st">'index_right'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>Based on this analysis, an estimated 144,317 houses in the Houston metropolitan area were without power on February 16, 2021.</p>
</section>
<section id="aggregate-residential-building-outages-to-census-tract-level" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="aggregate-residential-building-outages-to-census-tract-level">Aggregate residential building outages to census tract level</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-17-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-1" role="tab" aria-controls="tabset-17-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-2" role="tab" aria-controls="tabset-17-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-17-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-17-1-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use a spatial join to attach the census tract data to the building data</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>blackout_buildings_census_3083 <span class="ot">&lt;-</span> <span class="fu">st_join</span>(blackout_buildings_3083, census_tract_data_3083) <span class="sc">%&gt;%</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">blackout_status =</span> <span class="st">"lost power"</span>)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co"># residential houses that did not lose power</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_3083 <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(buildings_3083, blackout_buildings_3083)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_census_3083 <span class="ot">&lt;-</span> <span class="fu">st_join</span>(no_blackout_buildings_3083, census_tract_data_3083) <span class="sc">%&gt;%</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">blackout_status =</span> <span class="st">"did not lose power"</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>all_building_data_3083 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(blackout_buildings_census_3083, no_blackout_buildings_census_3083)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract <span class="ot">&lt;-</span> all_building_data_3083 <span class="sc">%&gt;%</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GEOID_Data, blackout_status) <span class="sc">%&gt;%</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> blackout_status, <span class="at">values_from =</span> count, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">num_houses_did_not_lose_power =</span> <span class="st">"did not lose power"</span>,</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">num_houses_lost_power =</span> <span class="st">"lost power"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_houses_that_lost_power =</span> (num_houses_lost_power <span class="sc">/</span> (num_houses_did_not_lose_power <span class="sc">+</span> num_houses_lost_power)) <span class="sc">*</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'GEOID_Data'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(census_tract_data_roi_4326, counts_of_lost_power_by_census_tract, <span class="at">by =</span> <span class="st">"GEOID_Data"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-17-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-17-2-tab">
<div class="cell column-page-right">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>blackout_buildings_census_3083_py <span class="op">=</span> gpd.sjoin(blackout_buildings_3083_py, census_tract_data_py)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>blackout_buildings_census_3083_py[<span class="st">'blackout_status'</span>] <span class="op">=</span> <span class="st">'lost power'</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_3083_py <span class="op">=</span> buildings_3083_py[<span class="op">~</span>buildings_3083_py[<span class="st">'osm_id'</span>].isin(blackout_buildings_3083_py[<span class="st">'osm_id'</span>])]</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_census_3083_py <span class="op">=</span> gpd.sjoin(no_blackout_buildings_3083_py, census_tract_data_py)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_census_3083_py[<span class="st">'blackout_status'</span>] <span class="op">=</span> <span class="st">'did not lost power'</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>all_building_data_3083_py <span class="op">=</span> pd.concat([blackout_buildings_census_3083_py, no_blackout_buildings_census_3083_py], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py <span class="op">=</span> all_building_data_3083_py.copy()</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py <span class="op">=</span> counts_of_lost_power_by_census_tract_py[[<span class="st">'GEOID_Data'</span>, <span class="st">'blackout_status'</span>]]</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py <span class="op">=</span> pd.pivot_table(counts_of_lost_power_by_census_tract_py, index<span class="op">=</span><span class="st">'GEOID_Data'</span>, columns<span class="op">=</span><span class="st">'blackout_status'</span>, aggfunc<span class="op">=</span><span class="bu">len</span>, fill_value<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py.columns <span class="op">=</span> [<span class="st">'num_houses_did_not_lose_power'</span>, <span class="st">'num_houses_lost_power'</span>]</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data_py <span class="op">=</span> pd.merge(census_tract_data_py, counts_of_lost_power_by_census_tract_py, how<span class="op">=</span><span class="st">'inner'</span>, on<span class="op">=</span><span class="st">'GEOID_Data'</span>)</span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data_py[<span class="st">'pct_houses_that_lost_power'</span>] <span class="op">=</span> (census_tract_blackout_data_py[<span class="st">'num_houses_lost_power'</span>] <span class="op">/</span> (census_tract_blackout_data_py[<span class="st">'num_houses_did_not_lose_power'</span>] <span class="op">+</span> census_tract_blackout_data_py[<span class="st">'num_houses_lost_power'</span>])) <span class="op">*</span> <span class="dv">100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="statistical-analysis" class="level1 page-columns page-full">
<h1>Statistical Analysis</h1>
<p>Linear regression was used to model the relationship between percent of houses that lost power and selected data from the U.S. Census Bureaus American Community Survey (ACS). All data are aggregated to the census tract level.</p>
<section id="race" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="race">Race</h2>
<section id="percent-white" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-white">Percent white</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-18-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-1" role="tab" aria-controls="tabset-18-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-2" role="tab" aria-controls="tabset-18-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-18-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-18-1-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>model_pct_white <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_white)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_white <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_white, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% white"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_white</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population white in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_white <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_white)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>slope_coef_white <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_white<span class="sc">$</span>coefficients[<span class="st">"pct_white"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>std_err_white <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_white<span class="sc">$</span>coefficients[<span class="st">"pct_white"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>p_value_white <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_white<span class="sc">$</span>coefficients[<span class="st">"pct_white"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_white <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_white, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_white <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_white, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_white <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_white<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-18-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-18-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>model_pct_white_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_white'</span>, </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_white'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% white'</span>)</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'Percent of houses that lost power vs. percent population white in census tract'</span>, y<span class="op">=</span><span class="dv">0</span>, ha<span class="op">=</span><span class="st">'center'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population white in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>slope_coef_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>std_err_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>p_value_white_py <span class="op">=</span> model_pct_white_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>p_value_white_py <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>p_value_white_py<span class="sc">:.6f}</span><span class="ss">"</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>ci_95_lower_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>ci_95_upper_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>r_sqrd_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="percent-black" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-black">Percent black</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-19-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-1" role="tab" aria-controls="tabset-19-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-2" role="tab" aria-controls="tabset-19-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-19-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-19-1-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>model_pct_black <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_black)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_black <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_black, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% black"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_black</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-48-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population black in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_black <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_black)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>slope_coef_black <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_black<span class="sc">$</span>coefficients[<span class="st">"pct_black"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>std_err_black <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_black<span class="sc">$</span>coefficients[<span class="st">"pct_black"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>p_value_black <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_black<span class="sc">$</span>coefficients[<span class="st">"pct_black"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_black <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_black, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_black <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_black, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_black <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_black<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-19-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-19-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>model_pct_black_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_black'</span>, </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_black'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% black'</span>)</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population black in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>slope_coef_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>std_err_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>p_value_black_py <span class="op">=</span> model_pct_black_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="percent-native-american" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-native-american">Percent native american</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-20-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-1" role="tab" aria-controls="tabset-20-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-2" role="tab" aria-controls="tabset-20-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-20-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-20-1-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>model_pct_am_native <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_am_native)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_am_native <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_am_native, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% native american"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_am_native</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-52-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population native american in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_am_native <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_am_native)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>slope_coef_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_am_native<span class="sc">$</span>coefficients[<span class="st">"pct_am_native"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>std_err_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_am_native<span class="sc">$</span>coefficients[<span class="st">"pct_am_native"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>p_value_am_native <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_am_native<span class="sc">$</span>coefficients[<span class="st">"pct_am_native"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_am_native, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_am_native, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_am_native<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-20-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-20-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>model_pct_am_native_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_am_native'</span>, </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_am_native'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% am_native'</span>)</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population native american in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>slope_coef_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>std_err_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>p_value_am_native_py <span class="op">=</span> model_pct_am_native_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="percent-asian" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-asian">Percent asian</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-21-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-1" role="tab" aria-controls="tabset-21-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-2" role="tab" aria-controls="tabset-21-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-21-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-21-1-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>model_pct_asian <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_asian)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_asian <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_asian, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% asian"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_asian</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-56-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population asian in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_asian <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_asian)</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>slope_coef_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_asian<span class="sc">$</span>coefficients[<span class="st">"pct_asian"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>std_err_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_asian<span class="sc">$</span>coefficients[<span class="st">"pct_asian"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>p_value_asian <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_asian<span class="sc">$</span>coefficients[<span class="st">"pct_asian"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_asian, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_asian, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_asian<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-21-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-21-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>model_pct_asian_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_asian'</span>, </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_asian'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% asian'</span>)</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population asian in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>slope_coef_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>std_err_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>p_value_asian_py <span class="op">=</span> model_pct_asian_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="percent-hispanic-latino" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-hispanic-latino">Percent hispanic / latino</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-22-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-1" role="tab" aria-controls="tabset-22-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-2" role="tab" aria-controls="tabset-22-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-22-1" class="tab-pane active page-columns page-full" role="tabpanel" aria-labelledby="tabset-22-1-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>model_pct_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_hispanic_latino)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_hispanic_latino, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% hispanic / latino"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_hispanic_latino</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-60-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population hispanic / latino in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_hispanic_latino)</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>slope_coef_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>coefficients[<span class="st">"pct_hispanic_latino"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>std_err_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>coefficients[<span class="st">"pct_hispanic_latino"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>p_value_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>coefficients[<span class="st">"pct_hispanic_latino"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_hispanic_latino, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_hispanic_latino, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-22-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-22-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>model_pct_hispanic_latino_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_hispanic_latino'</span>, </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_hispanic_latino'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'</span><span class="sc">% hi</span><span class="st">spanic_latino'</span>)</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population hispanic / latino in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>slope_coef_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>std_err_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>p_value_hispanic_latino_py <span class="op">=</span> model_pct_hispanic_latino_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="race-summary-plots" class="level3">
<h3 class="anchored" data-anchor-id="race-summary-plots">Race summary plots</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>model_plots_race <span class="ot">&lt;-</span> (plot_model_pct_white <span class="sc">|</span> plot_model_pct_black <span class="sc">|</span> plot_model_pct_am_native) <span class="sc">/</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  (plot_model_pct_asian <span class="sc">|</span> plot_model_pct_hispanic_latino <span class="sc">|</span> <span class="fu">plot_spacer</span>()) <span class="sc">+</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Lineral Regression Models of Power Outages vs. Race"</span>)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>model_plots_race</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing non-finite values (`stat_smooth()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 41 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-64-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="age" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="age">Age</h2>
<section id="percent-65-and-older" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-65-and-older">Percent 65 and older</h3>
<div class="tabset-margin-container page-columns page-full"><div class="no-row-height column-margin column-container"><div class="cell-output-display tabset-margin-content tabset-23-1-tab-margin-content">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population age 65 and older in census tract</figcaption>
</figure>
</div>
</div></div></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-23-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-1" role="tab" aria-controls="tabset-23-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-2" role="tab" aria-controls="tabset-23-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-23-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-23-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>model_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_65_and_over)</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_65_and_over, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% 65 and older"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_65_and_over</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<div class="cell">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_65_and_over)</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>slope_coef_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_65_and_over<span class="sc">$</span>coefficients[<span class="st">"pct_65_and_over"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>std_err_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_65_and_over<span class="sc">$</span>coefficients[<span class="st">"pct_65_and_over"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>p_value_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_65_and_over<span class="sc">$</span>coefficients[<span class="st">"pct_65_and_over"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_65_and_over, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_65_and_over, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_65_and_over<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-23-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-23-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>model_pct_65_and_over_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_65_and_over'</span>, </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_65_and_over'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% 65 and over'</span>)</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-67-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population age 65 and older in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>slope_coef_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>std_err_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>p_value_pct_65_and_over_py <span class="op">=</span> model_pct_65_and_over_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="percent-children-under-18" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-children-under-18">Percent children under 18</h3>
<div class="tabset-margin-container page-columns page-full"><div class="no-row-height column-margin column-container"><div class="cell-output-display tabset-margin-content tabset-24-1-tab-margin-content">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-69-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population children under 18 in census tract</figcaption>
</figure>
</div>
</div></div></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-24-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-1" role="tab" aria-controls="tabset-24-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-2" role="tab" aria-controls="tabset-24-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-24-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-24-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>model_pct_children_under_18 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_children_under_18)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_children_under_18 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_children_under_18, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% children under 18"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_children_under_18</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<div class="cell">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_children_under_18 <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_children_under_18)</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>slope_coef_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_children_under_18<span class="sc">$</span>coefficients[<span class="st">"pct_children_under_18"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>std_err_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_children_under_18<span class="sc">$</span>coefficients[<span class="st">"pct_children_under_18"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>p_value_children_under_18 <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_children_under_18<span class="sc">$</span>coefficients[<span class="st">"pct_children_under_18"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_children_under_18, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_children_under_18, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_children_under_18<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-24-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-24-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>model_pct_children_under_18_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_children_under_18'</span>, </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_children_under_18'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'</span><span class="sc">% c</span><span class="st">hildren under 18'</span>)</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-71-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population children under 18 in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>slope_coef_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>std_err_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>p_value_children_under_18_py <span class="op">=</span> model_pct_children_under_18_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="age-summary-plots" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="age-summary-plots">Age summary plots</h3>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>model_plots_age <span class="ot">&lt;-</span> (plot_model_pct_65_and_over <span class="sc">|</span> plot_model_pct_children_under_18) <span class="sc">+</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Lineral Regression Models of Power Outages vs. Age"</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>model_plots_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-screen-right">
<p><img src="index_files/figure-html/unnamed-chunk-73-3.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
</section>
<section id="income" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="income">Income</h2>
<section id="percent-households-below-poverty" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="percent-households-below-poverty">Percent households below poverty</h3>
<div class="tabset-margin-container page-columns page-full"><div class="no-row-height column-margin column-container"><div class="cell-output-display tabset-margin-content tabset-25-1-tab-margin-content">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-74-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population of household below the poverty level in census tract</figcaption>
</figure>
</div>
</div></div></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-25-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-1" role="tab" aria-controls="tabset-25-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-25-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-25-2" role="tab" aria-controls="tabset-25-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-25-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-25-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>model_pct_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_households_below_poverty)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>plot_model_pct_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_households_below_poverty, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% households below poverty"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>plot_model_pct_households_below_poverty</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<div class="cell">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>summary_model_pct_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_households_below_poverty)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>slope_coef_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>coefficients[<span class="st">"pct_households_below_poverty"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>std_err_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>coefficients[<span class="st">"pct_households_below_poverty"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>p_value_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>coefficients[<span class="st">"pct_households_below_poverty"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_households_below_poverty, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_households_below_poverty, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-25-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-25-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>model_pct_households_below_poverty_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_households_below_poverty'</span>, </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_households_below_poverty'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'</span><span class="sc">% ho</span><span class="st">useholds below poverty'</span>)</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-76-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;percent population of household below the poverty level in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>slope_coef_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>std_err_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>p_value_households_below_poverty_py <span class="op">=</span> model_pct_households_below_poverty_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="median-income" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="median-income">Median income</h3>
<div class="tabset-margin-container page-columns page-full"><div class="no-row-height column-margin column-container"><div class="cell-output-display tabset-margin-content tabset-26-1-tab-margin-content">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-78-3.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;median income in census tract</figcaption>
</figure>
</div>
</div></div></div><div class="panel-tabset page-columns page-full">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-26-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-26-1" role="tab" aria-controls="tabset-26-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-26-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-26-2" role="tab" aria-controls="tabset-26-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content page-columns page-full">
<div id="tabset-26-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-26-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>model_median_income <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> median_income)</span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>plot_model_median_income <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> median_income, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"median income"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>plot_model_median_income</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<div class="cell">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>summary_model_median_income <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_median_income)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>slope_coef_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_median_income<span class="sc">$</span>coefficients[<span class="st">"median_income"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>std_err_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_median_income<span class="sc">$</span>coefficients[<span class="st">"median_income"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>p_value_median_income <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_median_income<span class="sc">$</span>coefficients[<span class="st">"median_income"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>ci_95_lower_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_median_income, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>ci_95_upper_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_median_income, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>r_sqrd_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_median_income<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-26-2" class="tab-pane page-columns page-full" role="tabpanel" aria-labelledby="tabset-26-2-tab">
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>model_pct_median_income_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ median_income'</span>, </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'median_income'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'median income'</span>)</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-80-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Percent of houses that lost power vs.&nbsp;median income in census tract</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell column-page-right">
<details>
<summary>Code for model summary result values</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-overflow-wrap code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>slope_coef_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>std_err_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>p_value_median_income_py <span class="op">=</span> model_pct_median_income_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>ci_95_lower_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>ci_95_upper_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>r_sqrd_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.rsquared, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="income-summary-plots" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="income-summary-plots">Income summary plots</h3>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>model_plots_income <span class="ot">&lt;-</span> (plot_model_pct_households_below_poverty <span class="sc">|</span> plot_model_median_income) <span class="sc">+</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Lineral Regression Models of Power Outages vs. Income"</span>)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>model_plots_income</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-screen-right">
<p><img src="index_files/figure-html/unnamed-chunk-82-3.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
</section>
</section>
<section id="results" class="level1 page-columns page-full">
<h1>Results</h1>
<p>Based on the results of the linear regression models, there is a statistically significant relationship at the 5 % level between percent of houses that lost power and the following variables:</p>
<ul>
<li>percent of population white</li>
<li>percent of population black</li>
<li>percent of population hispanic / latino</li>
<li>percent of population age 65 and older</li>
<li>percent of population children under age 18</li>
<li>percent of households below the poverty level</li>
</ul>
<p>Of the significant variables, black; hispanic / latino; children under 18; and poverty were positively correlated with residential power outages. Significant variables that were negatively correlated with residential power outages included white and age 65 and older.</p>
<p>For each model with statistically significant results (ie. p-value &lt; 0.05) we reject the null hypothesis that the socioeconomic variable had no influence on percentage of houses without electricity in each census tract at the 5% level. In other words, the slope coefficient is significantly different from zero. Each slope coefficient represents the change in percent of houses that lost power for a one unit increase in the socioeconomic variable. To use the percent white model as an example, for each one unit increase in percent of census population that is white, the percent of census level residential power outages decreases by 0.168. For the percent white model, the 95% confidence interval for the slope coefficient ranges from -0.251 to -0.085. This means that there is a 95% change that this interval includes the true census level rate of change for percent residential power outages for each one unit change in percent of population that is white.</p>
<p>The r-squared terms represent the variance in percent of houses without power that can be explained by the socioeconomic variable. The r-squared values ranged from 0% for the asian model to 2.9% for the age 65 and older model.</p>
<p>The results of the linear models are summarized in the table below.</p>
<div class="cell page-columns page-full">
<details>
<summary>Code to create summary table</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>model_summary_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">model_name =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"black"</span>, <span class="st">"native american"</span>, <span class="st">"asian"</span>, <span class="st">"hispanic / latino"</span>, <span class="st">"65 and older"</span>, <span class="st">"children under 18"</span>, <span class="st">"poverty"</span>, <span class="st">"median income"</span>),</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">slope_coef =</span> <span class="fu">c</span>(slope_coef_white, slope_coef_black, slope_coef_am_native, slope_coef_asian, slope_coef_hispanic_latino, slope_coef_pct_65_and_over, slope_coef_children_under_18, slope_coef_households_below_poverty, slope_coef_median_income),</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>                               <span class="at">std_err =</span> <span class="fu">c</span>(std_err_white, std_err_black, std_err_am_native, std_err_asian, std_err_hispanic_latino, std_err_pct_65_and_over, std_err_children_under_18, std_err_households_below_poverty, std_err_median_income),</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>                               <span class="at">p_value =</span> <span class="fu">c</span>(p_value_white, p_value_black, p_value_am_native, p_value_asian, p_value_hispanic_latino, p_value_pct_65_and_over, p_value_children_under_18, p_value_households_below_poverty, p_value_median_income),</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ci_95_lower =</span> <span class="fu">c</span>(<span class="fu">paste</span>(ci_95_lower_white, <span class="st">"to"</span>, ci_95_upper_white),</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_black, <span class="st">"to"</span>, ci_95_upper_black),</span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_am_native, <span class="st">"to"</span>, ci_95_upper_am_native),</span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_asian, <span class="st">"to"</span>, ci_95_upper_asian),</span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_hispanic_latino, <span class="st">"to"</span>, ci_95_upper_hispanic_latino),</span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_pct_65_and_over, <span class="st">"to"</span>, ci_95_upper_pct_65_and_over),</span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_children_under_18, <span class="st">"to"</span>, ci_95_upper_children_under_18),</span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_households_below_poverty, <span class="st">"to"</span>, ci_95_upper_households_below_poverty),</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_median_income, <span class="st">"to"</span>, ci_95_upper_median_income)),</span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>                               <span class="at">r_squared =</span> <span class="fu">c</span>(r_sqrd_white, r_sqrd_black, r_sqrd_am_native, r_sqrd_asian, r_sqrd_hispanic_latino, r_sqrd_65_and_over, r_sqrd_children_under_18, r_sqrd_households_below_poverty, r_sqrd_median_income)) <span class="sc">%&gt;%</span> </span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">significance =</span> <span class="fu">case_when</span>(</span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a>    p_value <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"yes"</span>,</span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a>    p_value <span class="sc">&gt;=</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"no"</span>))</span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a>model_summary_table <span class="ot">&lt;-</span> model_summary_df <span class="sc">%&gt;%</span> </span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"model name"</span>, <span class="st">"slope coefficent"</span>, <span class="st">"standard error"</span>, <span class="st">"p-value"</span>, <span class="st">"95% confidence interval"</span>, <span class="st">"r-squared"</span>, <span class="st">"significant at 5% level"</span>),</span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Summary of Model Results"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-22"><a href="#cb98-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>()</span>
<span id="cb98-23"><a href="#cb98-23" aria-hidden="true" tabindex="-1"></a>model_summary_table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display column-page-right">
<table class="lightable-paper table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Summary of Model Results</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">model name</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">slope coefficent</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">standard error</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">p-value</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">95% confidence interval</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">r-squared</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">significant at 5% level</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">white</td>
<td style="text-align: right;">-0.168</td>
<td style="text-align: right;">0.042</td>
<td style="text-align: left;">0.000076</td>
<td style="text-align: left;">-0.251 to -0.085</td>
<td style="text-align: right;">0.015</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">black</td>
<td style="text-align: right;">0.167</td>
<td style="text-align: right;">0.048</td>
<td style="text-align: left;">0.00054</td>
<td style="text-align: left;">0.072 to 0.261</td>
<td style="text-align: right;">0.011</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">native american</td>
<td style="text-align: right;">1.010</td>
<td style="text-align: right;">1.162</td>
<td style="text-align: left;">0.38</td>
<td style="text-align: left;">-1.27 to 3.29</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: left;">no</td>
</tr>
<tr class="even">
<td style="text-align: left;">asian</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">0.104</td>
<td style="text-align: left;">0.58</td>
<td style="text-align: left;">-0.147 to 0.261</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: left;">no</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hispanic / latino</td>
<td style="text-align: right;">0.104</td>
<td style="text-align: right;">0.037</td>
<td style="text-align: left;">0.0047</td>
<td style="text-align: left;">0.032 to 0.176</td>
<td style="text-align: right;">0.007</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">65 and older</td>
<td style="text-align: right;">-0.902</td>
<td style="text-align: right;">0.159</td>
<td style="text-align: left;">0.000000019</td>
<td style="text-align: left;">-1.214 to -0.589</td>
<td style="text-align: right;">0.029</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">children under 18</td>
<td style="text-align: right;">0.299</td>
<td style="text-align: right;">0.140</td>
<td style="text-align: left;">0.033</td>
<td style="text-align: left;">0.025 to 0.573</td>
<td style="text-align: right;">0.004</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">poverty</td>
<td style="text-align: right;">0.215</td>
<td style="text-align: right;">0.084</td>
<td style="text-align: left;">0.011</td>
<td style="text-align: left;">0.05 to 0.38</td>
<td style="text-align: right;">0.006</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">median income</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: left;">0.42</td>
<td style="text-align: left;">0 to 0</td>
<td style="text-align: right;">0.001</td>
<td style="text-align: left;">no</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The figures below provide a visual comparison of each model result. The bold portion of the line represents the 90% confidence interval and the full line represents the 95% confidnece interval for each slope coefficent estimate.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>race_model_summary <span class="ot">&lt;-</span> <span class="fu">plot_summs</span>(model_pct_white, model_pct_black, model_pct_am_native, model_pct_asian, model_pct_hispanic_latino,</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">inner_ci_level =</span> <span class="fl">0.9</span>,</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">model.names =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"black"</span>, <span class="st">"native american"</span>, <span class="st">"asian"</span>, <span class="st">"hispanic/latino"</span>))</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>race_model_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>age_model_summary <span class="ot">&lt;-</span><span class="fu">plot_summs</span>(model_pct_65_and_over, model_pct_children_under_18,</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">inner_ci_level =</span> <span class="fl">0.95</span>,</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">model.names =</span> <span class="fu">c</span>(<span class="st">"over 65"</span>, <span class="st">"under 18"</span>))</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>age_model_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-86-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>income_model_summary <span class="ot">&lt;-</span><span class="fu">plot_summs</span>(model_pct_households_below_poverty, model_median_income,</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">inner_ci_level =</span> <span class="fl">0.95</span>,</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">model.names =</span> <span class="fu">c</span>(<span class="st">"poverty"</span>, <span class="st">"median income"</span>))</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>income_model_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="conclusion" class="level1">
<h1>Conclusion</h1>
<p>This analysis does not include any verification of power outage locations nor does it incorporate typical variations in nighttime lights. The intent of the statistical analysis is not to use sociodemographic variables as predictors of power outages, but rather provide insight into groups that were disproportionately affected. Further work could incorporate electric utility data to identify vulnerable power grid infrastructure and then recommend equitable asset management and capital improvement plans.</p>
</section>
<section id="additional-maps" class="level1">
<h1>Additional maps</h1>
</section>
<section id="references" class="level1">
<h1>References</h1>
<p><a href="https://viirsland.gsfc.nasa.gov/PDF/VIIRS_BlackMarble_UserGuide.pdf">VIIRS Day/Night Band Sensor User Guide</a></p>
<p>Pebesma E (2022). stars: Spatiotemporal Arrays, Raster and Vector Data Cubes. https://r-spatial.github.io/stars/, https://github.com/r-spatial/stars/.</p>
<p><a href="https://earthobservatory.nasa.gov/images/147941/extreme-winter-weather-causes-us-blackouts">Extreme Winter Weather Causes U.S. Blackouts</a></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-27-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-1" role="tab" aria-controls="tabset-27-1" aria-selected="true"><svg aria-label="R Project" role="img" viewbox="0 0 581 512" style="height:1em;width:1.13em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>R Project</title><path d="M581 226.6C581 119.1 450.9 32 290.5 32S0 119.1 0 226.6C0 322.4 103.3 402 239.4 418.1V480h99.1v-61.5c24.3-2.7 47.6-7.4 69.4-13.9L448 480h112l-67.4-113.7c54.5-35.4 88.4-84.9 88.4-139.7zm-466.8 14.5c0-73.5 98.9-133 220.8-133s211.9 40.7 211.9 133c0 50.1-26.5 85-70.3 106.4-2.4-1.6-4.7-2.9-6.4-3.7-10.2-5.2-27.8-10.5-27.8-10.5s86.6-6.4 86.6-92.7-90.6-87.9-90.6-87.9h-199V361c-74.1-21.5-125.2-67.1-125.2-119.9zm225.1 38.3v-55.6c57.8 0 87.8-6.8 87.8 27.3 0 36.5-38.2 28.3-87.8 28.3zm-.9 72.5H365c10.8 0 18.9 11.7 24 19.2-16.1 1.9-33 2.8-50.6 2.9v-22.1z"></path></svg> R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-27-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-27-2" role="tab" aria-controls="tabset-27-2" aria-selected="false"><svg aria-label="Python" role="img" viewbox="0 0 448 512" style="height:1em;width:0.88em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:#5A5A5A;overflow:visible;position:relative;"><title>Python</title><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"></path></svg> Python</a></li></ul>
<div class="tab-content">
<div id="tabset-27-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-27-1-tab">

</div>
<div id="tabset-27-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-27-2-tab">

</div>
</div>
</div>


<!-- -->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{rivers,
  author = {Rivers, Marie},
  title = {Blackout {Analysis} with {Python} and {R}},
  url = {https://marierivers.github.io/code_samples/blackout-analysis-with-python-and-r/},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-rivers" class="csl-entry quarto-appendix-citeas" role="listitem">
Rivers, Marie. n.d. <span>Blackout Analysis with Python and R.</span>
<a href="https://marierivers.github.io/code_samples/blackout-analysis-with-python-and-r/">https://marierivers.github.io/code_samples/blackout-analysis-with-python-and-r/</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb102" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Blackout Analysis with Python and R"</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "A geospatial analysis of power outages based in nighttime imagery using Python and R"</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="co">  - name: Marie Rivers</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="co">    url: https://marierivers.github.io/</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co"># date: 2022-04-03</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> [Python, R, geospatial analysis]</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="an">citation:</span><span class="co"> </span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="co">  url: https://marierivers.github.io/code_samples/blackout-analysis-with-python-and-r/ </span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a><span class="co"># image: blackout_areas.png</span></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="an">draft:</span><span class="co"> false</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a><span class="an">toc-title:</span><span class="co"> Contents</span></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a><span class="an">toc-location:</span><span class="co"> left</span></span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> </span></span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a><span class="co">  source: true</span></span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a><span class="co">  toggle: true</span></span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a><span class="co">  caption: view code</span></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a><span class="an">code-block-bg:</span><span class="co"> true</span></span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a><span class="co"># code-block-border-left: "#31BAE9"</span></span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a>This analysis evaluates the spatial distribution of power outages in the area surrounding Houston, Texas caused by winter storms in February 2021 and explores which socioeconomic variables are most correlated with power outages. Code and outputs for the geospatial and statistical analyses can be view from the navigation bar at the top of this page.</span>
<span id="cb102-26"><a href="#cb102-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-27"><a href="#cb102-27" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb102-28"><a href="#cb102-28" aria-hidden="true" tabindex="-1"></a>This analysis started as an assignment for a <span class="co">[</span><span class="ot">Spatial Analysis</span><span class="co">](https://jamesfrew.github.io/EDS_223_spatial_analysis/assignments/2/HW2.html)</span> class I took as part of my <span class="co">[</span><span class="ot">Masters of Environmental Data Science</span><span class="co">](https://ucsb-meds.github.io/)</span> degree at UC Santa Barbara. Here, the original assignment is expanded upon to include additional socioeconomic variables, a statistical analysis, and interactive leaflet maps.</span>
<span id="cb102-29"><a href="#cb102-29" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-30"><a href="#cb102-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-31"><a href="#cb102-31" aria-hidden="true" tabindex="-1"></a><span class="fu"># Background</span></span>
<span id="cb102-32"><a href="#cb102-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-33"><a href="#cb102-33" aria-hidden="true" tabindex="-1"></a>In 2021, large portions of the United States experience three major winter storms on February 10-11, February 13-17, and February 15-20. The electrical infrastructure in the state of Texas was particularly affected by these events. In the Houston area, an estimated 1.4 million customers were without power on February 15. Using satellite imagery and census data, this analysis quantifies the magnitude and socioeconomic variability of power outages surrounding Houston. Goals of the analysis include:</span>
<span id="cb102-34"><a href="#cb102-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-35"><a href="#cb102-35" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>estimate the number of homes without power</span>
<span id="cb102-36"><a href="#cb102-36" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>evaluate race, age, and income differences between areas with and without power</span>
<span id="cb102-37"><a href="#cb102-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-40"><a href="#cb102-40" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-41"><a href="#cb102-41" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-42"><a href="#cb102-42" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-43"><a href="#cb102-43" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "R libraries"</span></span>
<span id="cb102-44"><a href="#cb102-44" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-45"><a href="#cb102-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-46"><a href="#cb102-46" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries used in the R analysis</span></span>
<span id="cb102-47"><a href="#cb102-47" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reticulate)</span>
<span id="cb102-48"><a href="#cb102-48" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb102-49"><a href="#cb102-49" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb102-50"><a href="#cb102-50" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb102-51"><a href="#cb102-51" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stars)</span>
<span id="cb102-52"><a href="#cb102-52" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb102-53"><a href="#cb102-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb102-54"><a href="#cb102-54" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb102-55"><a href="#cb102-55" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(jtools)</span>
<span id="cb102-56"><a href="#cb102-56" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-57"><a href="#cb102-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-60"><a href="#cb102-60" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-61"><a href="#cb102-61" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-62"><a href="#cb102-62" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-63"><a href="#cb102-63" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Python packages"</span></span>
<span id="cb102-64"><a href="#cb102-64" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-65"><a href="#cb102-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-66"><a href="#cb102-66" aria-hidden="true" tabindex="-1"></a><span class="co"># load packages used in Python analysis</span></span>
<span id="cb102-67"><a href="#cb102-67" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb102-68"><a href="#cb102-68" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb102-69"><a href="#cb102-69" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb102-70"><a href="#cb102-70" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb102-71"><a href="#cb102-71" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb102-72"><a href="#cb102-72" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> osgeo <span class="im">import</span> gdal, osr</span>
<span id="cb102-73"><a href="#cb102-73" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> rasterio</span>
<span id="cb102-74"><a href="#cb102-74" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.merge <span class="im">import</span> merge</span>
<span id="cb102-75"><a href="#cb102-75" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> rasterio.features <span class="im">import</span> shapes</span>
<span id="cb102-76"><a href="#cb102-76" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> Polygon</span>
<span id="cb102-77"><a href="#cb102-77" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> shape</span>
<span id="cb102-78"><a href="#cb102-78" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.formula.api <span class="im">import</span> ols</span>
<span id="cb102-79"><a href="#cb102-79" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-80"><a href="#cb102-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-81"><a href="#cb102-81" aria-hidden="true" tabindex="-1"></a><span class="fu"># Geospatial Analysis</span></span>
<span id="cb102-82"><a href="#cb102-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-83"><a href="#cb102-83" aria-hidden="true" tabindex="-1"></a><span class="fu">## Read in data</span></span>
<span id="cb102-84"><a href="#cb102-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-85"><a href="#cb102-85" aria-hidden="true" tabindex="-1"></a>Read in all data layers and clip to the region on interest.</span>
<span id="cb102-86"><a href="#cb102-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-87"><a href="#cb102-87" aria-hidden="true" tabindex="-1"></a><span class="fu">### Satellite imagery</span></span>
<span id="cb102-88"><a href="#cb102-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-89"><a href="#cb102-89" aria-hidden="true" tabindex="-1"></a>Nighttime light data was obtained from the Visible Infrared Imaging Radiometer Suite (VIIRS), located on the Suomi NPP satellite, which uses a low-light sensor to measure light emissions and reflections. Specifically, the daily at-sensor top of atmosphere (TOA) nighttime radiance (VNP46A1) product was used. This data is available at a 500 meter geographic linear latitude/longitude grid resolution. The processed data accounts for nighttime cloud masks, solar/viewing/lunar geometry values, aerosols, and snow cover. This analysis used the day/night band DNB_At_Sensor_Radiance_500m dataset within the VNP46A1 product.</span>
<span id="cb102-90"><a href="#cb102-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-91"><a href="#cb102-91" aria-hidden="true" tabindex="-1"></a>Imagery from February 7th and February 16th was used to visualize pre- and post-storm conditions due to a lack of cloud cover. Imagery from two tiles was needed to cover the area of interest, which resulted in a total of four files used in the analysis.</span>
<span id="cb102-92"><a href="#cb102-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-93"><a href="#cb102-93" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>VNP46A1.A2021038.h08v05.001.2021039064328.h5</span>
<span id="cb102-94"><a href="#cb102-94" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>VNP46A1.A2021038.h08v06.001.2021039064329.h5</span>
<span id="cb102-95"><a href="#cb102-95" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>VNP46A1.A2021047.h08v05.001.2021048091106.h5</span>
<span id="cb102-96"><a href="#cb102-96" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>VNP46A1.A2021047.h08v06.001.2021048091105.h5</span>
<span id="cb102-97"><a href="#cb102-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-100"><a href="#cb102-100" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-101"><a href="#cb102-101" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb102-102"><a href="#cb102-102" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">component =</span> <span class="fu">c</span>(<span class="st">"VNP46A1"</span>, <span class="st">"A2021038"</span>, <span class="st">"h08"</span>, <span class="st">"v05"</span>, <span class="st">"2021039064328"</span>, <span class="st">"h5"</span>),</span>
<span id="cb102-103"><a href="#cb102-103" aria-hidden="true" tabindex="-1"></a>       <span class="at">meaning =</span> <span class="fu">c</span>(<span class="st">"name of data short product"</span>, <span class="st">"year (ie. 2021) and day of year (ie. 038) that the imagery was acquired"</span>, <span class="st">"horizontal tile number 8"</span>, <span class="st">"vertical tile number 5"</span>, <span class="st">"year (2021), day of year (039), and time (06:43:28 UTC) that the file contents were generated"</span>, <span class="st">"file extension: HDF-EOS5 (hierarchical data format - earth observing system)"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb102-104"><a href="#cb102-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"file name part"</span>, <span class="st">"explanation"</span>),</span>
<span id="cb102-105"><a href="#cb102-105" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"File name convention"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb102-106"><a href="#cb102-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>()</span>
<span id="cb102-107"><a href="#cb102-107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-108"><a href="#cb102-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-109"><a href="#cb102-109" aria-hidden="true" tabindex="-1"></a>The functions below takes an HDFEOS file as input and, from that file, reads the DNB_at_Sensor_Radiance_500m dataset. The R code using the <span class="co">[</span><span class="ot">`stars`</span><span class="co">](https://r-spatial.github.io/stars/)</span> package with Python code uses <span class="co">[</span><span class="ot">`GDAL`</span><span class="co">](https://gdal.org/api/python_bindings.html)</span> and <span class="co">[</span><span class="ot">`rasterio`</span><span class="co">](https://rasterio.readthedocs.io/en/stable/)</span>. The functions then reads the sinusoidal tile x/y positions, adjusts the dimensions, and sets the coordinate reference system.</span>
<span id="cb102-110"><a href="#cb102-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-111"><a href="#cb102-111" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Fuctions to read imagery data</span></span>
<span id="cb102-112"><a href="#cb102-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-113"><a href="#cb102-113" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-114"><a href="#cb102-114" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-115"><a href="#cb102-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-118"><a href="#cb102-118" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-119"><a href="#cb102-119" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-120"><a href="#cb102-120" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-121"><a href="#cb102-121" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-122"><a href="#cb102-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-123"><a href="#cb102-123" aria-hidden="true" tabindex="-1"></a><span class="co"># function to read and process imagery files as rasters using the stars package</span></span>
<span id="cb102-124"><a href="#cb102-124" aria-hidden="true" tabindex="-1"></a>read_dnb_file <span class="ot">&lt;-</span> <span class="cf">function</span>(file_name) {</span>
<span id="cb102-125"><a href="#cb102-125" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-126"><a href="#cb102-126" aria-hidden="true" tabindex="-1"></a>  <span class="co"># HDF dataset that contains the night lights band</span></span>
<span id="cb102-127"><a href="#cb102-127" aria-hidden="true" tabindex="-1"></a>  dataset_name <span class="ot">&lt;-</span> <span class="st">"//HDFEOS/GRIDS/VNP_Grid_DNB/Data_Fields/DNB_At_Sensor_Radiance_500m"</span></span>
<span id="cb102-128"><a href="#cb102-128" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-129"><a href="#cb102-129" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extract the horizontal and vertical tile coordinates from the metadata</span></span>
<span id="cb102-130"><a href="#cb102-130" aria-hidden="true" tabindex="-1"></a>  <span class="co"># this information is a string of text</span></span>
<span id="cb102-131"><a href="#cb102-131" aria-hidden="true" tabindex="-1"></a>  h_string <span class="ot">&lt;-</span> <span class="fu">gdal_metadata</span>(file_name)[<span class="dv">199</span>]</span>
<span id="cb102-132"><a href="#cb102-132" aria-hidden="true" tabindex="-1"></a>  v_string <span class="ot">&lt;-</span> <span class="fu">gdal_metadata</span>(file_name)[<span class="dv">219</span>]</span>
<span id="cb102-133"><a href="#cb102-133" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-134"><a href="#cb102-134" aria-hidden="true" tabindex="-1"></a>  <span class="co"># from the horizontal and vertical tile text, obtain the coordinate info as an integer</span></span>
<span id="cb102-135"><a href="#cb102-135" aria-hidden="true" tabindex="-1"></a>  tile_h <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_split</span>(h_string, <span class="st">"="</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)[[<span class="dv">2</span>]])</span>
<span id="cb102-136"><a href="#cb102-136" aria-hidden="true" tabindex="-1"></a>  tile_v <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_split</span>(v_string, <span class="st">"="</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)[[<span class="dv">2</span>]])</span>
<span id="cb102-137"><a href="#cb102-137" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-138"><a href="#cb102-138" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use tile coordinates to calculate a geographic bounding box</span></span>
<span id="cb102-139"><a href="#cb102-139" aria-hidden="true" tabindex="-1"></a>  west <span class="ot">&lt;-</span> (<span class="dv">10</span> <span class="sc">*</span> tile_h) <span class="sc">-</span> <span class="dv">180</span></span>
<span id="cb102-140"><a href="#cb102-140" aria-hidden="true" tabindex="-1"></a>  north <span class="ot">&lt;-</span> <span class="dv">90</span> <span class="sc">-</span> (<span class="dv">10</span> <span class="sc">*</span> tile_v)</span>
<span id="cb102-141"><a href="#cb102-141" aria-hidden="true" tabindex="-1"></a>  east <span class="ot">&lt;-</span> west <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb102-142"><a href="#cb102-142" aria-hidden="true" tabindex="-1"></a>  south <span class="ot">&lt;-</span> north <span class="sc">-</span> <span class="dv">10</span></span>
<span id="cb102-143"><a href="#cb102-143" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-144"><a href="#cb102-144" aria-hidden="true" tabindex="-1"></a>  delta <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="sc">/</span> <span class="dv">2400</span></span>
<span id="cb102-145"><a href="#cb102-145" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-146"><a href="#cb102-146" aria-hidden="true" tabindex="-1"></a>  <span class="co"># read the dataset</span></span>
<span id="cb102-147"><a href="#cb102-147" aria-hidden="true" tabindex="-1"></a>  dnb <span class="ot">&lt;-</span> <span class="fu">read_stars</span>(file_name, <span class="at">sub =</span> dataset_name)</span>
<span id="cb102-148"><a href="#cb102-148" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-149"><a href="#cb102-149" aria-hidden="true" tabindex="-1"></a>  <span class="co"># set the coordinate reference system</span></span>
<span id="cb102-150"><a href="#cb102-150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_crs</span>(dnb) <span class="ot">&lt;-</span> <span class="fu">st_crs</span>(<span class="dv">4326</span>)</span>
<span id="cb102-151"><a href="#cb102-151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>x<span class="sc">$</span>delta <span class="ot">&lt;-</span> delta</span>
<span id="cb102-152"><a href="#cb102-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>x<span class="sc">$</span>offset <span class="ot">&lt;-</span> west</span>
<span id="cb102-153"><a href="#cb102-153" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>y<span class="sc">$</span>delta <span class="ot">&lt;-</span> <span class="sc">-</span>delta</span>
<span id="cb102-154"><a href="#cb102-154" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_dimensions</span>(dnb)<span class="sc">$</span>y<span class="sc">$</span>offset <span class="ot">&lt;-</span> north</span>
<span id="cb102-155"><a href="#cb102-155" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-156"><a href="#cb102-156" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dnb)</span>
<span id="cb102-157"><a href="#cb102-157" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-158"><a href="#cb102-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-159"><a href="#cb102-159" aria-hidden="true" tabindex="-1"></a><span class="co"># load in files using the read_dnb function</span></span>
<span id="cb102-160"><a href="#cb102-160" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v05 <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5"</span>)</span>
<span id="cb102-161"><a href="#cb102-161" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v06  <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021038.h08v06.001.2021039064329.h5"</span>)</span>
<span id="cb102-162"><a href="#cb102-162" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v05 <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021047.h08v05.001.2021048091106.h5"</span>)</span>
<span id="cb102-163"><a href="#cb102-163" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v06 <span class="ot">&lt;-</span> <span class="fu">read_dnb_file</span>(<span class="at">file_name =</span> <span class="st">"data/VNP46A1/VNP46A1.A2021047.h08v06.001.2021048091105.h5"</span>)</span>
<span id="cb102-164"><a href="#cb102-164" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-165"><a href="#cb102-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-166"><a href="#cb102-166" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-167"><a href="#cb102-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-170"><a href="#cb102-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-171"><a href="#cb102-171" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-172"><a href="#cb102-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-173"><a href="#cb102-173" aria-hidden="true" tabindex="-1"></a><span class="co"># code from: https://blackmarble.gsfc.nasa.gov/tools/OpenHDF5.py</span></span>
<span id="cb102-174"><a href="#cb102-174" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_dnb_file_py (file_name):</span>
<span id="cb102-175"><a href="#cb102-175" aria-hidden="true" tabindex="-1"></a>    rasterFiles <span class="op">=</span> file_name</span>
<span id="cb102-176"><a href="#cb102-176" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-177"><a href="#cb102-177" aria-hidden="true" tabindex="-1"></a>    <span class="co">#Get File Name Prefix</span></span>
<span id="cb102-178"><a href="#cb102-178" aria-hidden="true" tabindex="-1"></a>    rasterFilePre <span class="op">=</span> rasterFiles[<span class="dv">8</span>:<span class="dv">16</span>] <span class="op">+</span> <span class="st">"_"</span> <span class="op">+</span> rasterFiles[<span class="dv">17</span>:<span class="dv">23</span>]</span>
<span id="cb102-179"><a href="#cb102-179" aria-hidden="true" tabindex="-1"></a>    rasterPath <span class="op">=</span> <span class="st">"data/VNP46A1/"</span> <span class="op">+</span> rasterFiles</span>
<span id="cb102-180"><a href="#cb102-180" aria-hidden="true" tabindex="-1"></a>    fileExtension <span class="op">=</span> <span class="st">"_BBOX.tif"</span></span>
<span id="cb102-181"><a href="#cb102-181" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-182"><a href="#cb102-182" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Open HDF file</span></span>
<span id="cb102-183"><a href="#cb102-183" aria-hidden="true" tabindex="-1"></a>    hdflayer <span class="op">=</span> gdal.Open(rasterPath, gdal.GA_ReadOnly)</span>
<span id="cb102-184"><a href="#cb102-184" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-185"><a href="#cb102-185" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Open raster layer</span></span>
<span id="cb102-186"><a href="#cb102-186" aria-hidden="true" tabindex="-1"></a>    subhdflayer <span class="op">=</span> hdflayer.GetSubDatasets()[<span class="dv">4</span>][<span class="dv">0</span>] <span class="co"># DNB_At_Sensor_Radiance_500m</span></span>
<span id="cb102-187"><a href="#cb102-187" aria-hidden="true" tabindex="-1"></a>    rlayer <span class="op">=</span> gdal.Open(subhdflayer, gdal.GA_ReadOnly)</span>
<span id="cb102-188"><a href="#cb102-188" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-189"><a href="#cb102-189" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Subset the Long Name</span></span>
<span id="cb102-190"><a href="#cb102-190" aria-hidden="true" tabindex="-1"></a>    outputName <span class="op">=</span> subhdflayer[<span class="dv">92</span>:]</span>
<span id="cb102-191"><a href="#cb102-191" aria-hidden="true" tabindex="-1"></a>    outputNameNoSpace <span class="op">=</span> outputName.strip().replace(<span class="st">" "</span>,<span class="st">"_"</span>).replace(<span class="st">"/"</span>,<span class="st">"_"</span>)</span>
<span id="cb102-192"><a href="#cb102-192" aria-hidden="true" tabindex="-1"></a>    outputNameFinal <span class="op">=</span> outputNameNoSpace <span class="op">+</span> <span class="st">"_"</span> <span class="op">+</span> rasterFilePre <span class="op">+</span> fileExtension</span>
<span id="cb102-193"><a href="#cb102-193" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-194"><a href="#cb102-194" aria-hidden="true" tabindex="-1"></a>    <span class="co"># outputFolder = "data/image"</span></span>
<span id="cb102-195"><a href="#cb102-195" aria-hidden="true" tabindex="-1"></a>    <span class="co"># outputRaster = outputFolder + outputNameFinal</span></span>
<span id="cb102-196"><a href="#cb102-196" aria-hidden="true" tabindex="-1"></a>    outputFolder <span class="op">=</span> <span class="st">"data/"</span></span>
<span id="cb102-197"><a href="#cb102-197" aria-hidden="true" tabindex="-1"></a>    outputPre <span class="op">=</span> <span class="st">"image"</span></span>
<span id="cb102-198"><a href="#cb102-198" aria-hidden="true" tabindex="-1"></a>    outputRaster <span class="op">=</span> outputFolder <span class="op">+</span> outputPre <span class="op">+</span> outputNameFinal</span>
<span id="cb102-199"><a href="#cb102-199" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-200"><a href="#cb102-200" aria-hidden="true" tabindex="-1"></a>    <span class="co"># collect bounding box coordinates</span></span>
<span id="cb102-201"><a href="#cb102-201" aria-hidden="true" tabindex="-1"></a>    HorizontalTileNumber <span class="op">=</span> <span class="bu">int</span>(rlayer.GetMetadata_Dict()[<span class="st">"HorizontalTileNumber"</span>])</span>
<span id="cb102-202"><a href="#cb102-202" aria-hidden="true" tabindex="-1"></a>    VerticalTileNumber <span class="op">=</span> <span class="bu">int</span>(rlayer.GetMetadata_Dict()[<span class="st">"VerticalTileNumber"</span>])</span>
<span id="cb102-203"><a href="#cb102-203" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-204"><a href="#cb102-204" aria-hidden="true" tabindex="-1"></a>    WestBoundCoord <span class="op">=</span> (<span class="dv">10</span><span class="op">*</span>HorizontalTileNumber) <span class="op">-</span> <span class="dv">180</span></span>
<span id="cb102-205"><a href="#cb102-205" aria-hidden="true" tabindex="-1"></a>    NorthBoundCoord <span class="op">=</span> <span class="dv">90</span><span class="op">-</span>(<span class="dv">10</span><span class="op">*</span>VerticalTileNumber)</span>
<span id="cb102-206"><a href="#cb102-206" aria-hidden="true" tabindex="-1"></a>    EastBoundCoord <span class="op">=</span> WestBoundCoord <span class="op">+</span> <span class="dv">10</span></span>
<span id="cb102-207"><a href="#cb102-207" aria-hidden="true" tabindex="-1"></a>    SouthBoundCoord <span class="op">=</span> NorthBoundCoord <span class="op">-</span> <span class="dv">10</span></span>
<span id="cb102-208"><a href="#cb102-208" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-209"><a href="#cb102-209" aria-hidden="true" tabindex="-1"></a>    <span class="co"># set crs</span></span>
<span id="cb102-210"><a href="#cb102-210" aria-hidden="true" tabindex="-1"></a>    EPSG <span class="op">=</span> <span class="st">"-a_srs EPSG:4326"</span> <span class="co">#WGS84</span></span>
<span id="cb102-211"><a href="#cb102-211" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-212"><a href="#cb102-212" aria-hidden="true" tabindex="-1"></a>    translateOptionText <span class="op">=</span> EPSG<span class="op">+</span><span class="st">" -a_ullr "</span> <span class="op">+</span> <span class="bu">str</span>(WestBoundCoord) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(NorthBoundCoord) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(EastBoundCoord) <span class="op">+</span> <span class="st">" "</span> <span class="op">+</span> <span class="bu">str</span>(SouthBoundCoord)</span>
<span id="cb102-213"><a href="#cb102-213" aria-hidden="true" tabindex="-1"></a>    translateoptions <span class="op">=</span> gdal.TranslateOptions(gdal.ParseCommandLine(translateOptionText))</span>
<span id="cb102-214"><a href="#cb102-214" aria-hidden="true" tabindex="-1"></a>    gdal.Translate(outputRaster, rlayer, options<span class="op">=</span>translateoptions)</span>
<span id="cb102-215"><a href="#cb102-215" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-216"><a href="#cb102-216" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(rasterio.<span class="bu">open</span>(outputRaster))</span>
<span id="cb102-217"><a href="#cb102-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-218"><a href="#cb102-218" aria-hidden="true" tabindex="-1"></a><span class="co"># load in files using the read_dnb function</span></span>
<span id="cb102-219"><a href="#cb102-219" aria-hidden="true" tabindex="-1"></a><span class="co"># this saves geotif files of the data</span></span>
<span id="cb102-220"><a href="#cb102-220" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v05_py <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021038.h08v05.001.2021039064328.h5"</span>)</span>
<span id="cb102-221"><a href="#cb102-221" aria-hidden="true" tabindex="-1"></a>dnb_feb7_h08v06_py  <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021038.h08v06.001.2021039064329.h5"</span>)</span>
<span id="cb102-222"><a href="#cb102-222" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v05_py <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021047.h08v05.001.2021048091106.h5"</span>)</span>
<span id="cb102-223"><a href="#cb102-223" aria-hidden="true" tabindex="-1"></a>dnb_feb16_h08v06_py <span class="op">=</span> read_dnb_file_py(file_name <span class="op">=</span> <span class="st">"VNP46A1.A2021047.h08v06.001.2021048091105.h5"</span>)</span>
<span id="cb102-224"><a href="#cb102-224" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-225"><a href="#cb102-225" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-226"><a href="#cb102-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-227"><a href="#cb102-227" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Merge imagery files</span></span>
<span id="cb102-228"><a href="#cb102-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-229"><a href="#cb102-229" aria-hidden="true" tabindex="-1"></a>Combine the tiles from each day, like stitching together quilt squares. The R code uses <span class="co">[</span><span class="ot">`st_mosaic()`</span><span class="co">](https://www.rdocumentation.org/packages/stars/versions/0.6-4/topics/st_mosaic)</span> and the Python code uses <span class="co">[</span><span class="ot">`rasterio.merge`</span><span class="co">](https://rasterio.readthedocs.io/en/stable/api/rasterio.merge.html)</span>.</span>
<span id="cb102-230"><a href="#cb102-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-231"><a href="#cb102-231" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-232"><a href="#cb102-232" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-233"><a href="#cb102-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-236"><a href="#cb102-236" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-237"><a href="#cb102-237" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-238"><a href="#cb102-238" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery before the storms</span></span>
<span id="cb102-239"><a href="#cb102-239" aria-hidden="true" tabindex="-1"></a>feb7_merged <span class="ot">&lt;-</span>  <span class="fu">st_mosaic</span>(dnb_feb7_h08v05, dnb_feb7_h08v06)</span>
<span id="cb102-240"><a href="#cb102-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-241"><a href="#cb102-241" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery after the storms</span></span>
<span id="cb102-242"><a href="#cb102-242" aria-hidden="true" tabindex="-1"></a>feb16_merged <span class="ot">&lt;-</span> <span class="fu">st_mosaic</span>(dnb_feb16_h08v05, dnb_feb16_h08v06)</span>
<span id="cb102-243"><a href="#cb102-243" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-244"><a href="#cb102-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-245"><a href="#cb102-245" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-246"><a href="#cb102-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-249"><a href="#cb102-249" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-250"><a href="#cb102-250" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-251"><a href="#cb102-251" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery before the storms</span></span>
<span id="cb102-252"><a href="#cb102-252" aria-hidden="true" tabindex="-1"></a>feb7_merged_py, transform <span class="op">=</span> merge([dnb_feb7_h08v05_py, dnb_feb7_h08v06_py])</span>
<span id="cb102-253"><a href="#cb102-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-254"><a href="#cb102-254" aria-hidden="true" tabindex="-1"></a><span class="co"># combined imagery after the storms</span></span>
<span id="cb102-255"><a href="#cb102-255" aria-hidden="true" tabindex="-1"></a>feb16_merged_py, transform <span class="op">=</span> merge([dnb_feb16_h08v05_py, dnb_feb16_h08v06_py])   </span>
<span id="cb102-256"><a href="#cb102-256" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-257"><a href="#cb102-257" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-258"><a href="#cb102-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-261"><a href="#cb102-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-262"><a href="#cb102-262" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb102-263"><a href="#cb102-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-264"><a href="#cb102-264" aria-hidden="true" tabindex="-1"></a><span class="co">#remove data not needed anymore</span></span>
<span id="cb102-265"><a href="#cb102-265" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(dnb_feb7_h08v05, dnb_feb7_h08v06, dnb_feb16_h08v05, dnb_feb16_h08v06)</span>
<span id="cb102-266"><a href="#cb102-266" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb102-267"><a href="#cb102-267" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-268"><a href="#cb102-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-269"><a href="#cb102-269" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Extract fill value from meta data and convert to NA in data arrays</span></span>
<span id="cb102-270"><a href="#cb102-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-271"><a href="#cb102-271" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-272"><a href="#cb102-272" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-273"><a href="#cb102-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-276"><a href="#cb102-276" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-277"><a href="#cb102-277" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-278"><a href="#cb102-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-279"><a href="#cb102-279" aria-hidden="true" tabindex="-1"></a><span class="co"># extract fill value from metadata</span></span>
<span id="cb102-280"><a href="#cb102-280" aria-hidden="true" tabindex="-1"></a>fill_value_string <span class="ot">&lt;-</span> <span class="fu">gdal_metadata</span>(<span class="st">"data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5"</span>)[<span class="dv">38</span>]</span>
<span id="cb102-281"><a href="#cb102-281" aria-hidden="true" tabindex="-1"></a>fill_value <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">str_split</span>(fill_value_string, <span class="st">"="</span>, <span class="at">simplify =</span> <span class="cn">TRUE</span>)[[<span class="dv">2</span>]])</span>
<span id="cb102-282"><a href="#cb102-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-283"><a href="#cb102-283" aria-hidden="true" tabindex="-1"></a><span class="co"># convert fill value of 65535 to NA</span></span>
<span id="cb102-284"><a href="#cb102-284" aria-hidden="true" tabindex="-1"></a>feb7_merged[feb7_merged <span class="sc">==</span> fill_value] <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb102-285"><a href="#cb102-285" aria-hidden="true" tabindex="-1"></a>feb16_merged[feb16_merged <span class="sc">==</span> fill_value] <span class="ot">=</span> <span class="cn">NA</span></span>
<span id="cb102-286"><a href="#cb102-286" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-287"><a href="#cb102-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-288"><a href="#cb102-288" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-289"><a href="#cb102-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-292"><a href="#cb102-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-293"><a href="#cb102-293" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-294"><a href="#cb102-294" aria-hidden="true" tabindex="-1"></a>ds <span class="op">=</span> gdal.Open(<span class="st">'data/VNP46A1/VNP46A1.A2021038.h08v05.001.2021039064328.h5'</span>, gdal.GA_ReadOnly)</span>
<span id="cb102-295"><a href="#cb102-295" aria-hidden="true" tabindex="-1"></a>meta <span class="op">=</span> ds.GetMetadata()</span>
<span id="cb102-296"><a href="#cb102-296" aria-hidden="true" tabindex="-1"></a>fill_value_py <span class="op">=</span> <span class="bu">int</span>(meta[<span class="st">'HDFEOS_GRIDS_VNP_Grid_DNB_Data_Fields_DNB_At_Sensor_Radiance_500m__FillValue'</span>])</span>
<span id="cb102-297"><a href="#cb102-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-298"><a href="#cb102-298" aria-hidden="true" tabindex="-1"></a><span class="co"># convert fill value to nan</span></span>
<span id="cb102-299"><a href="#cb102-299" aria-hidden="true" tabindex="-1"></a>feb7_merged_py <span class="op">=</span> np.where(feb7_merged_py <span class="op">==</span> fill_value_py, np.nan, feb7_merged_py)</span>
<span id="cb102-300"><a href="#cb102-300" aria-hidden="true" tabindex="-1"></a>feb7_merged_metadata <span class="op">=</span> dnb_feb7_h08v05_py.meta.copy()</span>
<span id="cb102-301"><a href="#cb102-301" aria-hidden="true" tabindex="-1"></a>feb7_merged_metadata.update(width<span class="op">=</span>feb7_merged_py.shape[<span class="dv">2</span>], height<span class="op">=</span>feb7_merged_py.shape[<span class="dv">1</span>], transform<span class="op">=</span>transform, dtype<span class="op">=</span><span class="st">'float32'</span>)</span>
<span id="cb102-302"><a href="#cb102-302" aria-hidden="true" tabindex="-1"></a>feb7_merged_dataset <span class="op">=</span> rasterio.io.MemoryFile().<span class="bu">open</span>(<span class="op">**</span>feb7_merged_metadata)</span>
<span id="cb102-303"><a href="#cb102-303" aria-hidden="true" tabindex="-1"></a>feb7_merged_dataset.write(feb7_merged_py)</span>
<span id="cb102-304"><a href="#cb102-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-305"><a href="#cb102-305" aria-hidden="true" tabindex="-1"></a>feb16_merged_py <span class="op">=</span> np.where(feb16_merged_py <span class="op">==</span> fill_value_py, np.nan, feb16_merged_py)</span>
<span id="cb102-306"><a href="#cb102-306" aria-hidden="true" tabindex="-1"></a>feb16_merged_metadata <span class="op">=</span> dnb_feb16_h08v05_py.meta.copy()</span>
<span id="cb102-307"><a href="#cb102-307" aria-hidden="true" tabindex="-1"></a>feb16_merged_metadata.update(width<span class="op">=</span>feb16_merged_py.shape[<span class="dv">2</span>], height<span class="op">=</span>feb16_merged_py.shape[<span class="dv">1</span>], transform<span class="op">=</span>transform, dtype<span class="op">=</span><span class="st">'float64'</span>)</span>
<span id="cb102-308"><a href="#cb102-308" aria-hidden="true" tabindex="-1"></a>feb16_merged_dataset <span class="op">=</span> rasterio.io.MemoryFile().<span class="bu">open</span>(<span class="op">**</span>feb16_merged_metadata)</span>
<span id="cb102-309"><a href="#cb102-309" aria-hidden="true" tabindex="-1"></a>feb16_merged_dataset.write(feb16_merged_py)</span>
<span id="cb102-310"><a href="#cb102-310" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-311"><a href="#cb102-311" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-312"><a href="#cb102-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-313"><a href="#cb102-313" aria-hidden="true" tabindex="-1"></a>According to the metadata, the fill value is <span class="in">`r fill_value`</span>.</span>
<span id="cb102-314"><a href="#cb102-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-315"><a href="#cb102-315" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Crop to ROI</span></span>
<span id="cb102-316"><a href="#cb102-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-317"><a href="#cb102-317" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-318"><a href="#cb102-318" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-319"><a href="#cb102-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-322"><a href="#cb102-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-323"><a href="#cb102-323" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-324"><a href="#cb102-324" aria-hidden="true" tabindex="-1"></a><span class="co"># set region on interest</span></span>
<span id="cb102-325"><a href="#cb102-325" aria-hidden="true" tabindex="-1"></a>roi_coordinates <span class="ot">&lt;-</span> <span class="fu">st_polygon</span>(<span class="fu">list</span>(<span class="fu">rbind</span>(<span class="fu">c</span>(<span class="sc">-</span><span class="fl">96.5</span>,<span class="dv">29</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">96.5</span>,<span class="fl">30.5</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">94.5</span>,<span class="fl">30.5</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">94.5</span>,<span class="dv">29</span>), <span class="fu">c</span>(<span class="sc">-</span><span class="fl">96.5</span>,<span class="dv">29</span>))))</span>
<span id="cb102-326"><a href="#cb102-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-327"><a href="#cb102-327" aria-hidden="true" tabindex="-1"></a><span class="co"># set coordinate reference system</span></span>
<span id="cb102-328"><a href="#cb102-328" aria-hidden="true" tabindex="-1"></a>roi_sfc <span class="ot">&lt;-</span> <span class="fu">st_sfc</span>(roi_coordinates, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb102-329"><a href="#cb102-329" aria-hidden="true" tabindex="-1"></a><span class="co"># crs 4326 matches the crs of the satellite imagery</span></span>
<span id="cb102-330"><a href="#cb102-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-331"><a href="#cb102-331" aria-hidden="true" tabindex="-1"></a>feb7_roi <span class="ot">&lt;-</span> <span class="fu">st_crop</span>(feb7_merged, roi_sfc)</span>
<span id="cb102-332"><a href="#cb102-332" aria-hidden="true" tabindex="-1"></a>feb16_roi <span class="ot">&lt;-</span> <span class="fu">st_crop</span>(feb16_merged, roi_sfc)</span>
<span id="cb102-333"><a href="#cb102-333" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-334"><a href="#cb102-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-335"><a href="#cb102-335" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-336"><a href="#cb102-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-339"><a href="#cb102-339" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-340"><a href="#cb102-340" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-341"><a href="#cb102-341" aria-hidden="true" tabindex="-1"></a>roi_coordinates_py <span class="op">=</span> [(<span class="op">-</span><span class="fl">96.5</span>, <span class="dv">29</span>), (<span class="op">-</span><span class="fl">96.5</span>, <span class="fl">30.5</span>), (<span class="op">-</span><span class="fl">94.5</span>, <span class="fl">30.5</span>), (<span class="op">-</span><span class="fl">94.5</span>, <span class="dv">29</span>), (<span class="op">-</span><span class="fl">96.5</span>, <span class="dv">29</span>)]</span>
<span id="cb102-342"><a href="#cb102-342" aria-hidden="true" tabindex="-1"></a>min_x, min_y <span class="op">=</span> <span class="bu">min</span>(coord[<span class="dv">0</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py), <span class="bu">min</span>(coord[<span class="dv">1</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py)</span>
<span id="cb102-343"><a href="#cb102-343" aria-hidden="true" tabindex="-1"></a>max_x, max_y <span class="op">=</span> <span class="bu">max</span>(coord[<span class="dv">0</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py), <span class="bu">max</span>(coord[<span class="dv">1</span>] <span class="cf">for</span> coord <span class="kw">in</span> roi_coordinates_py)</span>
<span id="cb102-344"><a href="#cb102-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-345"><a href="#cb102-345" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the window of the ROI</span></span>
<span id="cb102-346"><a href="#cb102-346" aria-hidden="true" tabindex="-1"></a>window <span class="op">=</span> feb7_merged_dataset.window(min_x, min_y, max_x, max_y)</span>
<span id="cb102-347"><a href="#cb102-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-348"><a href="#cb102-348" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the data within the ROI</span></span>
<span id="cb102-349"><a href="#cb102-349" aria-hidden="true" tabindex="-1"></a>feb7_roi_py <span class="op">=</span> feb7_merged_dataset.read(window<span class="op">=</span>window)</span>
<span id="cb102-350"><a href="#cb102-350" aria-hidden="true" tabindex="-1"></a>feb16_roi_py <span class="op">=</span> feb16_merged_dataset.read(window<span class="op">=</span>window)</span>
<span id="cb102-351"><a href="#cb102-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-352"><a href="#cb102-352" aria-hidden="true" tabindex="-1"></a><span class="co"># Update the transform and profile</span></span>
<span id="cb102-353"><a href="#cb102-353" aria-hidden="true" tabindex="-1"></a>transform <span class="op">=</span> feb7_merged_dataset.window_transform(window)</span>
<span id="cb102-354"><a href="#cb102-354" aria-hidden="true" tabindex="-1"></a>profile <span class="op">=</span> feb7_merged_dataset.profile</span>
<span id="cb102-355"><a href="#cb102-355" aria-hidden="true" tabindex="-1"></a>profile.update({</span>
<span id="cb102-356"><a href="#cb102-356" aria-hidden="true" tabindex="-1"></a>    <span class="st">'transform'</span>: transform,</span>
<span id="cb102-357"><a href="#cb102-357" aria-hidden="true" tabindex="-1"></a>    <span class="st">'width'</span>: window.width,</span>
<span id="cb102-358"><a href="#cb102-358" aria-hidden="true" tabindex="-1"></a>    <span class="st">'height'</span>: window.height,</span>
<span id="cb102-359"><a href="#cb102-359" aria-hidden="true" tabindex="-1"></a>    <span class="st">'crs'</span>: feb7_merged_dataset.crs</span>
<span id="cb102-360"><a href="#cb102-360" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb102-361"><a href="#cb102-361" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb102-362"><a href="#cb102-362" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-363"><a href="#cb102-363" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-364"><a href="#cb102-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-365"><a href="#cb102-365" aria-hidden="true" tabindex="-1"></a><span class="fu">### Road and Building data</span></span>
<span id="cb102-366"><a href="#cb102-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-367"><a href="#cb102-367" aria-hidden="true" tabindex="-1"></a>Building and road data was obtained from <span class="co">[</span><span class="ot">OpenStreetMap</span><span class="co">](https://www.openstreetmap.org/#map=5/38.007/-95.844)</span>. Subsets of the data were provided as GeoPackages (.gpkg) for the Houston metropolitan area. SQL queries were used to subset highways and major roads from the the road file and residential buildings from the building file.</span>
<span id="cb102-368"><a href="#cb102-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-369"><a href="#cb102-369" aria-hidden="true" tabindex="-1"></a>Since vehicles can be a significant source of observable nighttime light, a 200 meter highway buffer was removed from the blackout mask area. This step prevents areas that experienced reduced traffic from being identified as areas with power outages.</span>
<span id="cb102-370"><a href="#cb102-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-371"><a href="#cb102-371" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-372"><a href="#cb102-372" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-373"><a href="#cb102-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-376"><a href="#cb102-376" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-377"><a href="#cb102-377" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-378"><a href="#cb102-378" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-379"><a href="#cb102-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-380"><a href="#cb102-380" aria-hidden="true" tabindex="-1"></a><span class="co"># load in roads package and select specifically highways</span></span>
<span id="cb102-381"><a href="#cb102-381" aria-hidden="true" tabindex="-1"></a>query_roads <span class="ot">&lt;-</span> <span class="st">"SELECT * FROM gis_osm_roads_free_1 WHERE fclass in ('motorway', 'motorway_link', 'primary', 'primary_link')"</span></span>
<span id="cb102-382"><a href="#cb102-382" aria-hidden="true" tabindex="-1"></a>highways <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/gis_osm_roads_free_1.gpkg"</span>, <span class="at">query =</span> query_roads)</span>
<span id="cb102-383"><a href="#cb102-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-384"><a href="#cb102-384" aria-hidden="true" tabindex="-1"></a><span class="co"># transform to the correct projection</span></span>
<span id="cb102-385"><a href="#cb102-385" aria-hidden="true" tabindex="-1"></a>highways_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(highways, <span class="at">crs =</span> <span class="dv">3083</span>)</span>
<span id="cb102-386"><a href="#cb102-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-387"><a href="#cb102-387" aria-hidden="true" tabindex="-1"></a><span class="co"># create a 200 meter buffer</span></span>
<span id="cb102-388"><a href="#cb102-388" aria-hidden="true" tabindex="-1"></a>highways_buffer_3083 <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(highways_3083, <span class="at">dist =</span> <span class="dv">200</span>) </span>
<span id="cb102-389"><a href="#cb102-389" aria-hidden="true" tabindex="-1"></a>highways_buffer_3083 <span class="ot">&lt;-</span> <span class="fu">st_union</span>(highways_buffer_3083)</span>
<span id="cb102-390"><a href="#cb102-390" aria-hidden="true" tabindex="-1"></a>highways_buffer_4326 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(highways_buffer_3083, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb102-391"><a href="#cb102-391" aria-hidden="true" tabindex="-1"></a>highways_buffer_4326 <span class="ot">&lt;-</span> <span class="fu">st_make_valid</span>(highways_buffer_4326)</span>
<span id="cb102-392"><a href="#cb102-392" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-393"><a href="#cb102-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-394"><a href="#cb102-394" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-395"><a href="#cb102-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-398"><a href="#cb102-398" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-399"><a href="#cb102-399" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-400"><a href="#cb102-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-401"><a href="#cb102-401" aria-hidden="true" tabindex="-1"></a><span class="co"># load in roads package and select specifically highways</span></span>
<span id="cb102-402"><a href="#cb102-402" aria-hidden="true" tabindex="-1"></a>query_roads_py <span class="op">=</span> <span class="st">"SELECT * </span><span class="ch">\</span></span>
<span id="cb102-403"><a href="#cb102-403" aria-hidden="true" tabindex="-1"></a><span class="st">FROM gis_osm_roads_free_1 </span><span class="ch">\</span></span>
<span id="cb102-404"><a href="#cb102-404" aria-hidden="true" tabindex="-1"></a><span class="st">WHERE fclass in ('motorway', 'motorway_link', 'primary', 'primary_link')"</span></span>
<span id="cb102-405"><a href="#cb102-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-406"><a href="#cb102-406" aria-hidden="true" tabindex="-1"></a>highways_py <span class="op">=</span> gpd.read_file(<span class="st">"data/gis_osm_roads_free_1.gpkg"</span>, query <span class="op">=</span> query_roads_py)</span>
<span id="cb102-407"><a href="#cb102-407" aria-hidden="true" tabindex="-1"></a>highways_py <span class="op">=</span> highways_py[(highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'motorway'</span>) <span class="op">|</span> (highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'motorway_link'</span>) <span class="op">|</span> (highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'primary'</span>) <span class="op">|</span> (highways_py[<span class="st">'fclass'</span>] <span class="op">==</span> <span class="st">'primary_link'</span>)]</span>
<span id="cb102-408"><a href="#cb102-408" aria-hidden="true" tabindex="-1"></a>highways_3083_py <span class="op">=</span> highways_py.to_crs(<span class="dv">3083</span>)</span>
<span id="cb102-409"><a href="#cb102-409" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-410"><a href="#cb102-410" aria-hidden="true" tabindex="-1"></a>highway_buffer_3083_py <span class="op">=</span> highways_3083_py.copy()</span>
<span id="cb102-411"><a href="#cb102-411" aria-hidden="true" tabindex="-1"></a>highway_buffer_3083_py[<span class="st">'geometry'</span>] <span class="op">=</span> highway_buffer_3083_py[<span class="st">'geometry'</span>].<span class="bu">buffer</span>(<span class="dv">200</span>)</span>
<span id="cb102-412"><a href="#cb102-412" aria-hidden="true" tabindex="-1"></a>highway_buffer_3083_py <span class="op">=</span> gpd.GeoDataFrame(geometry<span class="op">=</span>[highway_buffer_3083_py.geometry.unary_union], crs<span class="op">=</span><span class="dv">3083</span>)</span>
<span id="cb102-413"><a href="#cb102-413" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-414"><a href="#cb102-414" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-415"><a href="#cb102-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-416"><a href="#cb102-416" aria-hidden="true" tabindex="-1"></a>Close inspection of the building data shows many NA values in the <span class="in">`type`</span> field. When looking at the data on the map, most NA values appear to be residential buildings, but some non-residential buildings such as schools are included.</span>
<span id="cb102-417"><a href="#cb102-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-418"><a href="#cb102-418" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-419"><a href="#cb102-419" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-420"><a href="#cb102-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-423"><a href="#cb102-423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-424"><a href="#cb102-424" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-425"><a href="#cb102-425" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-426"><a href="#cb102-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-427"><a href="#cb102-427" aria-hidden="true" tabindex="-1"></a><span class="co"># read in buildings data and select only residential</span></span>
<span id="cb102-428"><a href="#cb102-428" aria-hidden="true" tabindex="-1"></a>query_buildings <span class="ot">&lt;-</span> <span class="st">"SELECT * FROM gis_osm_buildings_a_free_1 WHERE (type IS NULL AND name IS NULL) OR type in ('residential', 'apartments', 'house', 'static_caravan', 'detached')"</span></span>
<span id="cb102-429"><a href="#cb102-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-430"><a href="#cb102-430" aria-hidden="true" tabindex="-1"></a><span class="co"># read buildings gpkg into object, and transform to correct projection</span></span>
<span id="cb102-431"><a href="#cb102-431" aria-hidden="true" tabindex="-1"></a>buildings <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/gis_osm_buildings_a_free_1.gpkg"</span>, <span class="at">query =</span> query_buildings)</span>
<span id="cb102-432"><a href="#cb102-432" aria-hidden="true" tabindex="-1"></a>buildings_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(buildings, <span class="at">crs =</span> <span class="dv">3083</span>) <span class="co"># xx</span></span>
<span id="cb102-433"><a href="#cb102-433" aria-hidden="true" tabindex="-1"></a>buildings_4326 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(buildings, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb102-434"><a href="#cb102-434" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-435"><a href="#cb102-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-436"><a href="#cb102-436" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-437"><a href="#cb102-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-440"><a href="#cb102-440" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-441"><a href="#cb102-441" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-442"><a href="#cb102-442" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-443"><a href="#cb102-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-444"><a href="#cb102-444" aria-hidden="true" tabindex="-1"></a>buildings_4326_py <span class="op">=</span> gpd.read_file(<span class="st">'data/gis_osm_buildings_a_free_1.gpkg'</span>)</span>
<span id="cb102-445"><a href="#cb102-445" aria-hidden="true" tabindex="-1"></a>buildings_4326_py <span class="op">=</span> buildings_4326_py[((buildings_4326_py[<span class="st">'type'</span>].isna()) <span class="op">&amp;</span> (buildings_4326_py[<span class="st">'name'</span>].isna())) <span class="op">|</span> buildings_4326_py[<span class="st">'type'</span>].isin([<span class="st">'residential'</span>, <span class="st">'apartments'</span>, <span class="st">'house'</span>, <span class="st">'static_caravan'</span>, <span class="st">'detached'</span>])]</span>
<span id="cb102-446"><a href="#cb102-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-447"><a href="#cb102-447" aria-hidden="true" tabindex="-1"></a>buildings_3083_py <span class="op">=</span> buildings_4326_py.to_crs(<span class="dv">3083</span>)</span>
<span id="cb102-448"><a href="#cb102-448" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-449"><a href="#cb102-449" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-450"><a href="#cb102-450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-453"><a href="#cb102-453" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-454"><a href="#cb102-454" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb102-455"><a href="#cb102-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-456"><a href="#cb102-456" aria-hidden="true" tabindex="-1"></a><span class="co">#remove data not needed anymore</span></span>
<span id="cb102-457"><a href="#cb102-457" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(highways_py, buildings)</span>
<span id="cb102-458"><a href="#cb102-458" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb102-459"><a href="#cb102-459" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-460"><a href="#cb102-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-461"><a href="#cb102-461" aria-hidden="true" tabindex="-1"></a><span class="fu">### Census data</span></span>
<span id="cb102-462"><a href="#cb102-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-463"><a href="#cb102-463" aria-hidden="true" tabindex="-1"></a>Data pertaining to race, age, and income demographics for Texas census tract was obtained from the U.S. Census Bureau's <span class="co">[</span><span class="ot">American Community Survey</span><span class="co">](https://www.census.gov/programs-surveys/acs)</span>. The data used in this analysis is from 2019 and was cropped to the region of interest. Specific variables evaluated include:</span>
<span id="cb102-464"><a href="#cb102-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-465"><a href="#cb102-465" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Race</span>
<span id="cb102-466"><a href="#cb102-466" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>white</span>
<span id="cb102-467"><a href="#cb102-467" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>black</span>
<span id="cb102-468"><a href="#cb102-468" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>native american</span>
<span id="cb102-469"><a href="#cb102-469" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>hispanic / latino</span>
<span id="cb102-470"><a href="#cb102-470" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Age</span>
<span id="cb102-471"><a href="#cb102-471" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>65 and older</span>
<span id="cb102-472"><a href="#cb102-472" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>children under 18</span>
<span id="cb102-473"><a href="#cb102-473" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Income</span>
<span id="cb102-474"><a href="#cb102-474" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>households below poverty level</span>
<span id="cb102-475"><a href="#cb102-475" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>median income</span>
<span id="cb102-476"><a href="#cb102-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-477"><a href="#cb102-477" aria-hidden="true" tabindex="-1"></a>While the race and age data provides the population of each variable for each census tract, these values were normalized by the total population of the census tract. The poverty data was normalized by number of households in each census tract.</span>
<span id="cb102-478"><a href="#cb102-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-479"><a href="#cb102-479" aria-hidden="true" tabindex="-1"></a>::: callout-note</span>
<span id="cb102-480"><a href="#cb102-480" aria-hidden="true" tabindex="-1"></a>The ACS data consists of the layers listed below, with each layer containing subsets of data as documented in the <span class="co">[</span><span class="ot">ACS Metadata</span><span class="co">](https://www2.census.gov/geo/docs/maps-data/data/tiger/prejoined/ACSMetadata2011.txt)</span>.</span>
<span id="cb102-481"><a href="#cb102-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-484"><a href="#cb102-484" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-485"><a href="#cb102-485" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb102-486"><a href="#cb102-486" aria-hidden="true" tabindex="-1"></a>acs_layer_names <span class="ot">&lt;-</span> <span class="fu">st_layers</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>)</span>
<span id="cb102-487"><a href="#cb102-487" aria-hidden="true" tabindex="-1"></a>acs_layer_names <span class="ot">&lt;-</span> acs_layer_names[<span class="dv">1</span>]</span>
<span id="cb102-488"><a href="#cb102-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-489"><a href="#cb102-489" aria-hidden="true" tabindex="-1"></a>rows <span class="ot">&lt;-</span> <span class="fu">length</span>(acs_layer_names<span class="sc">$</span>name) <span class="sc">/</span> <span class="dv">2</span></span>
<span id="cb102-490"><a href="#cb102-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-491"><a href="#cb102-491" aria-hidden="true" tabindex="-1"></a>col1 <span class="ot">&lt;-</span> acs_layer_names<span class="sc">$</span>name[<span class="dv">1</span><span class="sc">:</span>rows]</span>
<span id="cb102-492"><a href="#cb102-492" aria-hidden="true" tabindex="-1"></a>col2 <span class="ot">&lt;-</span> acs_layer_names<span class="sc">$</span>name[(rows <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span>(rows <span class="sc">*</span> <span class="dv">2</span>)]</span>
<span id="cb102-493"><a href="#cb102-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-494"><a href="#cb102-494" aria-hidden="true" tabindex="-1"></a>acs_layer_names_table <span class="ot">&lt;-</span> <span class="fu">kable</span>(<span class="fu">list</span>(col1, col2),</span>
<span id="cb102-495"><a href="#cb102-495" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col.names =</span> <span class="st">"Layer name"</span>, <span class="at">caption =</span> <span class="st">"American Commnity Surey Layer Names"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-496"><a href="#cb102-496" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>()</span>
<span id="cb102-497"><a href="#cb102-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-498"><a href="#cb102-498" aria-hidden="true" tabindex="-1"></a>acs_layer_names_table</span>
<span id="cb102-499"><a href="#cb102-499" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-500"><a href="#cb102-500" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-501"><a href="#cb102-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-502"><a href="#cb102-502" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Census tract geometry</span></span>
<span id="cb102-503"><a href="#cb102-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-504"><a href="#cb102-504" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-505"><a href="#cb102-505" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-506"><a href="#cb102-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-509"><a href="#cb102-509" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-510"><a href="#cb102-510" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-511"><a href="#cb102-511" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-512"><a href="#cb102-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-513"><a href="#cb102-513" aria-hidden="true" tabindex="-1"></a><span class="co"># read in census tract geometry</span></span>
<span id="cb102-514"><a href="#cb102-514" aria-hidden="true" tabindex="-1"></a>acs_geoms <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb102-515"><a href="#cb102-515" aria-hidden="true" tabindex="-1"></a>                     <span class="at">layer =</span> <span class="st">"ACS_2019_5YR_TRACT_48_TEXAS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-516"><a href="#cb102-516" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>(STATEFP<span class="sc">:</span>Shape_Area))</span>
<span id="cb102-517"><a href="#cb102-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-518"><a href="#cb102-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-519"><a href="#cb102-519" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-520"><a href="#cb102-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-523"><a href="#cb102-523" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-524"><a href="#cb102-524" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-525"><a href="#cb102-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-526"><a href="#cb102-526" aria-hidden="true" tabindex="-1"></a><span class="co"># census tract geometry</span></span>
<span id="cb102-527"><a href="#cb102-527" aria-hidden="true" tabindex="-1"></a>acs_geoms_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-528"><a href="#cb102-528" aria-hidden="true" tabindex="-1"></a>                          layer <span class="op">=</span> <span class="st">"ACS_2019_5YR_TRACT_48_TEXAS"</span>)</span>
<span id="cb102-529"><a href="#cb102-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-530"><a href="#cb102-530" aria-hidden="true" tabindex="-1"></a>acs_geoms_py_3083 <span class="op">=</span> acs_geoms_py.to_crs(<span class="dv">3083</span>)</span>
<span id="cb102-531"><a href="#cb102-531" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-532"><a href="#cb102-532" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-533"><a href="#cb102-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-534"><a href="#cb102-534" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Age and sex layer</span></span>
<span id="cb102-535"><a href="#cb102-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-536"><a href="#cb102-536" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-537"><a href="#cb102-537" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-538"><a href="#cb102-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-541"><a href="#cb102-541" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-542"><a href="#cb102-542" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-543"><a href="#cb102-543" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-544"><a href="#cb102-544" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-545"><a href="#cb102-545" aria-hidden="true" tabindex="-1"></a><span class="co"># read in variables of interest</span></span>
<span id="cb102-546"><a href="#cb102-546" aria-hidden="true" tabindex="-1"></a>acs_age_sex <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb102-547"><a href="#cb102-547" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X01_AGE_AND_SEX"</span>)</span>
<span id="cb102-548"><a href="#cb102-548" aria-hidden="true" tabindex="-1"></a>acs_age_sex_df <span class="ot">&lt;-</span> acs_age_sex <span class="sc">%&gt;%</span></span>
<span id="cb102-549"><a href="#cb102-549" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb102-550"><a href="#cb102-550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop_from_age_sex =</span> acs_age_sex<span class="sc">$</span>B01001e1,</span>
<span id="cb102-551"><a href="#cb102-551" aria-hidden="true" tabindex="-1"></a>         <span class="at">median_age =</span> acs_age_sex<span class="sc">$</span>B01002e1,</span>
<span id="cb102-552"><a href="#cb102-552" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_65_66 =</span> acs_age_sex<span class="sc">$</span>B01001e20,</span>
<span id="cb102-553"><a href="#cb102-553" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_67_to_69 =</span> acs_age_sex<span class="sc">$</span>B01001e21,</span>
<span id="cb102-554"><a href="#cb102-554" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_70_to_74 =</span> acs_age_sex<span class="sc">$</span>B01001e22,</span>
<span id="cb102-555"><a href="#cb102-555" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_75_to_79 =</span> acs_age_sex<span class="sc">$</span>B01001e23,</span>
<span id="cb102-556"><a href="#cb102-556" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_80_to_84 =</span> acs_age_sex<span class="sc">$</span>B01001e24,</span>
<span id="cb102-557"><a href="#cb102-557" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_male_85_and_over =</span> acs_age_sex<span class="sc">$</span>B01001e25,</span>
<span id="cb102-558"><a href="#cb102-558" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_65_66 =</span> acs_age_sex<span class="sc">$</span>B01001e44,</span>
<span id="cb102-559"><a href="#cb102-559" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_67_to_69 =</span> acs_age_sex<span class="sc">$</span>B01001e45,</span>
<span id="cb102-560"><a href="#cb102-560" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_70_to_74 =</span> acs_age_sex<span class="sc">$</span>B01001e46,</span>
<span id="cb102-561"><a href="#cb102-561" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_75_to_79 =</span> acs_age_sex<span class="sc">$</span>B01001e47,</span>
<span id="cb102-562"><a href="#cb102-562" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_80_to_84 =</span> acs_age_sex<span class="sc">$</span>B01001e48,</span>
<span id="cb102-563"><a href="#cb102-563" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_female_85_and_over =</span> acs_age_sex<span class="sc">$</span>B01001e49,</span>
<span id="cb102-564"><a href="#cb102-564" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_65_and_over =</span> pop_male_65_66 <span class="sc">+</span> pop_male_67_to_69 <span class="sc">+</span> pop_male_70_to_74 <span class="sc">+</span> pop_male_75_to_79 <span class="sc">+</span> pop_male_80_to_84 <span class="sc">+</span> pop_male_85_and_over <span class="sc">+</span> pop_female_65_66 <span class="sc">+</span> pop_female_67_to_69 <span class="sc">+</span> pop_female_70_to_74 <span class="sc">+</span> pop_female_75_to_79 <span class="sc">+</span> pop_female_80_to_84 <span class="sc">+</span> pop_female_85_and_over,</span>
<span id="cb102-565"><a href="#cb102-565" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_65_and_over =</span> (pop_65_and_over <span class="sc">/</span> total_pop_from_age_sex) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-566"><a href="#cb102-566" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID, total_pop_from_age_sex, pop_65_and_over, pct_65_and_over)</span>
<span id="cb102-567"><a href="#cb102-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-568"><a href="#cb102-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-569"><a href="#cb102-569" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-570"><a href="#cb102-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-573"><a href="#cb102-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-574"><a href="#cb102-574" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-575"><a href="#cb102-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-576"><a href="#cb102-576" aria-hidden="true" tabindex="-1"></a><span class="co"># data for layers of interest</span></span>
<span id="cb102-577"><a href="#cb102-577" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-578"><a href="#cb102-578" aria-hidden="true" tabindex="-1"></a>                            layer <span class="op">=</span> <span class="st">"X01_AGE_AND_SEX"</span>)</span>
<span id="cb102-579"><a href="#cb102-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-580"><a href="#cb102-580" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-581"><a href="#cb102-581" aria-hidden="true" tabindex="-1"></a>                            layer <span class="op">=</span> <span class="st">"X01_AGE_AND_SEX"</span>)</span>
<span id="cb102-582"><a href="#cb102-582" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> acs_age_sex_py.rename(columns<span class="op">=</span>{<span class="st">'B01001e1'</span> : <span class="st">'total_pop_from_age_sex'</span>, </span>
<span id="cb102-583"><a href="#cb102-583" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01002e1'</span> : <span class="st">'median_age'</span>,</span>
<span id="cb102-584"><a href="#cb102-584" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e20'</span> : <span class="st">'pop_male_65_66'</span>,</span>
<span id="cb102-585"><a href="#cb102-585" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e21'</span> : <span class="st">'pop_male_67_to_69'</span>,</span>
<span id="cb102-586"><a href="#cb102-586" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e22'</span> : <span class="st">'pop_male_70_to_74'</span>,</span>
<span id="cb102-587"><a href="#cb102-587" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e23'</span> : <span class="st">'pop_male_75_to_79'</span>,</span>
<span id="cb102-588"><a href="#cb102-588" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e24'</span> : <span class="st">'pop_male_80_to_84'</span>,</span>
<span id="cb102-589"><a href="#cb102-589" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e25'</span> : <span class="st">'pop_male_85_and_over'</span>,</span>
<span id="cb102-590"><a href="#cb102-590" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e44'</span> : <span class="st">'pop_female_65_66'</span>,</span>
<span id="cb102-591"><a href="#cb102-591" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e45'</span> : <span class="st">'pop_female_67_to_69'</span>,</span>
<span id="cb102-592"><a href="#cb102-592" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e46'</span> : <span class="st">'pop_female_70_to_74'</span>,</span>
<span id="cb102-593"><a href="#cb102-593" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e47'</span> : <span class="st">'pop_female_75_to_79'</span>,</span>
<span id="cb102-594"><a href="#cb102-594" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e48'</span> : <span class="st">'pop_female_80_to_84'</span>,</span>
<span id="cb102-595"><a href="#cb102-595" aria-hidden="true" tabindex="-1"></a>                                                <span class="st">'B01001e49'</span> : <span class="st">'pop_female_85_and_over'</span>})</span>
<span id="cb102-596"><a href="#cb102-596" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py[<span class="st">'pop_65_and_over'</span>] <span class="op">=</span> acs_age_sex_py[<span class="st">'pop_male_65_66'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_67_to_69'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_70_to_74'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_75_to_79'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_80_to_84'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_male_85_and_over'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_65_66'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_67_to_69'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_70_to_74'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_75_to_79'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_80_to_84'</span>] <span class="op">+</span> acs_age_sex_py[<span class="st">'pop_female_85_and_over'</span>]</span>
<span id="cb102-597"><a href="#cb102-597" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py[<span class="st">'pct_65_and_over'</span>] <span class="op">=</span> (acs_age_sex_py[<span class="st">'pop_65_and_over'</span>] <span class="op">/</span> acs_age_sex_py[<span class="st">'total_pop_from_age_sex'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-598"><a href="#cb102-598" aria-hidden="true" tabindex="-1"></a>acs_age_sex_py <span class="op">=</span> acs_age_sex_py[[<span class="st">'GEOID'</span>, <span class="st">'total_pop_from_age_sex'</span>, <span class="st">'pop_65_and_over'</span>, <span class="st">'pct_65_and_over'</span>]]</span>
<span id="cb102-599"><a href="#cb102-599" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-600"><a href="#cb102-600" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-601"><a href="#cb102-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-602"><a href="#cb102-602" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Race layer</span></span>
<span id="cb102-603"><a href="#cb102-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-604"><a href="#cb102-604" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-605"><a href="#cb102-605" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-606"><a href="#cb102-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-609"><a href="#cb102-609" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-610"><a href="#cb102-610" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-611"><a href="#cb102-611" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-612"><a href="#cb102-612" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-613"><a href="#cb102-613" aria-hidden="true" tabindex="-1"></a>acs_race <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb102-614"><a href="#cb102-614" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X02_RACE"</span>)</span>
<span id="cb102-615"><a href="#cb102-615" aria-hidden="true" tabindex="-1"></a>acs_race_df <span class="ot">&lt;-</span> acs_race <span class="sc">%&gt;%</span></span>
<span id="cb102-616"><a href="#cb102-616" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb102-617"><a href="#cb102-617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop_from_race =</span> acs_race<span class="sc">$</span>B02001e1,</span>
<span id="cb102-618"><a href="#cb102-618" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_white =</span> acs_race<span class="sc">$</span>B02001e2,</span>
<span id="cb102-619"><a href="#cb102-619" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_white =</span> (pop_white <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb102-620"><a href="#cb102-620" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_black =</span> acs_race<span class="sc">$</span>B02001e3,</span>
<span id="cb102-621"><a href="#cb102-621" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_black =</span> (pop_black <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb102-622"><a href="#cb102-622" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_am_native =</span> acs_race<span class="sc">$</span>B02001e4,</span>
<span id="cb102-623"><a href="#cb102-623" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_am_native =</span> (pop_am_native <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb102-624"><a href="#cb102-624" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_asian =</span> acs_race<span class="sc">$</span>B02001e5,</span>
<span id="cb102-625"><a href="#cb102-625" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_asian =</span> (pop_asian <span class="sc">/</span> total_pop_from_race) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb102-626"><a href="#cb102-626" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-627"><a href="#cb102-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-628"><a href="#cb102-628" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-629"><a href="#cb102-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-632"><a href="#cb102-632" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-633"><a href="#cb102-633" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-634"><a href="#cb102-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-635"><a href="#cb102-635" aria-hidden="true" tabindex="-1"></a>acs_race_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-636"><a href="#cb102-636" aria-hidden="true" tabindex="-1"></a>                         layer <span class="op">=</span> <span class="st">"X02_RACE"</span>)</span>
<span id="cb102-637"><a href="#cb102-637" aria-hidden="true" tabindex="-1"></a>acs_race_py <span class="op">=</span> acs_race_py.rename(columns<span class="op">=</span>{<span class="st">'B02001e1'</span> : <span class="st">'total_pop_from_race'</span>,</span>
<span id="cb102-638"><a href="#cb102-638" aria-hidden="true" tabindex="-1"></a>                                          <span class="st">'B02001e2'</span> : <span class="st">'pop_white'</span>})</span>
<span id="cb102-639"><a href="#cb102-639" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_white'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_white'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-640"><a href="#cb102-640" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pop_black'</span>] <span class="op">=</span> acs_race_py[<span class="st">'B02001e3'</span>]</span>
<span id="cb102-641"><a href="#cb102-641" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_black'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_black'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-642"><a href="#cb102-642" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pop_am_native'</span>] <span class="op">=</span> acs_race_py[<span class="st">'B02001e4'</span>]</span>
<span id="cb102-643"><a href="#cb102-643" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_am_native'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_am_native'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-644"><a href="#cb102-644" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pop_asian'</span>] <span class="op">=</span> acs_race_py[<span class="st">'B02001e5'</span>]</span>
<span id="cb102-645"><a href="#cb102-645" aria-hidden="true" tabindex="-1"></a>acs_race_py[<span class="st">'pct_asian'</span>] <span class="op">=</span> (acs_race_py[<span class="st">'pop_asian'</span>] <span class="op">/</span> acs_race_py[<span class="st">'total_pop_from_race'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-646"><a href="#cb102-646" aria-hidden="true" tabindex="-1"></a>acs_race_py <span class="op">=</span> acs_race_py[[<span class="st">'GEOID'</span>, <span class="st">'total_pop_from_race'</span>, <span class="st">'pop_white'</span>, <span class="st">'pct_white'</span>, <span class="st">'pop_black'</span>, <span class="st">'pct_black'</span>, <span class="st">'pop_am_native'</span>, <span class="st">'pct_am_native'</span>, <span class="st">'pop_asian'</span>, <span class="st">'pct_asian'</span>]]</span>
<span id="cb102-647"><a href="#cb102-647" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-648"><a href="#cb102-648" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-649"><a href="#cb102-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-650"><a href="#cb102-650" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Hispanic latino layer</span></span>
<span id="cb102-651"><a href="#cb102-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-652"><a href="#cb102-652" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-653"><a href="#cb102-653" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-654"><a href="#cb102-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-657"><a href="#cb102-657" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-658"><a href="#cb102-658" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-659"><a href="#cb102-659" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-660"><a href="#cb102-660" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-661"><a href="#cb102-661" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb102-662"><a href="#cb102-662" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X03_HISPANIC_OR_LATINO_ORIGIN"</span>)</span>
<span id="cb102-663"><a href="#cb102-663" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_df <span class="ot">&lt;-</span> acs_hispanic_latino <span class="sc">%&gt;%</span></span>
<span id="cb102-664"><a href="#cb102-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb102-665"><a href="#cb102-665" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_pop_from_hispanic =</span> acs_hispanic_latino<span class="sc">$</span>B03002e1,</span>
<span id="cb102-666"><a href="#cb102-666" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop_hispanic_latino =</span> acs_hispanic_latino<span class="sc">$</span>B03002e12,</span>
<span id="cb102-667"><a href="#cb102-667" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_hispanic_latino =</span> (pop_hispanic_latino <span class="sc">/</span> total_pop_from_hispanic) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb102-668"><a href="#cb102-668" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-669"><a href="#cb102-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-670"><a href="#cb102-670" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-671"><a href="#cb102-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-674"><a href="#cb102-674" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-675"><a href="#cb102-675" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-676"><a href="#cb102-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-677"><a href="#cb102-677" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-678"><a href="#cb102-678" aria-hidden="true" tabindex="-1"></a>                                    layer <span class="op">=</span> <span class="st">"X03_HISPANIC_OR_LATINO_ORIGIN"</span>)</span>
<span id="cb102-679"><a href="#cb102-679" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py[<span class="st">'total_pop_from_hispanic'</span>] <span class="op">=</span> acs_hispanic_latino_py[<span class="st">'B03002e1'</span>]</span>
<span id="cb102-680"><a href="#cb102-680" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py[<span class="st">'pop_hispanic_latino'</span>] <span class="op">=</span> acs_hispanic_latino_py[<span class="st">'B03002e12'</span>]</span>
<span id="cb102-681"><a href="#cb102-681" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py[<span class="st">'pct_hispanic_latino'</span>] <span class="op">=</span> (acs_hispanic_latino_py[<span class="st">'pop_hispanic_latino'</span>] <span class="op">/</span> acs_hispanic_latino_py[<span class="st">'total_pop_from_hispanic'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-682"><a href="#cb102-682" aria-hidden="true" tabindex="-1"></a>acs_hispanic_latino_py <span class="op">=</span> acs_hispanic_latino_py[[<span class="st">'GEOID'</span>, <span class="st">'total_pop_from_hispanic'</span>, <span class="st">'pop_hispanic_latino'</span>, <span class="st">'pct_hispanic_latino'</span>]]</span>
<span id="cb102-683"><a href="#cb102-683" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-684"><a href="#cb102-684" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-685"><a href="#cb102-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-686"><a href="#cb102-686" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Children and household relationship</span></span>
<span id="cb102-687"><a href="#cb102-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-688"><a href="#cb102-688" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-689"><a href="#cb102-689" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-690"><a href="#cb102-690" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-693"><a href="#cb102-693" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-694"><a href="#cb102-694" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-695"><a href="#cb102-695" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-696"><a href="#cb102-696" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-697"><a href="#cb102-697" aria-hidden="true" tabindex="-1"></a>acs_children_household <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb102-698"><a href="#cb102-698" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X09_CHILDREN_HOUSEHOLD_RELATIONSHIP"</span>)</span>
<span id="cb102-699"><a href="#cb102-699" aria-hidden="true" tabindex="-1"></a>acs_children_household_df <span class="ot">&lt;-</span> acs_children_household <span class="sc">%&gt;%</span></span>
<span id="cb102-700"><a href="#cb102-700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb102-701"><a href="#cb102-701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pop_children_under_18 =</span> acs_children_household<span class="sc">$</span>B09002e1,</span>
<span id="cb102-702"><a href="#cb102-702" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_children_under_18 =</span> (pop_children_under_18 <span class="sc">/</span> acs_hispanic_latino<span class="sc">$</span>B03002e1) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb102-703"><a href="#cb102-703" aria-hidden="true" tabindex="-1"></a><span class="co"># the children_household_relationship layer did not contain a total populaiton field</span></span>
<span id="cb102-704"><a href="#cb102-704" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-705"><a href="#cb102-705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-706"><a href="#cb102-706" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-707"><a href="#cb102-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-710"><a href="#cb102-710" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-711"><a href="#cb102-711" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-712"><a href="#cb102-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-713"><a href="#cb102-713" aria-hidden="true" tabindex="-1"></a>acs_children_household_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-714"><a href="#cb102-714" aria-hidden="true" tabindex="-1"></a>                                       layer <span class="op">=</span> <span class="st">"X09_CHILDREN_HOUSEHOLD_RELATIONSHIP"</span>)</span>
<span id="cb102-715"><a href="#cb102-715" aria-hidden="true" tabindex="-1"></a>acs_children_household_py[<span class="st">'pop_children_under_18'</span>] <span class="op">=</span> acs_children_household_py[<span class="st">'B09002e1'</span>]</span>
<span id="cb102-716"><a href="#cb102-716" aria-hidden="true" tabindex="-1"></a>acs_children_household_py[<span class="st">'pct_children_under_18'</span>] <span class="op">=</span> (acs_children_household_py[<span class="st">'pop_children_under_18'</span>] <span class="op">/</span> acs_hispanic_latino_py[<span class="st">'total_pop_from_hispanic'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-717"><a href="#cb102-717" aria-hidden="true" tabindex="-1"></a>acs_children_household_py <span class="op">=</span> acs_children_household_py[[<span class="st">'GEOID'</span>, <span class="st">'pop_children_under_18'</span>, <span class="st">'pct_children_under_18'</span>]]</span>
<span id="cb102-718"><a href="#cb102-718" aria-hidden="true" tabindex="-1"></a><span class="co"># the children_household_relationship layer did not contain a total populaiton field</span></span>
<span id="cb102-719"><a href="#cb102-719" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-720"><a href="#cb102-720" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-721"><a href="#cb102-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-722"><a href="#cb102-722" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Poverty layer</span></span>
<span id="cb102-723"><a href="#cb102-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-724"><a href="#cb102-724" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-725"><a href="#cb102-725" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-726"><a href="#cb102-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-729"><a href="#cb102-729" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-730"><a href="#cb102-730" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-731"><a href="#cb102-731" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-732"><a href="#cb102-732" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-733"><a href="#cb102-733" aria-hidden="true" tabindex="-1"></a>acs_poverty <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb102-734"><a href="#cb102-734" aria-hidden="true" tabindex="-1"></a>                       <span class="at">layer =</span> <span class="st">"X17_POVERTY"</span>)</span>
<span id="cb102-735"><a href="#cb102-735" aria-hidden="true" tabindex="-1"></a>acs_poverty_df <span class="ot">&lt;-</span> acs_poverty <span class="sc">%&gt;%</span></span>
<span id="cb102-736"><a href="#cb102-736" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb102-737"><a href="#cb102-737" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_households =</span> acs_poverty<span class="sc">$</span>B17017e1,</span>
<span id="cb102-738"><a href="#cb102-738" aria-hidden="true" tabindex="-1"></a>         <span class="at">num_households_below_poverty =</span> acs_poverty<span class="sc">$</span>B17017e2,</span>
<span id="cb102-739"><a href="#cb102-739" aria-hidden="true" tabindex="-1"></a>         <span class="at">pct_households_below_poverty =</span> (num_households_below_poverty <span class="sc">/</span> total_households) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb102-740"><a href="#cb102-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-741"><a href="#cb102-741" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-742"><a href="#cb102-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-743"><a href="#cb102-743" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-744"><a href="#cb102-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-747"><a href="#cb102-747" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-748"><a href="#cb102-748" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-749"><a href="#cb102-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-750"><a href="#cb102-750" aria-hidden="true" tabindex="-1"></a>acs_poverty_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-751"><a href="#cb102-751" aria-hidden="true" tabindex="-1"></a>                            layer <span class="op">=</span> <span class="st">"X17_POVERTY"</span>)</span>
<span id="cb102-752"><a href="#cb102-752" aria-hidden="true" tabindex="-1"></a>acs_poverty_py[<span class="st">'total_households'</span>] <span class="op">=</span> acs_poverty_py[<span class="st">'B17017e1'</span>]</span>
<span id="cb102-753"><a href="#cb102-753" aria-hidden="true" tabindex="-1"></a>acs_poverty_py[<span class="st">'num_households_below_poverty'</span>] <span class="op">=</span> acs_poverty_py[<span class="st">'B17017e2'</span>]</span>
<span id="cb102-754"><a href="#cb102-754" aria-hidden="true" tabindex="-1"></a>acs_poverty_py[<span class="st">'pct_households_below_poverty'</span>] <span class="op">=</span> (acs_poverty_py[<span class="st">'num_households_below_poverty'</span>] <span class="op">/</span> acs_poverty_py[<span class="st">'total_households'</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-755"><a href="#cb102-755" aria-hidden="true" tabindex="-1"></a>acs_poverty_py <span class="op">=</span> acs_poverty_py[[<span class="st">'GEOID'</span>, <span class="st">'total_households'</span>, <span class="st">'num_households_below_poverty'</span>, <span class="st">'pct_households_below_poverty'</span>]]</span>
<span id="cb102-756"><a href="#cb102-756" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-757"><a href="#cb102-757" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-758"><a href="#cb102-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-759"><a href="#cb102-759" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Income layer</span></span>
<span id="cb102-760"><a href="#cb102-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-761"><a href="#cb102-761" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-762"><a href="#cb102-762" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-763"><a href="#cb102-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-766"><a href="#cb102-766" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-767"><a href="#cb102-767" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-768"><a href="#cb102-768" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-769"><a href="#cb102-769" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-770"><a href="#cb102-770" aria-hidden="true" tabindex="-1"></a>acs_income <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">"data/ACS_2019_5YR_TRACT_48_TEXAS.gdb"</span>,</span>
<span id="cb102-771"><a href="#cb102-771" aria-hidden="true" tabindex="-1"></a>                      <span class="at">layer =</span> <span class="st">"X19_INCOME"</span>)</span>
<span id="cb102-772"><a href="#cb102-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-773"><a href="#cb102-773" aria-hidden="true" tabindex="-1"></a>acs_income_df <span class="ot">&lt;-</span> acs_income <span class="sc">%&gt;%</span></span>
<span id="cb102-774"><a href="#cb102-774" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(GEOID) <span class="sc">%&gt;%</span></span>
<span id="cb102-775"><a href="#cb102-775" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_income =</span> acs_income<span class="sc">$</span>B19013e1)</span>
<span id="cb102-776"><a href="#cb102-776" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-777"><a href="#cb102-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-778"><a href="#cb102-778" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-779"><a href="#cb102-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-782"><a href="#cb102-782" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-783"><a href="#cb102-783" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-784"><a href="#cb102-784" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-785"><a href="#cb102-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-786"><a href="#cb102-786" aria-hidden="true" tabindex="-1"></a>acs_income_py <span class="op">=</span> gpd.read_file(<span class="st">'data/ACS_2019_5YR_TRACT_48_TEXAS.gdb'</span>,</span>
<span id="cb102-787"><a href="#cb102-787" aria-hidden="true" tabindex="-1"></a>                           layer <span class="op">=</span> <span class="st">"X19_INCOME"</span>)</span>
<span id="cb102-788"><a href="#cb102-788" aria-hidden="true" tabindex="-1"></a>acs_income_py[<span class="st">'median_income'</span>] <span class="op">=</span> acs_income_py[<span class="st">'B19013e1'</span>]</span>
<span id="cb102-789"><a href="#cb102-789" aria-hidden="true" tabindex="-1"></a>acs_income_py <span class="op">=</span> acs_income_py[[<span class="st">'GEOID'</span>, <span class="st">'median_income'</span>]]</span>
<span id="cb102-790"><a href="#cb102-790" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-791"><a href="#cb102-791" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-792"><a href="#cb102-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-793"><a href="#cb102-793" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Join census track data</span></span>
<span id="cb102-794"><a href="#cb102-794" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-795"><a href="#cb102-795" aria-hidden="true" tabindex="-1"></a>Next, the selected race, age, and income layers are joined. The resulting data set contains the geometry of each census tract and corresponding socioeconomic data.</span>
<span id="cb102-796"><a href="#cb102-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-797"><a href="#cb102-797" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-798"><a href="#cb102-798" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-799"><a href="#cb102-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-802"><a href="#cb102-802" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-803"><a href="#cb102-803" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-804"><a href="#cb102-804" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-805"><a href="#cb102-805" aria-hidden="true" tabindex="-1"></a><span class="co">#| output: false</span></span>
<span id="cb102-806"><a href="#cb102-806" aria-hidden="true" tabindex="-1"></a>census_tract_data <span class="ot">&lt;-</span> acs_geoms <span class="sc">%&gt;%</span></span>
<span id="cb102-807"><a href="#cb102-807" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_age_sex_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-808"><a href="#cb102-808" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_race_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-809"><a href="#cb102-809" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_hispanic_latino_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-810"><a href="#cb102-810" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_children_household_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-811"><a href="#cb102-811" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_poverty_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-812"><a href="#cb102-812" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(acs_income_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"GEOID_Data"</span> <span class="ot">=</span> <span class="st">"GEOID"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb102-813"><a href="#cb102-813" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">total_population =</span> total_pop_from_age_sex) <span class="sc">%&gt;%</span></span>
<span id="cb102-814"><a href="#cb102-814" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(total_pop_from_race, total_pop_from_hispanic))</span>
<span id="cb102-815"><a href="#cb102-815" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-816"><a href="#cb102-816" aria-hidden="true" tabindex="-1"></a>census_tract_data_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(census_tract_data, <span class="dv">3083</span>)</span>
<span id="cb102-817"><a href="#cb102-817" aria-hidden="true" tabindex="-1"></a>census_tract_data_4326 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(census_tract_data_3083, <span class="at">crs =</span> <span class="dv">4326</span>)</span>
<span id="cb102-818"><a href="#cb102-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-819"><a href="#cb102-819" aria-hidden="true" tabindex="-1"></a>census_tract_data_roi_4326 <span class="ot">&lt;-</span> <span class="fu">st_crop</span>(census_tract_data_4326, roi_sfc)</span>
<span id="cb102-820"><a href="#cb102-820" aria-hidden="true" tabindex="-1"></a>census_tract_data_roi_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(census_tract_data_roi_4326, <span class="at">crs =</span> <span class="dv">3083</span>)</span>
<span id="cb102-821"><a href="#cb102-821" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-822"><a href="#cb102-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-823"><a href="#cb102-823" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-824"><a href="#cb102-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-827"><a href="#cb102-827" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-828"><a href="#cb102-828" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-829"><a href="#cb102-829" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-830"><a href="#cb102-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-831"><a href="#cb102-831" aria-hidden="true" tabindex="-1"></a><span class="co"># join data layers to census tract geometry</span></span>
<span id="cb102-832"><a href="#cb102-832" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> acs_geoms_py_3083 <span class="op">=</span> acs_geoms_py.to_crs(<span class="dv">3083</span>).copy()</span>
<span id="cb102-833"><a href="#cb102-833" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_age_sex_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb102-834"><a href="#cb102-834" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_race_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb102-835"><a href="#cb102-835" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.drop(columns<span class="op">=</span>[<span class="st">'GEOID_x'</span>, <span class="st">'GEOID_y'</span>])</span>
<span id="cb102-836"><a href="#cb102-836" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_hispanic_latino_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb102-837"><a href="#cb102-837" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_children_household_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb102-838"><a href="#cb102-838" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.drop(columns<span class="op">=</span>[<span class="st">'GEOID_x'</span>, <span class="st">'GEOID_y'</span>])</span>
<span id="cb102-839"><a href="#cb102-839" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_poverty_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb102-840"><a href="#cb102-840" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.merge(acs_income_py, how<span class="op">=</span><span class="st">'left'</span>, left_on<span class="op">=</span><span class="st">'GEOID_Data'</span>, right_on<span class="op">=</span><span class="st">'GEOID'</span>)</span>
<span id="cb102-841"><a href="#cb102-841" aria-hidden="true" tabindex="-1"></a>census_tract_data_py <span class="op">=</span> census_tract_data_py.drop(columns<span class="op">=</span>[<span class="st">'GEOID_x'</span>, <span class="st">'GEOID_y'</span>])</span>
<span id="cb102-842"><a href="#cb102-842" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-843"><a href="#cb102-843" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-844"><a href="#cb102-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-845"><a href="#cb102-845" aria-hidden="true" tabindex="-1"></a><span class="fu">## Create blackout mask</span></span>
<span id="cb102-846"><a href="#cb102-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-847"><a href="#cb102-847" aria-hidden="true" tabindex="-1"></a>An array was created to represent the difference in night light intensity by subtracting the post-storm imagery from the pre-storm imagery. Next, a blackout threshold is created to identify areas where night light intensity decreased by more than 200 nW cm-2 sr-1. For this analysis, differences in night light intensity are assumed to be caused by the power outages. Areas where the change in light intensity met the threshold were converted to vector format and the highway buffer area was removed.</span>
<span id="cb102-848"><a href="#cb102-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-849"><a href="#cb102-849" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-850"><a href="#cb102-850" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-851"><a href="#cb102-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-854"><a href="#cb102-854" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-855"><a href="#cb102-855" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-856"><a href="#cb102-856" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-857"><a href="#cb102-857" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-858"><a href="#cb102-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-859"><a href="#cb102-859" aria-hidden="true" tabindex="-1"></a>difference <span class="ot">&lt;-</span> feb7_roi <span class="sc">-</span> feb16_roi</span>
<span id="cb102-860"><a href="#cb102-860" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="dv">200</span></span>
<span id="cb102-861"><a href="#cb102-861" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-862"><a href="#cb102-862" aria-hidden="true" tabindex="-1"></a>blackout_threshold <span class="ot">&lt;-</span> difference</span>
<span id="cb102-863"><a href="#cb102-863" aria-hidden="true" tabindex="-1"></a>blackout_threshold[blackout_threshold <span class="sc">&lt;=</span> threshold] <span class="ot">=</span> <span class="cn">NA</span> <span class="co"># not a blackout area</span></span>
<span id="cb102-864"><a href="#cb102-864" aria-hidden="true" tabindex="-1"></a>blackout_threshold[blackout_threshold <span class="sc">&gt;</span> threshold] <span class="ot">=</span> <span class="cn">TRUE</span> <span class="co"># a blackout area</span></span>
<span id="cb102-865"><a href="#cb102-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-866"><a href="#cb102-866" aria-hidden="true" tabindex="-1"></a><span class="co"># vectorize the blackout mask</span></span>
<span id="cb102-867"><a href="#cb102-867" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(blackout_threshold)</span>
<span id="cb102-868"><a href="#cb102-868" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector <span class="ot">&lt;-</span> <span class="fu">st_make_valid</span>(blackout_threshold_vector)</span>
<span id="cb102-869"><a href="#cb102-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-870"><a href="#cb102-870" aria-hidden="true" tabindex="-1"></a><span class="co"># remove the highway buffer from our vectorized blackout mask using st_difference()</span></span>
<span id="cb102-871"><a href="#cb102-871" aria-hidden="true" tabindex="-1"></a>blackout_mask <span class="ot">&lt;-</span> <span class="fu">st_difference</span>(blackout_threshold_vector, highways_buffer_4326)</span>
<span id="cb102-872"><a href="#cb102-872" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-873"><a href="#cb102-873" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-874"><a href="#cb102-874" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-875"><a href="#cb102-875" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-878"><a href="#cb102-878" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-879"><a href="#cb102-879" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-880"><a href="#cb102-880" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-881"><a href="#cb102-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-882"><a href="#cb102-882" aria-hidden="true" tabindex="-1"></a>difference_py <span class="op">=</span> feb7_roi_py <span class="op">-</span> feb16_roi_py</span>
<span id="cb102-883"><a href="#cb102-883" aria-hidden="true" tabindex="-1"></a>threshold_py <span class="op">=</span> <span class="dv">200</span></span>
<span id="cb102-884"><a href="#cb102-884" aria-hidden="true" tabindex="-1"></a>blackout_threshold_py <span class="op">=</span> np.where(difference_py <span class="op">&lt;=</span> threshold_py, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb102-885"><a href="#cb102-885" aria-hidden="true" tabindex="-1"></a>blackout_threshold_dataset <span class="op">=</span> rasterio.io.MemoryFile().<span class="bu">open</span>(<span class="op">**</span>profile)</span>
<span id="cb102-886"><a href="#cb102-886" aria-hidden="true" tabindex="-1"></a>blackout_threshold_dataset.write(blackout_threshold_py)</span>
<span id="cb102-887"><a href="#cb102-887" aria-hidden="true" tabindex="-1"></a>blackout_threshold_data_py <span class="op">=</span> blackout_threshold_dataset.read(<span class="dv">1</span>).astype(<span class="st">'int16'</span>)</span>
<span id="cb102-888"><a href="#cb102-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-889"><a href="#cb102-889" aria-hidden="true" tabindex="-1"></a><span class="co"># get shapes as GeoJSON-like objects</span></span>
<span id="cb102-890"><a href="#cb102-890" aria-hidden="true" tabindex="-1"></a>shapes_gen <span class="op">=</span> shapes(blackout_threshold_data_py, transform<span class="op">=</span>blackout_threshold_dataset.transform, mask <span class="op">=</span> blackout_threshold_data_py <span class="op">!=</span> <span class="dv">0</span>)</span>
<span id="cb102-891"><a href="#cb102-891" aria-hidden="true" tabindex="-1"></a><span class="co"># convert shapes to Shapely geometries</span></span>
<span id="cb102-892"><a href="#cb102-892" aria-hidden="true" tabindex="-1"></a>geometries <span class="op">=</span> [shape(shape_json) <span class="cf">for</span> shape_json, _ <span class="kw">in</span> shapes_gen]</span>
<span id="cb102-893"><a href="#cb102-893" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-894"><a href="#cb102-894" aria-hidden="true" tabindex="-1"></a><span class="co"># create a GeoDataFrame from Shapely geometries</span></span>
<span id="cb102-895"><a href="#cb102-895" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector_py <span class="op">=</span> gpd.GeoDataFrame(geometry<span class="op">=</span>geometries, crs<span class="op">=</span>blackout_threshold_dataset.crs)</span>
<span id="cb102-896"><a href="#cb102-896" aria-hidden="true" tabindex="-1"></a>blackout_threshold_vector_3083_py <span class="op">=</span> blackout_threshold_vector_py.to_crs(<span class="dv">3083</span>)</span>
<span id="cb102-897"><a href="#cb102-897" aria-hidden="true" tabindex="-1"></a>blackout_mask_3083_py <span class="op">=</span> gpd.overlay(blackout_threshold_vector_3083_py, highway_buffer_3083_py, how<span class="op">=</span><span class="st">'difference'</span>)</span>
<span id="cb102-898"><a href="#cb102-898" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-899"><a href="#cb102-899" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-900"><a href="#cb102-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-903"><a href="#cb102-903" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-904"><a href="#cb102-904" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb102-905"><a href="#cb102-905" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-906"><a href="#cb102-906" aria-hidden="true" tabindex="-1"></a><span class="co">#remove data not needed anymore</span></span>
<span id="cb102-907"><a href="#cb102-907" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(difference, blackout_threshold, feb7_merged, feb16_merged, feb7_roi_py, feb16_roi_py)</span>
<span id="cb102-908"><a href="#cb102-908" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()</span>
<span id="cb102-909"><a href="#cb102-909" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-910"><a href="#cb102-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-911"><a href="#cb102-911" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualize</span></span>
<span id="cb102-912"><a href="#cb102-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-913"><a href="#cb102-913" aria-hidden="true" tabindex="-1"></a>xx</span>
<span id="cb102-914"><a href="#cb102-914" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-915"><a href="#cb102-915" aria-hidden="true" tabindex="-1"></a><span class="fu">## Identify houses without power</span></span>
<span id="cb102-916"><a href="#cb102-916" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-917"><a href="#cb102-917" aria-hidden="true" tabindex="-1"></a>Houses that lost electricity were identified based on a spatial intersection of the building data and the blackout mask. In this analysis, houses that did not overlap the blackout mask were identified as not losing power (or had power restored by February 16th).</span>
<span id="cb102-918"><a href="#cb102-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-919"><a href="#cb102-919" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-920"><a href="#cb102-920" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-921"><a href="#cb102-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-924"><a href="#cb102-924" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-925"><a href="#cb102-925" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-926"><a href="#cb102-926" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-927"><a href="#cb102-927" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-928"><a href="#cb102-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-929"><a href="#cb102-929" aria-hidden="true" tabindex="-1"></a><span class="co"># use spatial subsetting to find all the residential buildings in blackout areas</span></span>
<span id="cb102-930"><a href="#cb102-930" aria-hidden="true" tabindex="-1"></a>blackout_mask_3083 <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(blackout_mask, <span class="at">crs =</span> <span class="dv">3083</span>)</span>
<span id="cb102-931"><a href="#cb102-931" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083 <span class="ot">&lt;-</span> buildings_3083[blackout_mask_3083, op <span class="ot">=</span> st_intersects]</span>
<span id="cb102-932"><a href="#cb102-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-933"><a href="#cb102-933" aria-hidden="true" tabindex="-1"></a>number_of_buildings_without_power <span class="ot">&lt;-</span> <span class="fu">nrow</span>(blackout_buildings_3083)</span>
<span id="cb102-934"><a href="#cb102-934" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-935"><a href="#cb102-935" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-936"><a href="#cb102-936" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-937"><a href="#cb102-937" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-940"><a href="#cb102-940" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-941"><a href="#cb102-941" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-942"><a href="#cb102-942" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-943"><a href="#cb102-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-944"><a href="#cb102-944" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083_py <span class="op">=</span> gpd.sjoin(buildings_3083_py, blackout_mask_3083_py, how<span class="op">=</span><span class="st">'inner'</span>, op<span class="op">=</span><span class="st">'intersects'</span>)</span>
<span id="cb102-945"><a href="#cb102-945" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083_py <span class="op">=</span> blackout_buildings_3083_py.drop_duplicates(subset<span class="op">=</span>[<span class="st">'osm_id'</span>])</span>
<span id="cb102-946"><a href="#cb102-946" aria-hidden="true" tabindex="-1"></a>blackout_buildings_3083_py <span class="op">=</span> blackout_buildings_3083_py.drop(columns<span class="op">=</span>[<span class="st">'index_right'</span>])</span>
<span id="cb102-947"><a href="#cb102-947" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-948"><a href="#cb102-948" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-949"><a href="#cb102-949" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-950"><a href="#cb102-950" aria-hidden="true" tabindex="-1"></a>Based on this analysis, an estimated <span class="in">`r format(number_of_buildings_without_power, big.mark = ",")`</span> houses in the Houston metropolitan area were without power on February 16, 2021.</span>
<span id="cb102-951"><a href="#cb102-951" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-952"><a href="#cb102-952" aria-hidden="true" tabindex="-1"></a><span class="fu">## Aggregate residential building outages to census tract level</span></span>
<span id="cb102-953"><a href="#cb102-953" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-954"><a href="#cb102-954" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-955"><a href="#cb102-955" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-956"><a href="#cb102-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-959"><a href="#cb102-959" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-960"><a href="#cb102-960" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-961"><a href="#cb102-961" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-962"><a href="#cb102-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-963"><a href="#cb102-963" aria-hidden="true" tabindex="-1"></a><span class="co"># use a spatial join to attach the census tract data to the building data</span></span>
<span id="cb102-964"><a href="#cb102-964" aria-hidden="true" tabindex="-1"></a>blackout_buildings_census_3083 <span class="ot">&lt;-</span> <span class="fu">st_join</span>(blackout_buildings_3083, census_tract_data_3083) <span class="sc">%&gt;%</span></span>
<span id="cb102-965"><a href="#cb102-965" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">blackout_status =</span> <span class="st">"lost power"</span>)</span>
<span id="cb102-966"><a href="#cb102-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-967"><a href="#cb102-967" aria-hidden="true" tabindex="-1"></a><span class="co"># residential houses that did not lose power</span></span>
<span id="cb102-968"><a href="#cb102-968" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_3083 <span class="ot">&lt;-</span> <span class="fu">setdiff</span>(buildings_3083, blackout_buildings_3083)</span>
<span id="cb102-969"><a href="#cb102-969" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_census_3083 <span class="ot">&lt;-</span> <span class="fu">st_join</span>(no_blackout_buildings_3083, census_tract_data_3083) <span class="sc">%&gt;%</span></span>
<span id="cb102-970"><a href="#cb102-970" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">blackout_status =</span> <span class="st">"did not lose power"</span>)</span>
<span id="cb102-971"><a href="#cb102-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-972"><a href="#cb102-972" aria-hidden="true" tabindex="-1"></a>all_building_data_3083 <span class="ot">&lt;-</span> <span class="fu">rbind</span>(blackout_buildings_census_3083, no_blackout_buildings_census_3083)</span>
<span id="cb102-973"><a href="#cb102-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-974"><a href="#cb102-974" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract <span class="ot">&lt;-</span> all_building_data_3083 <span class="sc">%&gt;%</span></span>
<span id="cb102-975"><a href="#cb102-975" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>() <span class="sc">%&gt;%</span></span>
<span id="cb102-976"><a href="#cb102-976" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(GEOID_Data, blackout_status) <span class="sc">%&gt;%</span></span>
<span id="cb102-977"><a href="#cb102-977" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb102-978"><a href="#cb102-978" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> blackout_status, <span class="at">values_from =</span> count, <span class="at">values_fill =</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-979"><a href="#cb102-979" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">num_houses_did_not_lose_power =</span> <span class="st">"did not lose power"</span>,</span>
<span id="cb102-980"><a href="#cb102-980" aria-hidden="true" tabindex="-1"></a>         <span class="at">num_houses_lost_power =</span> <span class="st">"lost power"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-981"><a href="#cb102-981" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct_houses_that_lost_power =</span> (num_houses_lost_power <span class="sc">/</span> (num_houses_did_not_lose_power <span class="sc">+</span> num_houses_lost_power)) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb102-982"><a href="#cb102-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-983"><a href="#cb102-983" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(census_tract_data_roi_4326, counts_of_lost_power_by_census_tract, <span class="at">by =</span> <span class="st">"GEOID_Data"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb102-984"><a href="#cb102-984" aria-hidden="true" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>()</span>
<span id="cb102-985"><a href="#cb102-985" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-986"><a href="#cb102-986" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-987"><a href="#cb102-987" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-988"><a href="#cb102-988" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-991"><a href="#cb102-991" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-992"><a href="#cb102-992" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-993"><a href="#cb102-993" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-994"><a href="#cb102-994" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-995"><a href="#cb102-995" aria-hidden="true" tabindex="-1"></a>blackout_buildings_census_3083_py <span class="op">=</span> gpd.sjoin(blackout_buildings_3083_py, census_tract_data_py)</span>
<span id="cb102-996"><a href="#cb102-996" aria-hidden="true" tabindex="-1"></a>blackout_buildings_census_3083_py[<span class="st">'blackout_status'</span>] <span class="op">=</span> <span class="st">'lost power'</span></span>
<span id="cb102-997"><a href="#cb102-997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-998"><a href="#cb102-998" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_3083_py <span class="op">=</span> buildings_3083_py[<span class="op">~</span>buildings_3083_py[<span class="st">'osm_id'</span>].isin(blackout_buildings_3083_py[<span class="st">'osm_id'</span>])]</span>
<span id="cb102-999"><a href="#cb102-999" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1000"><a href="#cb102-1000" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_census_3083_py <span class="op">=</span> gpd.sjoin(no_blackout_buildings_3083_py, census_tract_data_py)</span>
<span id="cb102-1001"><a href="#cb102-1001" aria-hidden="true" tabindex="-1"></a>no_blackout_buildings_census_3083_py[<span class="st">'blackout_status'</span>] <span class="op">=</span> <span class="st">'did not lost power'</span></span>
<span id="cb102-1002"><a href="#cb102-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1003"><a href="#cb102-1003" aria-hidden="true" tabindex="-1"></a>all_building_data_3083_py <span class="op">=</span> pd.concat([blackout_buildings_census_3083_py, no_blackout_buildings_census_3083_py], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb102-1004"><a href="#cb102-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1005"><a href="#cb102-1005" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py <span class="op">=</span> all_building_data_3083_py.copy()</span>
<span id="cb102-1006"><a href="#cb102-1006" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py <span class="op">=</span> counts_of_lost_power_by_census_tract_py[[<span class="st">'GEOID_Data'</span>, <span class="st">'blackout_status'</span>]]</span>
<span id="cb102-1007"><a href="#cb102-1007" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py <span class="op">=</span> pd.pivot_table(counts_of_lost_power_by_census_tract_py, index<span class="op">=</span><span class="st">'GEOID_Data'</span>, columns<span class="op">=</span><span class="st">'blackout_status'</span>, aggfunc<span class="op">=</span><span class="bu">len</span>, fill_value<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb102-1008"><a href="#cb102-1008" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py.columns <span class="op">=</span> [<span class="st">'num_houses_did_not_lose_power'</span>, <span class="st">'num_houses_lost_power'</span>]</span>
<span id="cb102-1009"><a href="#cb102-1009" aria-hidden="true" tabindex="-1"></a>counts_of_lost_power_by_census_tract_py.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb102-1010"><a href="#cb102-1010" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1011"><a href="#cb102-1011" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data_py <span class="op">=</span> pd.merge(census_tract_data_py, counts_of_lost_power_by_census_tract_py, how<span class="op">=</span><span class="st">'inner'</span>, on<span class="op">=</span><span class="st">'GEOID_Data'</span>)</span>
<span id="cb102-1012"><a href="#cb102-1012" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data_py[<span class="st">'pct_houses_that_lost_power'</span>] <span class="op">=</span> (census_tract_blackout_data_py[<span class="st">'num_houses_lost_power'</span>] <span class="op">/</span> (census_tract_blackout_data_py[<span class="st">'num_houses_did_not_lose_power'</span>] <span class="op">+</span> census_tract_blackout_data_py[<span class="st">'num_houses_lost_power'</span>])) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb102-1013"><a href="#cb102-1013" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1014"><a href="#cb102-1014" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1015"><a href="#cb102-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1016"><a href="#cb102-1016" aria-hidden="true" tabindex="-1"></a><span class="fu"># Statistical Analysis</span></span>
<span id="cb102-1017"><a href="#cb102-1017" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1018"><a href="#cb102-1018" aria-hidden="true" tabindex="-1"></a>Linear regression was used to model the relationship between percent of houses that lost power and selected data from the U.S. Census Bureau's American Community Survey (ACS). All data are aggregated to the census tract level.</span>
<span id="cb102-1019"><a href="#cb102-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1022"><a href="#cb102-1022" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1023"><a href="#cb102-1023" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb102-1024"><a href="#cb102-1024" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/census_tract_blackout_data_df.csv"</span>)</span>
<span id="cb102-1025"><a href="#cb102-1025" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1026"><a href="#cb102-1026" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1029"><a href="#cb102-1029" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1030"><a href="#cb102-1030" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb102-1031"><a href="#cb102-1031" aria-hidden="true" tabindex="-1"></a>census_tract_blackout_data_py <span class="op">=</span> pd.read_csv(<span class="st">"data/census_tract_blackout_data_df.csv"</span>)</span>
<span id="cb102-1032"><a href="#cb102-1032" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1033"><a href="#cb102-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1034"><a href="#cb102-1034" aria-hidden="true" tabindex="-1"></a><span class="fu">## Race</span></span>
<span id="cb102-1035"><a href="#cb102-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1036"><a href="#cb102-1036" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent white</span></span>
<span id="cb102-1037"><a href="#cb102-1037" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1038"><a href="#cb102-1038" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1039"><a href="#cb102-1039" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1040"><a href="#cb102-1040" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1043"><a href="#cb102-1043" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1044"><a href="#cb102-1044" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1045"><a href="#cb102-1045" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1046"><a href="#cb102-1046" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1047"><a href="#cb102-1047" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population white in census tract"</span></span>
<span id="cb102-1048"><a href="#cb102-1048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1049"><a href="#cb102-1049" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1050"><a href="#cb102-1050" aria-hidden="true" tabindex="-1"></a>model_pct_white <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_white)</span>
<span id="cb102-1051"><a href="#cb102-1051" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1052"><a href="#cb102-1052" aria-hidden="true" tabindex="-1"></a><span class="co">#plot</span></span>
<span id="cb102-1053"><a href="#cb102-1053" aria-hidden="true" tabindex="-1"></a>plot_model_pct_white <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_white, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1054"><a href="#cb102-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1055"><a href="#cb102-1055" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1056"><a href="#cb102-1056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1057"><a href="#cb102-1057" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% white"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1058"><a href="#cb102-1058" aria-hidden="true" tabindex="-1"></a>plot_model_pct_white</span>
<span id="cb102-1059"><a href="#cb102-1059" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1060"><a href="#cb102-1060" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1063"><a href="#cb102-1063" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1064"><a href="#cb102-1064" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1065"><a href="#cb102-1065" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1066"><a href="#cb102-1066" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1067"><a href="#cb102-1067" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1068"><a href="#cb102-1068" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1069"><a href="#cb102-1069" aria-hidden="true" tabindex="-1"></a>summary_model_pct_white <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_white)</span>
<span id="cb102-1070"><a href="#cb102-1070" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1071"><a href="#cb102-1071" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1072"><a href="#cb102-1072" aria-hidden="true" tabindex="-1"></a>slope_coef_white <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_white<span class="sc">$</span>coefficients[<span class="st">"pct_white"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1073"><a href="#cb102-1073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1074"><a href="#cb102-1074" aria-hidden="true" tabindex="-1"></a>std_err_white <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_white<span class="sc">$</span>coefficients[<span class="st">"pct_white"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1075"><a href="#cb102-1075" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1076"><a href="#cb102-1076" aria-hidden="true" tabindex="-1"></a>p_value_white <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_white<span class="sc">$</span>coefficients[<span class="st">"pct_white"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1077"><a href="#cb102-1077" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1078"><a href="#cb102-1078" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1079"><a href="#cb102-1079" aria-hidden="true" tabindex="-1"></a>ci_95_lower_white <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_white, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1080"><a href="#cb102-1080" aria-hidden="true" tabindex="-1"></a>ci_95_upper_white <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_white, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1081"><a href="#cb102-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1082"><a href="#cb102-1082" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1083"><a href="#cb102-1083" aria-hidden="true" tabindex="-1"></a>r_sqrd_white <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_white<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1084"><a href="#cb102-1084" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1085"><a href="#cb102-1085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1086"><a href="#cb102-1086" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1087"><a href="#cb102-1087" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1090"><a href="#cb102-1090" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1091"><a href="#cb102-1091" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1092"><a href="#cb102-1092" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1093"><a href="#cb102-1093" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population white in census tract"</span></span>
<span id="cb102-1094"><a href="#cb102-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1095"><a href="#cb102-1095" aria-hidden="true" tabindex="-1"></a>model_pct_white_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_white'</span>, </span>
<span id="cb102-1096"><a href="#cb102-1096" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1097"><a href="#cb102-1097" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1098"><a href="#cb102-1098" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_white'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1099"><a href="#cb102-1099" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1100"><a href="#cb102-1100" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1101"><a href="#cb102-1101" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% white'</span>)</span>
<span id="cb102-1102"><a href="#cb102-1102" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span>
<span id="cb102-1103"><a href="#cb102-1103" aria-hidden="true" tabindex="-1"></a>plt.suptitle(<span class="st">'Percent of houses that lost power vs. percent population white in census tract'</span>, y<span class="op">=</span><span class="dv">0</span>, ha<span class="op">=</span><span class="st">'center'</span>)</span>
<span id="cb102-1104"><a href="#cb102-1104" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1105"><a href="#cb102-1105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1108"><a href="#cb102-1108" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1109"><a href="#cb102-1109" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1110"><a href="#cb102-1110" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1111"><a href="#cb102-1111" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1112"><a href="#cb102-1112" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1113"><a href="#cb102-1113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1114"><a href="#cb102-1114" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1115"><a href="#cb102-1115" aria-hidden="true" tabindex="-1"></a>slope_coef_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1116"><a href="#cb102-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1117"><a href="#cb102-1117" aria-hidden="true" tabindex="-1"></a>std_err_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1118"><a href="#cb102-1118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1119"><a href="#cb102-1119" aria-hidden="true" tabindex="-1"></a>p_value_white_py <span class="op">=</span> model_pct_white_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1120"><a href="#cb102-1120" aria-hidden="true" tabindex="-1"></a>p_value_white_py <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>p_value_white_py<span class="sc">:.6f}</span><span class="ss">"</span></span>
<span id="cb102-1121"><a href="#cb102-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1122"><a href="#cb102-1122" aria-hidden="true" tabindex="-1"></a>ci_95_lower_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1123"><a href="#cb102-1123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1124"><a href="#cb102-1124" aria-hidden="true" tabindex="-1"></a>ci_95_upper_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1125"><a href="#cb102-1125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1126"><a href="#cb102-1126" aria-hidden="true" tabindex="-1"></a>r_sqrd_white_py <span class="op">=</span> <span class="bu">round</span>(model_pct_white_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1127"><a href="#cb102-1127" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1128"><a href="#cb102-1128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1129"><a href="#cb102-1129" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1130"><a href="#cb102-1130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1131"><a href="#cb102-1131" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent black</span></span>
<span id="cb102-1132"><a href="#cb102-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1133"><a href="#cb102-1133" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1134"><a href="#cb102-1134" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1135"><a href="#cb102-1135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1138"><a href="#cb102-1138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1139"><a href="#cb102-1139" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1140"><a href="#cb102-1140" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1141"><a href="#cb102-1141" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1142"><a href="#cb102-1142" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population black in census tract"</span></span>
<span id="cb102-1143"><a href="#cb102-1143" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1144"><a href="#cb102-1144" aria-hidden="true" tabindex="-1"></a>model_pct_black <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_black)</span>
<span id="cb102-1145"><a href="#cb102-1145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1146"><a href="#cb102-1146" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1147"><a href="#cb102-1147" aria-hidden="true" tabindex="-1"></a>plot_model_pct_black <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_black, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1148"><a href="#cb102-1148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1149"><a href="#cb102-1149" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1150"><a href="#cb102-1150" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1151"><a href="#cb102-1151" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% black"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1152"><a href="#cb102-1152" aria-hidden="true" tabindex="-1"></a>plot_model_pct_black</span>
<span id="cb102-1153"><a href="#cb102-1153" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1154"><a href="#cb102-1154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1157"><a href="#cb102-1157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1158"><a href="#cb102-1158" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1159"><a href="#cb102-1159" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1160"><a href="#cb102-1160" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1161"><a href="#cb102-1161" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1162"><a href="#cb102-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1163"><a href="#cb102-1163" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1164"><a href="#cb102-1164" aria-hidden="true" tabindex="-1"></a>summary_model_pct_black <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_black)</span>
<span id="cb102-1165"><a href="#cb102-1165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1166"><a href="#cb102-1166" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1167"><a href="#cb102-1167" aria-hidden="true" tabindex="-1"></a>slope_coef_black <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_black<span class="sc">$</span>coefficients[<span class="st">"pct_black"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1168"><a href="#cb102-1168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1169"><a href="#cb102-1169" aria-hidden="true" tabindex="-1"></a>std_err_black <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_black<span class="sc">$</span>coefficients[<span class="st">"pct_black"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1170"><a href="#cb102-1170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1171"><a href="#cb102-1171" aria-hidden="true" tabindex="-1"></a>p_value_black <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_black<span class="sc">$</span>coefficients[<span class="st">"pct_black"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1172"><a href="#cb102-1172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1173"><a href="#cb102-1173" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1174"><a href="#cb102-1174" aria-hidden="true" tabindex="-1"></a>ci_95_lower_black <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_black, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1175"><a href="#cb102-1175" aria-hidden="true" tabindex="-1"></a>ci_95_upper_black <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_black, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1176"><a href="#cb102-1176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1177"><a href="#cb102-1177" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1178"><a href="#cb102-1178" aria-hidden="true" tabindex="-1"></a>r_sqrd_black <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_black<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1179"><a href="#cb102-1179" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1180"><a href="#cb102-1180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1181"><a href="#cb102-1181" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1182"><a href="#cb102-1182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1185"><a href="#cb102-1185" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1186"><a href="#cb102-1186" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1187"><a href="#cb102-1187" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1188"><a href="#cb102-1188" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population black in census tract"</span></span>
<span id="cb102-1189"><a href="#cb102-1189" aria-hidden="true" tabindex="-1"></a>model_pct_black_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_black'</span>, </span>
<span id="cb102-1190"><a href="#cb102-1190" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1191"><a href="#cb102-1191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1192"><a href="#cb102-1192" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_black'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1193"><a href="#cb102-1193" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1194"><a href="#cb102-1194" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1195"><a href="#cb102-1195" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% black'</span>)</span>
<span id="cb102-1196"><a href="#cb102-1196" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span>
<span id="cb102-1197"><a href="#cb102-1197" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1198"><a href="#cb102-1198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1201"><a href="#cb102-1201" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1202"><a href="#cb102-1202" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1203"><a href="#cb102-1203" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1204"><a href="#cb102-1204" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1205"><a href="#cb102-1205" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1206"><a href="#cb102-1206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1207"><a href="#cb102-1207" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1208"><a href="#cb102-1208" aria-hidden="true" tabindex="-1"></a>slope_coef_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1209"><a href="#cb102-1209" aria-hidden="true" tabindex="-1"></a>std_err_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1210"><a href="#cb102-1210" aria-hidden="true" tabindex="-1"></a>p_value_black_py <span class="op">=</span> model_pct_black_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1211"><a href="#cb102-1211" aria-hidden="true" tabindex="-1"></a>ci_95_lower_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1212"><a href="#cb102-1212" aria-hidden="true" tabindex="-1"></a>ci_95_upper_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1213"><a href="#cb102-1213" aria-hidden="true" tabindex="-1"></a>r_sqrd_black_py <span class="op">=</span> <span class="bu">round</span>(model_pct_black_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1214"><a href="#cb102-1214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1215"><a href="#cb102-1215" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1216"><a href="#cb102-1216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1217"><a href="#cb102-1217" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent native american</span></span>
<span id="cb102-1218"><a href="#cb102-1218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1219"><a href="#cb102-1219" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1220"><a href="#cb102-1220" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1221"><a href="#cb102-1221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1224"><a href="#cb102-1224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1225"><a href="#cb102-1225" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1226"><a href="#cb102-1226" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1227"><a href="#cb102-1227" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1228"><a href="#cb102-1228" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population native american in census tract"</span></span>
<span id="cb102-1229"><a href="#cb102-1229" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1230"><a href="#cb102-1230" aria-hidden="true" tabindex="-1"></a>model_pct_am_native <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_am_native)</span>
<span id="cb102-1231"><a href="#cb102-1231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1232"><a href="#cb102-1232" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1233"><a href="#cb102-1233" aria-hidden="true" tabindex="-1"></a>plot_model_pct_am_native <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_am_native, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1234"><a href="#cb102-1234" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1235"><a href="#cb102-1235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1236"><a href="#cb102-1236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1237"><a href="#cb102-1237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% native american"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1238"><a href="#cb102-1238" aria-hidden="true" tabindex="-1"></a>plot_model_pct_am_native</span>
<span id="cb102-1239"><a href="#cb102-1239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1240"><a href="#cb102-1240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1243"><a href="#cb102-1243" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1244"><a href="#cb102-1244" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1245"><a href="#cb102-1245" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1246"><a href="#cb102-1246" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1247"><a href="#cb102-1247" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1248"><a href="#cb102-1248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1249"><a href="#cb102-1249" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1250"><a href="#cb102-1250" aria-hidden="true" tabindex="-1"></a>summary_model_pct_am_native <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_am_native)</span>
<span id="cb102-1251"><a href="#cb102-1251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1252"><a href="#cb102-1252" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1253"><a href="#cb102-1253" aria-hidden="true" tabindex="-1"></a>slope_coef_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_am_native<span class="sc">$</span>coefficients[<span class="st">"pct_am_native"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1254"><a href="#cb102-1254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1255"><a href="#cb102-1255" aria-hidden="true" tabindex="-1"></a>std_err_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_am_native<span class="sc">$</span>coefficients[<span class="st">"pct_am_native"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1256"><a href="#cb102-1256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1257"><a href="#cb102-1257" aria-hidden="true" tabindex="-1"></a>p_value_am_native <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_am_native<span class="sc">$</span>coefficients[<span class="st">"pct_am_native"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1258"><a href="#cb102-1258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1259"><a href="#cb102-1259" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1260"><a href="#cb102-1260" aria-hidden="true" tabindex="-1"></a>ci_95_lower_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_am_native, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1261"><a href="#cb102-1261" aria-hidden="true" tabindex="-1"></a>ci_95_upper_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_am_native, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1262"><a href="#cb102-1262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1263"><a href="#cb102-1263" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1264"><a href="#cb102-1264" aria-hidden="true" tabindex="-1"></a>r_sqrd_am_native <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_am_native<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1265"><a href="#cb102-1265" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1266"><a href="#cb102-1266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1267"><a href="#cb102-1267" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1268"><a href="#cb102-1268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1271"><a href="#cb102-1271" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1272"><a href="#cb102-1272" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1273"><a href="#cb102-1273" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1274"><a href="#cb102-1274" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population native american in census tract"</span></span>
<span id="cb102-1275"><a href="#cb102-1275" aria-hidden="true" tabindex="-1"></a>model_pct_am_native_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_am_native'</span>, </span>
<span id="cb102-1276"><a href="#cb102-1276" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1277"><a href="#cb102-1277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1278"><a href="#cb102-1278" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_am_native'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1279"><a href="#cb102-1279" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1280"><a href="#cb102-1280" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1281"><a href="#cb102-1281" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% am_native'</span>)</span>
<span id="cb102-1282"><a href="#cb102-1282" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span>
<span id="cb102-1283"><a href="#cb102-1283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1284"><a href="#cb102-1284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1287"><a href="#cb102-1287" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1288"><a href="#cb102-1288" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1289"><a href="#cb102-1289" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1290"><a href="#cb102-1290" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1291"><a href="#cb102-1291" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1292"><a href="#cb102-1292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1293"><a href="#cb102-1293" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1294"><a href="#cb102-1294" aria-hidden="true" tabindex="-1"></a>slope_coef_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1295"><a href="#cb102-1295" aria-hidden="true" tabindex="-1"></a>std_err_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1296"><a href="#cb102-1296" aria-hidden="true" tabindex="-1"></a>p_value_am_native_py <span class="op">=</span> model_pct_am_native_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1297"><a href="#cb102-1297" aria-hidden="true" tabindex="-1"></a>ci_95_lower_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1298"><a href="#cb102-1298" aria-hidden="true" tabindex="-1"></a>ci_95_upper_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1299"><a href="#cb102-1299" aria-hidden="true" tabindex="-1"></a>r_sqrd_am_native_py <span class="op">=</span> <span class="bu">round</span>(model_pct_am_native_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1300"><a href="#cb102-1300" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1301"><a href="#cb102-1301" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1302"><a href="#cb102-1302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1303"><a href="#cb102-1303" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent asian</span></span>
<span id="cb102-1304"><a href="#cb102-1304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1305"><a href="#cb102-1305" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1306"><a href="#cb102-1306" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1307"><a href="#cb102-1307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1310"><a href="#cb102-1310" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1311"><a href="#cb102-1311" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1312"><a href="#cb102-1312" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1313"><a href="#cb102-1313" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1314"><a href="#cb102-1314" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population asian in census tract"</span></span>
<span id="cb102-1315"><a href="#cb102-1315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1316"><a href="#cb102-1316" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1317"><a href="#cb102-1317" aria-hidden="true" tabindex="-1"></a>model_pct_asian <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_asian)</span>
<span id="cb102-1318"><a href="#cb102-1318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1319"><a href="#cb102-1319" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1320"><a href="#cb102-1320" aria-hidden="true" tabindex="-1"></a>plot_model_pct_asian <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_asian, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1321"><a href="#cb102-1321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1322"><a href="#cb102-1322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1323"><a href="#cb102-1323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1324"><a href="#cb102-1324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% asian"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1325"><a href="#cb102-1325" aria-hidden="true" tabindex="-1"></a>plot_model_pct_asian</span>
<span id="cb102-1326"><a href="#cb102-1326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1327"><a href="#cb102-1327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1330"><a href="#cb102-1330" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1331"><a href="#cb102-1331" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1332"><a href="#cb102-1332" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1333"><a href="#cb102-1333" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1334"><a href="#cb102-1334" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1335"><a href="#cb102-1335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1336"><a href="#cb102-1336" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1337"><a href="#cb102-1337" aria-hidden="true" tabindex="-1"></a>summary_model_pct_asian <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_asian)</span>
<span id="cb102-1338"><a href="#cb102-1338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1339"><a href="#cb102-1339" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1340"><a href="#cb102-1340" aria-hidden="true" tabindex="-1"></a>slope_coef_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_asian<span class="sc">$</span>coefficients[<span class="st">"pct_asian"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1341"><a href="#cb102-1341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1342"><a href="#cb102-1342" aria-hidden="true" tabindex="-1"></a>std_err_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_asian<span class="sc">$</span>coefficients[<span class="st">"pct_asian"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1343"><a href="#cb102-1343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1344"><a href="#cb102-1344" aria-hidden="true" tabindex="-1"></a>p_value_asian <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_asian<span class="sc">$</span>coefficients[<span class="st">"pct_asian"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1345"><a href="#cb102-1345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1346"><a href="#cb102-1346" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1347"><a href="#cb102-1347" aria-hidden="true" tabindex="-1"></a>ci_95_lower_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_asian, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1348"><a href="#cb102-1348" aria-hidden="true" tabindex="-1"></a>ci_95_upper_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_asian, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1349"><a href="#cb102-1349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1350"><a href="#cb102-1350" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1351"><a href="#cb102-1351" aria-hidden="true" tabindex="-1"></a>r_sqrd_asian <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_asian<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1352"><a href="#cb102-1352" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1353"><a href="#cb102-1353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1354"><a href="#cb102-1354" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1355"><a href="#cb102-1355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1358"><a href="#cb102-1358" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1359"><a href="#cb102-1359" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1360"><a href="#cb102-1360" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1361"><a href="#cb102-1361" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population asian in census tract"</span></span>
<span id="cb102-1362"><a href="#cb102-1362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1363"><a href="#cb102-1363" aria-hidden="true" tabindex="-1"></a>model_pct_asian_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_asian'</span>, </span>
<span id="cb102-1364"><a href="#cb102-1364" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1365"><a href="#cb102-1365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1366"><a href="#cb102-1366" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_asian'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1367"><a href="#cb102-1367" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1368"><a href="#cb102-1368" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1369"><a href="#cb102-1369" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% asian'</span>)</span>
<span id="cb102-1370"><a href="#cb102-1370" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span>
<span id="cb102-1371"><a href="#cb102-1371" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1372"><a href="#cb102-1372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1375"><a href="#cb102-1375" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1376"><a href="#cb102-1376" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1377"><a href="#cb102-1377" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1378"><a href="#cb102-1378" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1379"><a href="#cb102-1379" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1380"><a href="#cb102-1380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1381"><a href="#cb102-1381" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1382"><a href="#cb102-1382" aria-hidden="true" tabindex="-1"></a>slope_coef_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1383"><a href="#cb102-1383" aria-hidden="true" tabindex="-1"></a>std_err_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1384"><a href="#cb102-1384" aria-hidden="true" tabindex="-1"></a>p_value_asian_py <span class="op">=</span> model_pct_asian_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1385"><a href="#cb102-1385" aria-hidden="true" tabindex="-1"></a>ci_95_lower_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1386"><a href="#cb102-1386" aria-hidden="true" tabindex="-1"></a>ci_95_upper_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1387"><a href="#cb102-1387" aria-hidden="true" tabindex="-1"></a>r_sqrd_asian_py <span class="op">=</span> <span class="bu">round</span>(model_pct_asian_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1388"><a href="#cb102-1388" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1389"><a href="#cb102-1389" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1390"><a href="#cb102-1390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1391"><a href="#cb102-1391" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent hispanic / latino</span></span>
<span id="cb102-1392"><a href="#cb102-1392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1393"><a href="#cb102-1393" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1394"><a href="#cb102-1394" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1395"><a href="#cb102-1395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1398"><a href="#cb102-1398" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1399"><a href="#cb102-1399" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1400"><a href="#cb102-1400" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1401"><a href="#cb102-1401" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1402"><a href="#cb102-1402" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population hispanic / latino in census tract"</span></span>
<span id="cb102-1403"><a href="#cb102-1403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1404"><a href="#cb102-1404" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1405"><a href="#cb102-1405" aria-hidden="true" tabindex="-1"></a>model_pct_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_hispanic_latino)</span>
<span id="cb102-1406"><a href="#cb102-1406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1407"><a href="#cb102-1407" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1408"><a href="#cb102-1408" aria-hidden="true" tabindex="-1"></a>plot_model_pct_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_hispanic_latino, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1409"><a href="#cb102-1409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1410"><a href="#cb102-1410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1411"><a href="#cb102-1411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1412"><a href="#cb102-1412" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% hispanic / latino"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1413"><a href="#cb102-1413" aria-hidden="true" tabindex="-1"></a>plot_model_pct_hispanic_latino</span>
<span id="cb102-1414"><a href="#cb102-1414" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1415"><a href="#cb102-1415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1418"><a href="#cb102-1418" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1419"><a href="#cb102-1419" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1420"><a href="#cb102-1420" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1421"><a href="#cb102-1421" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1422"><a href="#cb102-1422" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1423"><a href="#cb102-1423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1424"><a href="#cb102-1424" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1425"><a href="#cb102-1425" aria-hidden="true" tabindex="-1"></a>summary_model_pct_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_hispanic_latino)</span>
<span id="cb102-1426"><a href="#cb102-1426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1427"><a href="#cb102-1427" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1428"><a href="#cb102-1428" aria-hidden="true" tabindex="-1"></a>slope_coef_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>coefficients[<span class="st">"pct_hispanic_latino"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1429"><a href="#cb102-1429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1430"><a href="#cb102-1430" aria-hidden="true" tabindex="-1"></a>std_err_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>coefficients[<span class="st">"pct_hispanic_latino"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1431"><a href="#cb102-1431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1432"><a href="#cb102-1432" aria-hidden="true" tabindex="-1"></a>p_value_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>coefficients[<span class="st">"pct_hispanic_latino"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1433"><a href="#cb102-1433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1434"><a href="#cb102-1434" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1435"><a href="#cb102-1435" aria-hidden="true" tabindex="-1"></a>ci_95_lower_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_hispanic_latino, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1436"><a href="#cb102-1436" aria-hidden="true" tabindex="-1"></a>ci_95_upper_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_hispanic_latino, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1437"><a href="#cb102-1437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1438"><a href="#cb102-1438" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1439"><a href="#cb102-1439" aria-hidden="true" tabindex="-1"></a>r_sqrd_hispanic_latino <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_hispanic_latino<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1440"><a href="#cb102-1440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1441"><a href="#cb102-1441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1442"><a href="#cb102-1442" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1443"><a href="#cb102-1443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1446"><a href="#cb102-1446" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1447"><a href="#cb102-1447" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1448"><a href="#cb102-1448" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1449"><a href="#cb102-1449" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population hispanic / latino in census tract"</span></span>
<span id="cb102-1450"><a href="#cb102-1450" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1451"><a href="#cb102-1451" aria-hidden="true" tabindex="-1"></a>model_pct_hispanic_latino_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_hispanic_latino'</span>, </span>
<span id="cb102-1452"><a href="#cb102-1452" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1453"><a href="#cb102-1453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1454"><a href="#cb102-1454" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_hispanic_latino'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1455"><a href="#cb102-1455" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1456"><a href="#cb102-1456" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1457"><a href="#cb102-1457" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'</span><span class="sc">% hi</span><span class="st">spanic_latino'</span>)</span>
<span id="cb102-1458"><a href="#cb102-1458" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span>
<span id="cb102-1459"><a href="#cb102-1459" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1460"><a href="#cb102-1460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1463"><a href="#cb102-1463" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1464"><a href="#cb102-1464" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1465"><a href="#cb102-1465" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1466"><a href="#cb102-1466" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1467"><a href="#cb102-1467" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1468"><a href="#cb102-1468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1469"><a href="#cb102-1469" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1470"><a href="#cb102-1470" aria-hidden="true" tabindex="-1"></a>slope_coef_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1471"><a href="#cb102-1471" aria-hidden="true" tabindex="-1"></a>std_err_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1472"><a href="#cb102-1472" aria-hidden="true" tabindex="-1"></a>p_value_hispanic_latino_py <span class="op">=</span> model_pct_hispanic_latino_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1473"><a href="#cb102-1473" aria-hidden="true" tabindex="-1"></a>ci_95_lower_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1474"><a href="#cb102-1474" aria-hidden="true" tabindex="-1"></a>ci_95_upper_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1475"><a href="#cb102-1475" aria-hidden="true" tabindex="-1"></a>r_sqrd_hispanic_latino_py <span class="op">=</span> <span class="bu">round</span>(model_pct_hispanic_latino_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1476"><a href="#cb102-1476" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1477"><a href="#cb102-1477" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1478"><a href="#cb102-1478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1479"><a href="#cb102-1479" aria-hidden="true" tabindex="-1"></a><span class="fu">### Race summary plots</span></span>
<span id="cb102-1480"><a href="#cb102-1480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1483"><a href="#cb102-1483" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1484"><a href="#cb102-1484" aria-hidden="true" tabindex="-1"></a>model_plots_race <span class="ot">&lt;-</span> (plot_model_pct_white <span class="sc">|</span> plot_model_pct_black <span class="sc">|</span> plot_model_pct_am_native) <span class="sc">/</span> </span>
<span id="cb102-1485"><a href="#cb102-1485" aria-hidden="true" tabindex="-1"></a>  (plot_model_pct_asian <span class="sc">|</span> plot_model_pct_hispanic_latino <span class="sc">|</span> <span class="fu">plot_spacer</span>()) <span class="sc">+</span></span>
<span id="cb102-1486"><a href="#cb102-1486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Lineral Regression Models of Power Outages vs. Race"</span>)</span>
<span id="cb102-1487"><a href="#cb102-1487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1488"><a href="#cb102-1488" aria-hidden="true" tabindex="-1"></a>model_plots_race</span>
<span id="cb102-1489"><a href="#cb102-1489" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1490"><a href="#cb102-1490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1491"><a href="#cb102-1491" aria-hidden="true" tabindex="-1"></a><span class="fu">## Age</span></span>
<span id="cb102-1492"><a href="#cb102-1492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1493"><a href="#cb102-1493" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent 65 and older</span></span>
<span id="cb102-1494"><a href="#cb102-1494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1495"><a href="#cb102-1495" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1496"><a href="#cb102-1496" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1497"><a href="#cb102-1497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1500"><a href="#cb102-1500" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1501"><a href="#cb102-1501" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1502"><a href="#cb102-1502" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1503"><a href="#cb102-1503" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb102-1504"><a href="#cb102-1504" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb102-1505"><a href="#cb102-1505" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population age 65 and older in census tract"</span></span>
<span id="cb102-1506"><a href="#cb102-1506" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1507"><a href="#cb102-1507" aria-hidden="true" tabindex="-1"></a>model_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_65_and_over)</span>
<span id="cb102-1508"><a href="#cb102-1508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1509"><a href="#cb102-1509" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1510"><a href="#cb102-1510" aria-hidden="true" tabindex="-1"></a>plot_model_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_65_and_over, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1511"><a href="#cb102-1511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1512"><a href="#cb102-1512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1513"><a href="#cb102-1513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1514"><a href="#cb102-1514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% 65 and older"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1515"><a href="#cb102-1515" aria-hidden="true" tabindex="-1"></a>plot_model_pct_65_and_over</span>
<span id="cb102-1516"><a href="#cb102-1516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1517"><a href="#cb102-1517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1520"><a href="#cb102-1520" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1521"><a href="#cb102-1521" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1522"><a href="#cb102-1522" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1523"><a href="#cb102-1523" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1524"><a href="#cb102-1524" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1525"><a href="#cb102-1525" aria-hidden="true" tabindex="-1"></a>summary_model_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_65_and_over)</span>
<span id="cb102-1526"><a href="#cb102-1526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1527"><a href="#cb102-1527" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1528"><a href="#cb102-1528" aria-hidden="true" tabindex="-1"></a>slope_coef_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_65_and_over<span class="sc">$</span>coefficients[<span class="st">"pct_65_and_over"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1529"><a href="#cb102-1529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1530"><a href="#cb102-1530" aria-hidden="true" tabindex="-1"></a>std_err_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_65_and_over<span class="sc">$</span>coefficients[<span class="st">"pct_65_and_over"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1531"><a href="#cb102-1531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1532"><a href="#cb102-1532" aria-hidden="true" tabindex="-1"></a>p_value_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_65_and_over<span class="sc">$</span>coefficients[<span class="st">"pct_65_and_over"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1533"><a href="#cb102-1533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1534"><a href="#cb102-1534" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1535"><a href="#cb102-1535" aria-hidden="true" tabindex="-1"></a>ci_95_lower_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_65_and_over, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1536"><a href="#cb102-1536" aria-hidden="true" tabindex="-1"></a>ci_95_upper_pct_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_65_and_over, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1537"><a href="#cb102-1537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1538"><a href="#cb102-1538" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1539"><a href="#cb102-1539" aria-hidden="true" tabindex="-1"></a>r_sqrd_65_and_over <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_65_and_over<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1540"><a href="#cb102-1540" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1541"><a href="#cb102-1541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1542"><a href="#cb102-1542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1543"><a href="#cb102-1543" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1544"><a href="#cb102-1544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1547"><a href="#cb102-1547" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1548"><a href="#cb102-1548" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1549"><a href="#cb102-1549" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1550"><a href="#cb102-1550" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population age 65 and older in census tract"</span></span>
<span id="cb102-1551"><a href="#cb102-1551" aria-hidden="true" tabindex="-1"></a>model_pct_65_and_over_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_65_and_over'</span>, </span>
<span id="cb102-1552"><a href="#cb102-1552" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1553"><a href="#cb102-1553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1554"><a href="#cb102-1554" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_65_and_over'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1555"><a href="#cb102-1555" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1556"><a href="#cb102-1556" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1557"><a href="#cb102-1557" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'% 65 and over'</span>)</span>
<span id="cb102-1558"><a href="#cb102-1558" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)   </span>
<span id="cb102-1559"><a href="#cb102-1559" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1560"><a href="#cb102-1560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1563"><a href="#cb102-1563" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1564"><a href="#cb102-1564" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1565"><a href="#cb102-1565" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1566"><a href="#cb102-1566" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1567"><a href="#cb102-1567" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1568"><a href="#cb102-1568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1569"><a href="#cb102-1569" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1570"><a href="#cb102-1570" aria-hidden="true" tabindex="-1"></a>slope_coef_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1571"><a href="#cb102-1571" aria-hidden="true" tabindex="-1"></a>std_err_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1572"><a href="#cb102-1572" aria-hidden="true" tabindex="-1"></a>p_value_pct_65_and_over_py <span class="op">=</span> model_pct_65_and_over_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1573"><a href="#cb102-1573" aria-hidden="true" tabindex="-1"></a>ci_95_lower_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1574"><a href="#cb102-1574" aria-hidden="true" tabindex="-1"></a>ci_95_upper_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1575"><a href="#cb102-1575" aria-hidden="true" tabindex="-1"></a>r_sqrd_pct_65_and_over_py <span class="op">=</span> <span class="bu">round</span>(model_pct_65_and_over_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1576"><a href="#cb102-1576" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1577"><a href="#cb102-1577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1578"><a href="#cb102-1578" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1579"><a href="#cb102-1579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1580"><a href="#cb102-1580" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent children under 18</span></span>
<span id="cb102-1581"><a href="#cb102-1581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1582"><a href="#cb102-1582" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1583"><a href="#cb102-1583" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1584"><a href="#cb102-1584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1587"><a href="#cb102-1587" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1588"><a href="#cb102-1588" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1589"><a href="#cb102-1589" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1590"><a href="#cb102-1590" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb102-1591"><a href="#cb102-1591" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb102-1592"><a href="#cb102-1592" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population children under 18 in census tract"</span></span>
<span id="cb102-1593"><a href="#cb102-1593" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1594"><a href="#cb102-1594" aria-hidden="true" tabindex="-1"></a>model_pct_children_under_18 <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_children_under_18)</span>
<span id="cb102-1595"><a href="#cb102-1595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1596"><a href="#cb102-1596" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1597"><a href="#cb102-1597" aria-hidden="true" tabindex="-1"></a>plot_model_pct_children_under_18 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_children_under_18, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1598"><a href="#cb102-1598" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb102-1599"><a href="#cb102-1599" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1600"><a href="#cb102-1600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1601"><a href="#cb102-1601" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% children under 18"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1602"><a href="#cb102-1602" aria-hidden="true" tabindex="-1"></a>plot_model_pct_children_under_18</span>
<span id="cb102-1603"><a href="#cb102-1603" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1604"><a href="#cb102-1604" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1607"><a href="#cb102-1607" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1608"><a href="#cb102-1608" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1609"><a href="#cb102-1609" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1610"><a href="#cb102-1610" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1611"><a href="#cb102-1611" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1612"><a href="#cb102-1612" aria-hidden="true" tabindex="-1"></a>summary_model_pct_children_under_18 <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_children_under_18)</span>
<span id="cb102-1613"><a href="#cb102-1613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1614"><a href="#cb102-1614" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1615"><a href="#cb102-1615" aria-hidden="true" tabindex="-1"></a>slope_coef_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_children_under_18<span class="sc">$</span>coefficients[<span class="st">"pct_children_under_18"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1616"><a href="#cb102-1616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1617"><a href="#cb102-1617" aria-hidden="true" tabindex="-1"></a>std_err_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_children_under_18<span class="sc">$</span>coefficients[<span class="st">"pct_children_under_18"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1618"><a href="#cb102-1618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1619"><a href="#cb102-1619" aria-hidden="true" tabindex="-1"></a>p_value_children_under_18 <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_children_under_18<span class="sc">$</span>coefficients[<span class="st">"pct_children_under_18"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1620"><a href="#cb102-1620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1621"><a href="#cb102-1621" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1622"><a href="#cb102-1622" aria-hidden="true" tabindex="-1"></a>ci_95_lower_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_children_under_18, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1623"><a href="#cb102-1623" aria-hidden="true" tabindex="-1"></a>ci_95_upper_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_children_under_18, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1624"><a href="#cb102-1624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1625"><a href="#cb102-1625" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1626"><a href="#cb102-1626" aria-hidden="true" tabindex="-1"></a>r_sqrd_children_under_18 <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_children_under_18<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1627"><a href="#cb102-1627" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1628"><a href="#cb102-1628" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1629"><a href="#cb102-1629" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1630"><a href="#cb102-1630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1633"><a href="#cb102-1633" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1634"><a href="#cb102-1634" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1635"><a href="#cb102-1635" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1636"><a href="#cb102-1636" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population children under 18 in census tract"</span></span>
<span id="cb102-1637"><a href="#cb102-1637" aria-hidden="true" tabindex="-1"></a>model_pct_children_under_18_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_children_under_18'</span>, </span>
<span id="cb102-1638"><a href="#cb102-1638" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1639"><a href="#cb102-1639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1640"><a href="#cb102-1640" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_children_under_18'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1641"><a href="#cb102-1641" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1642"><a href="#cb102-1642" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1643"><a href="#cb102-1643" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'</span><span class="sc">% c</span><span class="st">hildren under 18'</span>)</span>
<span id="cb102-1644"><a href="#cb102-1644" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)   </span>
<span id="cb102-1645"><a href="#cb102-1645" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1646"><a href="#cb102-1646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1649"><a href="#cb102-1649" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1650"><a href="#cb102-1650" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1651"><a href="#cb102-1651" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1652"><a href="#cb102-1652" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1653"><a href="#cb102-1653" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1654"><a href="#cb102-1654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1655"><a href="#cb102-1655" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1656"><a href="#cb102-1656" aria-hidden="true" tabindex="-1"></a>slope_coef_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1657"><a href="#cb102-1657" aria-hidden="true" tabindex="-1"></a>std_err_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1658"><a href="#cb102-1658" aria-hidden="true" tabindex="-1"></a>p_value_children_under_18_py <span class="op">=</span> model_pct_children_under_18_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1659"><a href="#cb102-1659" aria-hidden="true" tabindex="-1"></a>ci_95_lower_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1660"><a href="#cb102-1660" aria-hidden="true" tabindex="-1"></a>ci_95_upper_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1661"><a href="#cb102-1661" aria-hidden="true" tabindex="-1"></a>r_sqrd_children_under_18_py <span class="op">=</span> <span class="bu">round</span>(model_pct_children_under_18_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1662"><a href="#cb102-1662" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1663"><a href="#cb102-1663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1664"><a href="#cb102-1664" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1665"><a href="#cb102-1665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1666"><a href="#cb102-1666" aria-hidden="true" tabindex="-1"></a><span class="fu">### Age summary plots</span></span>
<span id="cb102-1667"><a href="#cb102-1667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1668"><a href="#cb102-1668" aria-hidden="true" tabindex="-1"></a><span class="in">```{r fig.width=10,fig.height=3}</span></span>
<span id="cb102-1669"><a href="#cb102-1669" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1670"><a href="#cb102-1670" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1671"><a href="#cb102-1671" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: screen-right</span></span>
<span id="cb102-1672"><a href="#cb102-1672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1673"><a href="#cb102-1673" aria-hidden="true" tabindex="-1"></a>model_plots_age <span class="ot">&lt;-</span> (plot_model_pct_65_and_over <span class="sc">|</span> plot_model_pct_children_under_18) <span class="sc">+</span></span>
<span id="cb102-1674"><a href="#cb102-1674" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Lineral Regression Models of Power Outages vs. Age"</span>)</span>
<span id="cb102-1675"><a href="#cb102-1675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1676"><a href="#cb102-1676" aria-hidden="true" tabindex="-1"></a>model_plots_age</span>
<span id="cb102-1677"><a href="#cb102-1677" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1678"><a href="#cb102-1678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1679"><a href="#cb102-1679" aria-hidden="true" tabindex="-1"></a><span class="fu">## Income</span></span>
<span id="cb102-1680"><a href="#cb102-1680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1681"><a href="#cb102-1681" aria-hidden="true" tabindex="-1"></a><span class="fu">### Percent households below poverty</span></span>
<span id="cb102-1682"><a href="#cb102-1682" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1683"><a href="#cb102-1683" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1684"><a href="#cb102-1684" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1685"><a href="#cb102-1685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1688"><a href="#cb102-1688" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1689"><a href="#cb102-1689" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1690"><a href="#cb102-1690" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1691"><a href="#cb102-1691" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb102-1692"><a href="#cb102-1692" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb102-1693"><a href="#cb102-1693" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population of household below the poverty level in census tract"</span></span>
<span id="cb102-1694"><a href="#cb102-1694" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1695"><a href="#cb102-1695" aria-hidden="true" tabindex="-1"></a>model_pct_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> pct_households_below_poverty)</span>
<span id="cb102-1696"><a href="#cb102-1696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1697"><a href="#cb102-1697" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1698"><a href="#cb102-1698" aria-hidden="true" tabindex="-1"></a>plot_model_pct_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> pct_households_below_poverty, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1699"><a href="#cb102-1699" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1700"><a href="#cb102-1700" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1701"><a href="#cb102-1701" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1702"><a href="#cb102-1702" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"% households below poverty"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1703"><a href="#cb102-1703" aria-hidden="true" tabindex="-1"></a>plot_model_pct_households_below_poverty</span>
<span id="cb102-1704"><a href="#cb102-1704" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1705"><a href="#cb102-1705" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1708"><a href="#cb102-1708" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1709"><a href="#cb102-1709" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1710"><a href="#cb102-1710" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1711"><a href="#cb102-1711" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1712"><a href="#cb102-1712" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1713"><a href="#cb102-1713" aria-hidden="true" tabindex="-1"></a>summary_model_pct_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_pct_households_below_poverty)</span>
<span id="cb102-1714"><a href="#cb102-1714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1715"><a href="#cb102-1715" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1716"><a href="#cb102-1716" aria-hidden="true" tabindex="-1"></a>slope_coef_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>coefficients[<span class="st">"pct_households_below_poverty"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1717"><a href="#cb102-1717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1718"><a href="#cb102-1718" aria-hidden="true" tabindex="-1"></a>std_err_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>coefficients[<span class="st">"pct_households_below_poverty"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1719"><a href="#cb102-1719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1720"><a href="#cb102-1720" aria-hidden="true" tabindex="-1"></a>p_value_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>coefficients[<span class="st">"pct_households_below_poverty"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1721"><a href="#cb102-1721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1722"><a href="#cb102-1722" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1723"><a href="#cb102-1723" aria-hidden="true" tabindex="-1"></a>ci_95_lower_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_households_below_poverty, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1724"><a href="#cb102-1724" aria-hidden="true" tabindex="-1"></a>ci_95_upper_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_pct_households_below_poverty, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1725"><a href="#cb102-1725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1726"><a href="#cb102-1726" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1727"><a href="#cb102-1727" aria-hidden="true" tabindex="-1"></a>r_sqrd_households_below_poverty <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_pct_households_below_poverty<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1728"><a href="#cb102-1728" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1729"><a href="#cb102-1729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1730"><a href="#cb102-1730" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1731"><a href="#cb102-1731" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1732"><a href="#cb102-1732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1735"><a href="#cb102-1735" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1736"><a href="#cb102-1736" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1737"><a href="#cb102-1737" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1738"><a href="#cb102-1738" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. percent population of household below the poverty level in census tract"</span></span>
<span id="cb102-1739"><a href="#cb102-1739" aria-hidden="true" tabindex="-1"></a>model_pct_households_below_poverty_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ pct_households_below_poverty'</span>, </span>
<span id="cb102-1740"><a href="#cb102-1740" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1741"><a href="#cb102-1741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1742"><a href="#cb102-1742" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'pct_households_below_poverty'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1743"><a href="#cb102-1743" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1744"><a href="#cb102-1744" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1745"><a href="#cb102-1745" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'</span><span class="sc">% ho</span><span class="st">useholds below poverty'</span>)</span>
<span id="cb102-1746"><a href="#cb102-1746" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)  </span>
<span id="cb102-1747"><a href="#cb102-1747" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1748"><a href="#cb102-1748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1751"><a href="#cb102-1751" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1752"><a href="#cb102-1752" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1753"><a href="#cb102-1753" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1754"><a href="#cb102-1754" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1755"><a href="#cb102-1755" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1756"><a href="#cb102-1756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1757"><a href="#cb102-1757" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1758"><a href="#cb102-1758" aria-hidden="true" tabindex="-1"></a>slope_coef_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1759"><a href="#cb102-1759" aria-hidden="true" tabindex="-1"></a>std_err_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1760"><a href="#cb102-1760" aria-hidden="true" tabindex="-1"></a>p_value_households_below_poverty_py <span class="op">=</span> model_pct_households_below_poverty_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1761"><a href="#cb102-1761" aria-hidden="true" tabindex="-1"></a>ci_95_lower_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1762"><a href="#cb102-1762" aria-hidden="true" tabindex="-1"></a>ci_95_upper_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1763"><a href="#cb102-1763" aria-hidden="true" tabindex="-1"></a>r_sqrd_households_below_poverty_py <span class="op">=</span> <span class="bu">round</span>(model_pct_households_below_poverty_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1764"><a href="#cb102-1764" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1765"><a href="#cb102-1765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1766"><a href="#cb102-1766" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1767"><a href="#cb102-1767" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1768"><a href="#cb102-1768" aria-hidden="true" tabindex="-1"></a><span class="fu">### Median income</span></span>
<span id="cb102-1769"><a href="#cb102-1769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1770"><a href="#cb102-1770" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1771"><a href="#cb102-1771" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1772"><a href="#cb102-1772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1775"><a href="#cb102-1775" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1776"><a href="#cb102-1776" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1777"><a href="#cb102-1777" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1778"><a href="#cb102-1778" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: false</span></span>
<span id="cb102-1779"><a href="#cb102-1779" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: margin</span></span>
<span id="cb102-1780"><a href="#cb102-1780" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. median income in census tract"</span></span>
<span id="cb102-1781"><a href="#cb102-1781" aria-hidden="true" tabindex="-1"></a><span class="co"># linear regression model</span></span>
<span id="cb102-1782"><a href="#cb102-1782" aria-hidden="true" tabindex="-1"></a>model_median_income <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> census_tract_blackout_data, pct_houses_that_lost_power <span class="sc">~</span> median_income)</span>
<span id="cb102-1783"><a href="#cb102-1783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1784"><a href="#cb102-1784" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb102-1785"><a href="#cb102-1785" aria-hidden="true" tabindex="-1"></a>plot_model_median_income <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> census_tract_blackout_data, <span class="fu">aes</span>(<span class="at">x =</span> median_income, <span class="at">y =</span> pct_houses_that_lost_power)) <span class="sc">+</span></span>
<span id="cb102-1786"><a href="#cb102-1786" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb102-1787"><a href="#cb102-1787" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> lm, <span class="at">formula =</span> y<span class="sc">~</span>x, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb102-1788"><a href="#cb102-1788" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb102-1789"><a href="#cb102-1789" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"median income"</span>, <span class="at">y =</span> <span class="st">"% of houses that lost power"</span>)</span>
<span id="cb102-1790"><a href="#cb102-1790" aria-hidden="true" tabindex="-1"></a>plot_model_median_income</span>
<span id="cb102-1791"><a href="#cb102-1791" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1792"><a href="#cb102-1792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1795"><a href="#cb102-1795" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1796"><a href="#cb102-1796" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1797"><a href="#cb102-1797" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1798"><a href="#cb102-1798" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1799"><a href="#cb102-1799" aria-hidden="true" tabindex="-1"></a><span class="co"># model summary</span></span>
<span id="cb102-1800"><a href="#cb102-1800" aria-hidden="true" tabindex="-1"></a>summary_model_median_income <span class="ot">&lt;-</span> <span class="fu">summary</span>(model_median_income)</span>
<span id="cb102-1801"><a href="#cb102-1801" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1802"><a href="#cb102-1802" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1803"><a href="#cb102-1803" aria-hidden="true" tabindex="-1"></a>slope_coef_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_median_income<span class="sc">$</span>coefficients[<span class="st">"median_income"</span>, <span class="st">"Estimate"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1804"><a href="#cb102-1804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1805"><a href="#cb102-1805" aria-hidden="true" tabindex="-1"></a>std_err_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_median_income<span class="sc">$</span>coefficients[<span class="st">"median_income"</span>, <span class="st">"Std. Error"</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1806"><a href="#cb102-1806" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1807"><a href="#cb102-1807" aria-hidden="true" tabindex="-1"></a>p_value_median_income <span class="ot">&lt;-</span> <span class="fu">format</span>(summary_model_median_income<span class="sc">$</span>coefficients[<span class="st">"median_income"</span>, <span class="st">"Pr(&gt;|t|)"</span>], <span class="at">scientific =</span> <span class="cn">FALSE</span>, <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb102-1808"><a href="#cb102-1808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1809"><a href="#cb102-1809" aria-hidden="true" tabindex="-1"></a><span class="co"># confidence intervals</span></span>
<span id="cb102-1810"><a href="#cb102-1810" aria-hidden="true" tabindex="-1"></a>ci_95_lower_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_median_income, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">1</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1811"><a href="#cb102-1811" aria-hidden="true" tabindex="-1"></a>ci_95_upper_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">confint</span>(model_median_income, <span class="at">level =</span> <span class="fl">0.95</span>)[<span class="dv">2</span>, <span class="dv">2</span>], <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1812"><a href="#cb102-1812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1813"><a href="#cb102-1813" aria-hidden="true" tabindex="-1"></a><span class="co"># r-squared value</span></span>
<span id="cb102-1814"><a href="#cb102-1814" aria-hidden="true" tabindex="-1"></a>r_sqrd_median_income <span class="ot">&lt;-</span> <span class="fu">round</span>(summary_model_median_income<span class="sc">$</span>r.squared, <span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb102-1815"><a href="#cb102-1815" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1816"><a href="#cb102-1816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1817"><a href="#cb102-1817" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1818"><a href="#cb102-1818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1821"><a href="#cb102-1821" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1822"><a href="#cb102-1822" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1823"><a href="#cb102-1823" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1824"><a href="#cb102-1824" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "Percent of houses that lost power vs. median income in census tract"</span></span>
<span id="cb102-1825"><a href="#cb102-1825" aria-hidden="true" tabindex="-1"></a>model_pct_median_income_py <span class="op">=</span> ols(<span class="st">'pct_houses_that_lost_power ~ median_income'</span>, </span>
<span id="cb102-1826"><a href="#cb102-1826" aria-hidden="true" tabindex="-1"></a>                         data <span class="op">=</span> census_tract_blackout_data_py).fit()</span>
<span id="cb102-1827"><a href="#cb102-1827" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1828"><a href="#cb102-1828" aria-hidden="true" tabindex="-1"></a>sns.regplot(x <span class="op">=</span> <span class="st">'median_income'</span>, y <span class="op">=</span> <span class="st">'pct_houses_that_lost_power'</span>,</span>
<span id="cb102-1829"><a href="#cb102-1829" aria-hidden="true" tabindex="-1"></a>            data <span class="op">=</span> census_tract_blackout_data_py, ci <span class="op">=</span> <span class="va">None</span>,</span>
<span id="cb102-1830"><a href="#cb102-1830" aria-hidden="true" tabindex="-1"></a>           scatter_kws <span class="op">=</span> {<span class="st">'s'</span>:<span class="dv">1</span>, <span class="st">'color'</span>:<span class="st">'black'</span>})</span>
<span id="cb102-1831"><a href="#cb102-1831" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'median income'</span>)</span>
<span id="cb102-1832"><a href="#cb102-1832" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'</span><span class="sc">% o</span><span class="st">f houses that lost power'</span>)</span>
<span id="cb102-1833"><a href="#cb102-1833" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1834"><a href="#cb102-1834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1837"><a href="#cb102-1837" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1838"><a href="#cb102-1838" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1839"><a href="#cb102-1839" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1840"><a href="#cb102-1840" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1841"><a href="#cb102-1841" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code for model summary result values"</span></span>
<span id="cb102-1842"><a href="#cb102-1842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1843"><a href="#cb102-1843" aria-hidden="true" tabindex="-1"></a><span class="co"># extract model coefficients</span></span>
<span id="cb102-1844"><a href="#cb102-1844" aria-hidden="true" tabindex="-1"></a>slope_coef_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.params[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1845"><a href="#cb102-1845" aria-hidden="true" tabindex="-1"></a>std_err_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.bse[<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1846"><a href="#cb102-1846" aria-hidden="true" tabindex="-1"></a>p_value_median_income_py <span class="op">=</span> model_pct_median_income_py.pvalues[<span class="dv">1</span>]</span>
<span id="cb102-1847"><a href="#cb102-1847" aria-hidden="true" tabindex="-1"></a>ci_95_lower_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">0</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1848"><a href="#cb102-1848" aria-hidden="true" tabindex="-1"></a>ci_95_upper_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.conf_int(alpha<span class="op">=</span><span class="fl">0.05</span>)[<span class="dv">1</span>][<span class="dv">1</span>], <span class="dv">3</span>)</span>
<span id="cb102-1849"><a href="#cb102-1849" aria-hidden="true" tabindex="-1"></a>r_sqrd_median_income_py <span class="op">=</span> <span class="bu">round</span>(model_pct_median_income_py.rsquared, <span class="dv">3</span>)</span>
<span id="cb102-1850"><a href="#cb102-1850" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1851"><a href="#cb102-1851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1852"><a href="#cb102-1852" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb102-1853"><a href="#cb102-1853" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1854"><a href="#cb102-1854" aria-hidden="true" tabindex="-1"></a><span class="fu">### Income summary plots</span></span>
<span id="cb102-1855"><a href="#cb102-1855" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1856"><a href="#cb102-1856" aria-hidden="true" tabindex="-1"></a><span class="in">```{r fig.width=10,fig.height=3}</span></span>
<span id="cb102-1857"><a href="#cb102-1857" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb102-1858"><a href="#cb102-1858" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1859"><a href="#cb102-1859" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: screen-right</span></span>
<span id="cb102-1860"><a href="#cb102-1860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1861"><a href="#cb102-1861" aria-hidden="true" tabindex="-1"></a>model_plots_income <span class="ot">&lt;-</span> (plot_model_pct_households_below_poverty <span class="sc">|</span> plot_model_median_income) <span class="sc">+</span></span>
<span id="cb102-1862"><a href="#cb102-1862" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="st">"Lineral Regression Models of Power Outages vs. Income"</span>)</span>
<span id="cb102-1863"><a href="#cb102-1863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1864"><a href="#cb102-1864" aria-hidden="true" tabindex="-1"></a>model_plots_income</span>
<span id="cb102-1865"><a href="#cb102-1865" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1866"><a href="#cb102-1866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1867"><a href="#cb102-1867" aria-hidden="true" tabindex="-1"></a><span class="fu"># Results</span></span>
<span id="cb102-1868"><a href="#cb102-1868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1869"><a href="#cb102-1869" aria-hidden="true" tabindex="-1"></a>Based on the results of the linear regression models, there is a statistically significant relationship at the 5 % level between percent of houses that lost power and the following variables:</span>
<span id="cb102-1870"><a href="#cb102-1870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1871"><a href="#cb102-1871" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>percent of population white</span>
<span id="cb102-1872"><a href="#cb102-1872" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>percent of population black</span>
<span id="cb102-1873"><a href="#cb102-1873" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>percent of population hispanic / latino</span>
<span id="cb102-1874"><a href="#cb102-1874" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>percent of population age 65 and older</span>
<span id="cb102-1875"><a href="#cb102-1875" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>percent of population children under age 18</span>
<span id="cb102-1876"><a href="#cb102-1876" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>percent of households below the poverty level</span>
<span id="cb102-1877"><a href="#cb102-1877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1878"><a href="#cb102-1878" aria-hidden="true" tabindex="-1"></a>Of the significant variables, black; hispanic / latino; children under 18; and poverty were positively correlated with residential power outages. Significant variables that were negatively correlated with residential power outages included white and age 65 and older.</span>
<span id="cb102-1879"><a href="#cb102-1879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1880"><a href="#cb102-1880" aria-hidden="true" tabindex="-1"></a>For each model with statistically significant results (ie. p-value <span class="sc">\&lt;</span> 0.05) we reject the null hypothesis that the socioeconomic variable had no influence on percentage of houses without electricity in each census tract at the 5% level. In other words, the slope coefficient is significantly different from zero. Each slope coefficient represents the change in percent of houses that lost power for a one unit increase in the socioeconomic variable. To use the percent white model as an example, for each one unit increase in percent of census population that is white, the percent of census level residential power outages decreases by <span class="in">`r abs(slope_coef_white)`</span>. For the percent white model, the 95% confidence interval for the slope coefficient ranges from <span class="in">`r ci_95_lower_white`</span> to <span class="in">`r ci_95_upper_white`</span>. This means that there is a 95% change that this interval includes the true census level rate of change for percent residential power outages for each one unit change in percent of population that is white.</span>
<span id="cb102-1881"><a href="#cb102-1881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1884"><a href="#cb102-1884" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1885"><a href="#cb102-1885" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb102-1886"><a href="#cb102-1886" aria-hidden="true" tabindex="-1"></a>r_sqrd_min <span class="ot">&lt;-</span> <span class="fu">min</span>(r_sqrd_white, r_sqrd_black, r_sqrd_am_native, r_sqrd_asian, r_sqrd_hispanic_latino, r_sqrd_65_and_over, r_sqrd_children_under_18, r_sqrd_households_below_poverty, r_sqrd_median_income) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb102-1887"><a href="#cb102-1887" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1888"><a href="#cb102-1888" aria-hidden="true" tabindex="-1"></a>r_sqrd_max <span class="ot">&lt;-</span> <span class="fu">max</span>(r_sqrd_white, r_sqrd_black, r_sqrd_am_native, r_sqrd_asian, r_sqrd_hispanic_latino, r_sqrd_65_and_over, r_sqrd_children_under_18, r_sqrd_households_below_poverty, r_sqrd_median_income) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb102-1889"><a href="#cb102-1889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1890"><a href="#cb102-1890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1891"><a href="#cb102-1891" aria-hidden="true" tabindex="-1"></a>The r-squared terms represent the variance in percent of houses without power that can be explained by the socioeconomic variable. The r-squared values ranged from <span class="in">`r r_sqrd_min`</span>% for the asian model to <span class="in">`r r_sqrd_max`</span>% for the age 65 and older model.</span>
<span id="cb102-1892"><a href="#cb102-1892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1893"><a href="#cb102-1893" aria-hidden="true" tabindex="-1"></a>The results of the linear models are summarized in the table below.</span>
<span id="cb102-1894"><a href="#cb102-1894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1897"><a href="#cb102-1897" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1898"><a href="#cb102-1898" aria-hidden="true" tabindex="-1"></a><span class="co">#| column: page-right</span></span>
<span id="cb102-1899"><a href="#cb102-1899" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1900"><a href="#cb102-1900" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb102-1901"><a href="#cb102-1901" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Code to create summary table"</span></span>
<span id="cb102-1902"><a href="#cb102-1902" aria-hidden="true" tabindex="-1"></a>model_summary_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">model_name =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"black"</span>, <span class="st">"native american"</span>, <span class="st">"asian"</span>, <span class="st">"hispanic / latino"</span>, <span class="st">"65 and older"</span>, <span class="st">"children under 18"</span>, <span class="st">"poverty"</span>, <span class="st">"median income"</span>),</span>
<span id="cb102-1903"><a href="#cb102-1903" aria-hidden="true" tabindex="-1"></a>                               <span class="at">slope_coef =</span> <span class="fu">c</span>(slope_coef_white, slope_coef_black, slope_coef_am_native, slope_coef_asian, slope_coef_hispanic_latino, slope_coef_pct_65_and_over, slope_coef_children_under_18, slope_coef_households_below_poverty, slope_coef_median_income),</span>
<span id="cb102-1904"><a href="#cb102-1904" aria-hidden="true" tabindex="-1"></a>                               <span class="at">std_err =</span> <span class="fu">c</span>(std_err_white, std_err_black, std_err_am_native, std_err_asian, std_err_hispanic_latino, std_err_pct_65_and_over, std_err_children_under_18, std_err_households_below_poverty, std_err_median_income),</span>
<span id="cb102-1905"><a href="#cb102-1905" aria-hidden="true" tabindex="-1"></a>                               <span class="at">p_value =</span> <span class="fu">c</span>(p_value_white, p_value_black, p_value_am_native, p_value_asian, p_value_hispanic_latino, p_value_pct_65_and_over, p_value_children_under_18, p_value_households_below_poverty, p_value_median_income),</span>
<span id="cb102-1906"><a href="#cb102-1906" aria-hidden="true" tabindex="-1"></a>                               <span class="at">ci_95_lower =</span> <span class="fu">c</span>(<span class="fu">paste</span>(ci_95_lower_white, <span class="st">"to"</span>, ci_95_upper_white),</span>
<span id="cb102-1907"><a href="#cb102-1907" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_black, <span class="st">"to"</span>, ci_95_upper_black),</span>
<span id="cb102-1908"><a href="#cb102-1908" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_am_native, <span class="st">"to"</span>, ci_95_upper_am_native),</span>
<span id="cb102-1909"><a href="#cb102-1909" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_asian, <span class="st">"to"</span>, ci_95_upper_asian),</span>
<span id="cb102-1910"><a href="#cb102-1910" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_hispanic_latino, <span class="st">"to"</span>, ci_95_upper_hispanic_latino),</span>
<span id="cb102-1911"><a href="#cb102-1911" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_pct_65_and_over, <span class="st">"to"</span>, ci_95_upper_pct_65_and_over),</span>
<span id="cb102-1912"><a href="#cb102-1912" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_children_under_18, <span class="st">"to"</span>, ci_95_upper_children_under_18),</span>
<span id="cb102-1913"><a href="#cb102-1913" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_households_below_poverty, <span class="st">"to"</span>, ci_95_upper_households_below_poverty),</span>
<span id="cb102-1914"><a href="#cb102-1914" aria-hidden="true" tabindex="-1"></a>                                               <span class="fu">paste</span>(ci_95_lower_median_income, <span class="st">"to"</span>, ci_95_upper_median_income)),</span>
<span id="cb102-1915"><a href="#cb102-1915" aria-hidden="true" tabindex="-1"></a>                               <span class="at">r_squared =</span> <span class="fu">c</span>(r_sqrd_white, r_sqrd_black, r_sqrd_am_native, r_sqrd_asian, r_sqrd_hispanic_latino, r_sqrd_65_and_over, r_sqrd_children_under_18, r_sqrd_households_below_poverty, r_sqrd_median_income)) <span class="sc">%&gt;%</span> </span>
<span id="cb102-1916"><a href="#cb102-1916" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">significance =</span> <span class="fu">case_when</span>(</span>
<span id="cb102-1917"><a href="#cb102-1917" aria-hidden="true" tabindex="-1"></a>    p_value <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"yes"</span>,</span>
<span id="cb102-1918"><a href="#cb102-1918" aria-hidden="true" tabindex="-1"></a>    p_value <span class="sc">&gt;=</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"no"</span>))</span>
<span id="cb102-1919"><a href="#cb102-1919" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1920"><a href="#cb102-1920" aria-hidden="true" tabindex="-1"></a>model_summary_table <span class="ot">&lt;-</span> model_summary_df <span class="sc">%&gt;%</span> </span>
<span id="cb102-1921"><a href="#cb102-1921" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"model name"</span>, <span class="st">"slope coefficent"</span>, <span class="st">"standard error"</span>, <span class="st">"p-value"</span>, <span class="st">"95% confidence interval"</span>, <span class="st">"r-squared"</span>, <span class="st">"significant at 5% level"</span>),</span>
<span id="cb102-1922"><a href="#cb102-1922" aria-hidden="true" tabindex="-1"></a>        <span class="at">caption =</span> <span class="st">"Summary of Model Results"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb102-1923"><a href="#cb102-1923" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_paper</span>()</span>
<span id="cb102-1924"><a href="#cb102-1924" aria-hidden="true" tabindex="-1"></a>model_summary_table</span>
<span id="cb102-1925"><a href="#cb102-1925" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1926"><a href="#cb102-1926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1927"><a href="#cb102-1927" aria-hidden="true" tabindex="-1"></a>The figures below provide a visual comparison of each model result. The bold portion of the line represents the 90% confidence interval and the full line represents the 95% confidnece interval for each slope coefficent estimate.</span>
<span id="cb102-1928"><a href="#cb102-1928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1931"><a href="#cb102-1931" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1932"><a href="#cb102-1932" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1933"><a href="#cb102-1933" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb102-1934"><a href="#cb102-1934" aria-hidden="true" tabindex="-1"></a>race_model_summary <span class="ot">&lt;-</span> <span class="fu">plot_summs</span>(model_pct_white, model_pct_black, model_pct_am_native, model_pct_asian, model_pct_hispanic_latino,</span>
<span id="cb102-1935"><a href="#cb102-1935" aria-hidden="true" tabindex="-1"></a>           <span class="at">inner_ci_level =</span> <span class="fl">0.9</span>,</span>
<span id="cb102-1936"><a href="#cb102-1936" aria-hidden="true" tabindex="-1"></a>           <span class="at">model.names =</span> <span class="fu">c</span>(<span class="st">"white"</span>, <span class="st">"black"</span>, <span class="st">"native american"</span>, <span class="st">"asian"</span>, <span class="st">"hispanic/latino"</span>))</span>
<span id="cb102-1937"><a href="#cb102-1937" aria-hidden="true" tabindex="-1"></a>race_model_summary</span>
<span id="cb102-1938"><a href="#cb102-1938" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1939"><a href="#cb102-1939" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1942"><a href="#cb102-1942" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1943"><a href="#cb102-1943" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb102-1944"><a href="#cb102-1944" aria-hidden="true" tabindex="-1"></a><span class="co">#| #| code-overflow: wrap</span></span>
<span id="cb102-1945"><a href="#cb102-1945" aria-hidden="true" tabindex="-1"></a>age_model_summary <span class="ot">&lt;-</span><span class="fu">plot_summs</span>(model_pct_65_and_over, model_pct_children_under_18,</span>
<span id="cb102-1946"><a href="#cb102-1946" aria-hidden="true" tabindex="-1"></a>           <span class="at">inner_ci_level =</span> <span class="fl">0.95</span>,</span>
<span id="cb102-1947"><a href="#cb102-1947" aria-hidden="true" tabindex="-1"></a>           <span class="at">model.names =</span> <span class="fu">c</span>(<span class="st">"over 65"</span>, <span class="st">"under 18"</span>))</span>
<span id="cb102-1948"><a href="#cb102-1948" aria-hidden="true" tabindex="-1"></a>age_model_summary</span>
<span id="cb102-1949"><a href="#cb102-1949" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1950"><a href="#cb102-1950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1953"><a href="#cb102-1953" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1954"><a href="#cb102-1954" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb102-1955"><a href="#cb102-1955" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-overflow: wrap</span></span>
<span id="cb102-1956"><a href="#cb102-1956" aria-hidden="true" tabindex="-1"></a>income_model_summary <span class="ot">&lt;-</span><span class="fu">plot_summs</span>(model_pct_households_below_poverty, model_median_income,</span>
<span id="cb102-1957"><a href="#cb102-1957" aria-hidden="true" tabindex="-1"></a>           <span class="at">inner_ci_level =</span> <span class="fl">0.95</span>,</span>
<span id="cb102-1958"><a href="#cb102-1958" aria-hidden="true" tabindex="-1"></a>           <span class="at">model.names =</span> <span class="fu">c</span>(<span class="st">"poverty"</span>, <span class="st">"median income"</span>))</span>
<span id="cb102-1959"><a href="#cb102-1959" aria-hidden="true" tabindex="-1"></a>income_model_summary</span>
<span id="cb102-1960"><a href="#cb102-1960" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1961"><a href="#cb102-1961" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1962"><a href="#cb102-1962" aria-hidden="true" tabindex="-1"></a><span class="fu"># Conclusion</span></span>
<span id="cb102-1963"><a href="#cb102-1963" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1964"><a href="#cb102-1964" aria-hidden="true" tabindex="-1"></a>This analysis does not include any verification of power outage locations nor does it incorporate typical variations in nighttime lights. The intent of the statistical analysis is not to use sociodemographic variables as predictors of power outages, but rather provide insight into groups that were disproportionately affected. Further work could incorporate electric utility data to identify vulnerable power grid infrastructure and then recommend equitable asset management and capital improvement plans.</span>
<span id="cb102-1965"><a href="#cb102-1965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1966"><a href="#cb102-1966" aria-hidden="true" tabindex="-1"></a><span class="fu"># Additional maps</span></span>
<span id="cb102-1967"><a href="#cb102-1967" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1968"><a href="#cb102-1968" aria-hidden="true" tabindex="-1"></a><span class="fu"># References</span></span>
<span id="cb102-1969"><a href="#cb102-1969" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1970"><a href="#cb102-1970" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">VIIRS Day/Night Band Sensor User Guide</span><span class="co">](https://viirsland.gsfc.nasa.gov/PDF/VIIRS_BlackMarble_UserGuide.pdf)</span></span>
<span id="cb102-1971"><a href="#cb102-1971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1972"><a href="#cb102-1972" aria-hidden="true" tabindex="-1"></a>Pebesma E (2022). stars: Spatiotemporal Arrays, Raster and Vector Data Cubes. https://r-spatial.github.io/stars/, https://github.com/r-spatial/stars/.</span>
<span id="cb102-1973"><a href="#cb102-1973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1974"><a href="#cb102-1974" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">Extreme Winter Weather Causes U.S. Blackouts</span><span class="co">](https://earthobservatory.nasa.gov/images/147941/extreme-winter-weather-causes-us-blackouts)</span></span>
<span id="cb102-1975"><a href="#cb102-1975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1976"><a href="#cb102-1976" aria-hidden="true" tabindex="-1"></a>::: panel-tabset</span>
<span id="cb102-1977"><a href="#cb102-1977" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("r-project", fill = "#5A5A5A", a11y = "sem")` R</span></span>
<span id="cb102-1978"><a href="#cb102-1978" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1981"><a href="#cb102-1981" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-1982"><a href="#cb102-1982" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1983"><a href="#cb102-1983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1984"><a href="#cb102-1984" aria-hidden="true" tabindex="-1"></a><span class="fu">## `r fontawesome::fa("python", fill = "#5A5A5A", a11y ="sem")` Python</span></span>
<span id="cb102-1985"><a href="#cb102-1985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-1988"><a href="#cb102-1988" aria-hidden="true" tabindex="-1"></a><span class="in">```{python}</span></span>
<span id="cb102-1989"><a href="#cb102-1989" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-1990"><a href="#cb102-1990" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>